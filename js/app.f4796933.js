(function(){var e={5505:function(e,t,s){"use strict";var o=s(538),a=s(2882),n=s(30);o.ZP.use(a.ZP),n.Z.setOptions({defaultProgrammaticPromise:!0});var r=s(9669),i=s.n(r),l=s(1258),c=s(2724),d=s(7033),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(" "+e._s(e.first?e.$t("register.title"):`${e.$t("login.title")} - v2rayA`)+" ")])]),t("section",{staticClass:"modal-card-body"},[e._m(0),t("b-field",{attrs:{label:e.$t("login.username"),type:"is-success"}},[t("b-input",{ref:"username",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter.apply(null,arguments)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("b-field",{attrs:{label:e.$t("login.password"),type:"is-success"}},[t("b-input",{attrs:{type:"password",maxlength:e.first?"32":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e.first?t("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-info"}},[t("p",[e._v(e._s(e.$t("register.messages.0")))]),t("p",[e._v(e._s(e.$t("register.messages.1")))]),t("p",[e._v(e._s(e.$t("register.messages.2")))])]):e._e()],1),t("footer",{staticClass:"modal-card-foot flex-end"},[t("b-button",{class:{"is-primary":!e.first,"is-twitter":e.first},on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.first?e.$t("operations.create"):e.$t("operations.login"))+" ")])],1)])},u=[function(){var e=this,t=e._self._c;return t("p",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{src:s(1823),alt:"v2rayA"}})])}],h=(s(7658),{SubscriptionType:"subscription",ServerType:"server",SubscriptionServerType:"subscriptionServer"});const m=s(4998);function b(e,t){let s=t.id-1,o=t.sub;return t._type===h.ServerType?e.servers[s]:t._type===h.SubscriptionServerType?e.subscriptions[o].servers[s]:null}function f(e,t){if(t instanceof Array){const s=[];for(const o of t){const t=b(e,o);t&&s.push(t)}return s}return b(e,t)}function v(e,t,s,o,a){e.data?"SUCCESS"===e.data.code?s.apply(t):o&&o instanceof Function?o.apply(t):a&&a instanceof Function?a.apply(t):t.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",queue:!1,duration:5e3}):o&&o instanceof Function&&o.apply(t)}function g(e){let t=e,s="",o=!1;if(-1===t.indexOf("://"))t="http://"+t;else switch(s=t.substr(0,t.indexOf("://")),s){case"http":case"https":case"ws":case"wss":break;default:t="http"+t.substr(t.indexOf("://")),o=!0}const a=document.createElement("a");a.href=t;const n={source:e,username:a.username,password:a.password,protocol:o?s:a.protocol.replace(":",""),host:a.hostname,port:a.port?parseInt(a.port):"https"===s||"wss"===s?443:80,query:a.search,params:function(){for(var e,t={},s=a.search.replace(/^\?/,"").split("&"),o=s.length,n=0;n<o;n++)s[n]&&(e=s[n].split("="),t[e[0]]=decodeURIComponent(e[1]));return t}(),file:(a.pathname.match(/\/([^/?#]+)$/i)||[null,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^/])/,"/$1"),relative:(a.href.match(/tps?:\/\/[^/]+(.+)/)||[null,""])[1],segments:a.pathname.replace(/^\//,"").split("/")};return a.remove(),n}function y({username:e,password:t,protocol:s,host:o,port:a,params:n,hash:r,path:i}){const l=m().protocol(s||"http").username(e||"").password(t||"").host(o||"").port(a||80).path(i||"").query(n||{}).hash(r||""),c=l.toString();return c}function w(e){return"string"===typeof e||"number"===typeof e?parseInt(e):"boolean"===typeof e?e?1:0:e}var S=s(7152),k={common:{outboundSetting:"出站设置",setting:"设置",about:"关于",loggedAs:"正在以 <b>{username}</b> 的身份登录",v2rayCoreStatus:"v2ray-core状态",checkRunning:"检测中",isRunning:"正在运行",notRunning:"就绪",notLogin:"未登录",latest:"最新",local:"本地",success:"成功",fail:"失败",message:"提示",none:"无",optional:"可选",loadBalance:"负载均衡",log:"日志"},welcome:{title:"初来乍到，请多关照",docker:"v2rayA服务端正在运行于Docker环境中，Version: {version}",default:"v2rayA服务端正在运行，Version: {version}",newVersion:"检测到新版本: {version}",messages:["我们发现你还没有创建或导入任何节点、订阅。","我们支持以节点地址或者订阅地址的方式导入，也支持手动创建节点，快来试试吧！"]},v2ray:{start:"启动",stop:"关闭"},server:{name:"节点名",address:"节点地址",protocol:"协议",latency:"时延",lastSeenTime:"上次存活时间",lastTryTime:"上次测试时间",messages:{notAllowInsecure:"根据 {name} 的官方文档，如果你使用 {name}，将不允许 AllowInsecure",notRecommend:"根据 {name} 的官方文档，如果你使用 {name}，不推荐开启 AllowInsecure"}},InSecureConfirm:{title:"检测到不安全的配置",message:"即将保存的配置中<b>AllowInsecure</b>被设置为true，除非你知道你在做什么，否则贸然开启可能导致数据泄漏！是否继续？",confirm:"我知道我在做什么",cancel:"取消"},subscription:{host:"域名",remarks:"别名",timeLastUpdate:"上次更新时间",numberServers:"节点数"},operations:{name:"操作",update:"更新",modify:"修改",share:"分享",view:"查看",delete:"删除",create:"创建",import:"导入",inBatch:"批量",connect:"连接",disconnect:"断开",select:"选择",login:"登录",logout:"注销",configure:"配置",cancel:"取消",confirm:"确定",confirm2:"确认无误",saveApply:"保存并应用",save:"保存",copyLink:"复制链接",helpManual:"查看帮助",yes:"是",no:"否",switchSite:"切换至备用站点",addOutbound:"新增一个出站 (outbound)"},register:{title:"初来乍到，创建一个管理员账号",messages:["请记住您创建的管理员账号，用于登录该管理页面。","账号信息位于本地，我们不会上传任何信息到服务器。","如不慎忘记密码，使用 v2raya --reset-password 重置。"]},login:{title:"登录",username:"用户名",password:"密码"},setting:{transparentProxy:"透明代理/系统代理",transparentType:"透明代理/系统代理实现方式",pacMode:"规则端口的分流模式",preventDnsSpoofing:"防止DNS污染",specialMode:"特殊模式",mux:"多路复用",autoUpdateSub:"自动更新订阅",autoUpdateGfwlist:"自动更新GFWList",preferModeWhenUpdate:"解析订阅链接/更新时优先使用",ipForwardOn:"开启IP转发",portSharingOn:"开启端口分享",concurrency:"最大并发数",options:{global:"不进行分流",direct:"直连模式",pac:"跟随规则端口",whitelistCn:"大陆白名单模式",gfwlist:"GFWList模式",sameAsPacMode:"分流规则与规则端口所选模式一致",customRouting:"自定义路由规则",antiDnsHijack:"仅防止DNS劫持(快速)",forwardDnsRequest:"转发DNS请求",doh:"DoH(DNS-over-HTTPS)",default:"保持系统默认",on:"启用",off:"关闭",updateSubWhenStart:"服务端启动时更新订阅",updateSubAtIntervals:"每隔一段时间更新订阅（单位：小时）",updateGfwlistWhenStart:"服务端启动时更新GFWList",updateGfwlistAtIntervals:"每隔一段时间更新GFWList（单位：小时）",dependTransparentMode:"跟随透明代理/系统代理",closed:"关闭",advanced:"自定义高级设置",leastPing:"最小时延优先"},messages:{gfwlist:"该时间是指本地文件最后修改时间，因此可能会领先最新版本",transparentProxy:"全局代理开启后，无需经过额外设置，任何TCP流量均会经过V2RayA。另外，如需作为网关使得连接本机的其他主机或docker也享受代理，请勾选“开启局域网共享”。",transparentType:"★tproxy: 支持udp，不支持docker。★redirect: docker友好，不支持udp，需要占用本地53端口以应对dns污染。",pacMode:"该选项设置规则分流端口所使用的路由模式。默认情况下规则分流端口为20172，HTTP协议。",preventDnsSpoofing:"★转发DNS查询: 通过代理服务器转发DNS请求。★DoH(v2ray-core: 4.22.0+): DNS over HTTPS。",specialMode:"★supervisor：监控dns污染，提前拦截，利用v2ray-core的sniffing解决污染。★fakedns：使用fakedns策略加速解析。",tcpFastOpen:"简化TCP握手流程以加速建立连接，可能会增加封包的特征。若系统不支持可能会导致无法正常连接。",mux:"复用TCP连接以减少握手次数，但会影响吞吐量大的使用场景，如观看视频、下载、测速。当前仅支持vmess节点。可能会增加特征造成断流。",confirmEgressPorts:"<p>您正在对不同子网下的机器设置透明代理，请确认不走代理的出方向端口。</p>\n                          <p>当前设置的端口白名单为：</p>\n                          <p>TCP: {tcpPorts}</p>\n                          <p>UDP: {udpPorts}</p>",grpcShouldWithTls:"gRPC必须启用TLS",ssPluginImpl:"★默认：使用 simple-obfs 时为等效传输层，v2ray-plugin 时为链式。★链式：shadowsocks 流量会被转发至独立的插件。★等效传输层：直接由 v2ray/xray 核心的传输层处理。"}},customAddressPort:{title:"地址与端口",serviceAddress:"服务端地址",portSocks5:"socks5端口",portHttp:"http端口",portSocks5WithPac:"socks5端口(带分流规则)",portHttpWithPac:"http端口(带分流规则)",portVmess:"VMess端口(带分流规则)",portVmessLink:"VMess端口链接",messages:["如需修改后端运行地址(默认0.0.0.0:2017)，可添加环境变量<code>V2RAYA_ADDRESS</code>或添加启动参数<code>--address</code>。","docker模式下如果未使用<code>--privileged --network host</code>参数启动容器，可通过修改端口映射修改socks5、http端口。","docker模式下不能正确判断端口占用，请确保输入的端口未被其他程序占用。","如将端口设为0则表示关闭该端口。"]},customRouting:{title:"自定义路由规则",defaultRoutingRule:"默认路由规则",sameAsDefaultRule:"与默认规则相同",appendRule:"追加规则",direct:"直连",proxy:"代理",block:"拦截",rule:"规则",domainFile:"域名文件",typeRule:"规则类型",messages:{0:"将SiteDat文件放于 <b>{V2RayLocationAsset}</b> 目录下，V2rayA将自动进行识别",1:'制作SiteDat文件：<a href="https://github.com/ToutyRater/V2Ray-SiteDAT">ToutyRater/V2Ray-SiteDAT</a>',2:"在选择Tags时，可按Ctrl等多选键进行多选。",noSiteDatFileFound:"未在{V2RayLocationAsset}中发现siteDat文件",emptyRuleNotPermitted:"不能存在tags为空的规则，请检查"}},doh:{title:"配置DoH服务器",dohPriorityList:"DoH服务优先级列表",messages:["DoH即DNS over HTTPS，能够有效避免DNS污染，一些国内的DoH提供商自己本身也有被污染的可能，另外，一些DoH提供商的DoH服务可能被墙，请自行选择非代理条件下直连速度较快且效果较好的DoH提供商","大陆较好的DoH服务有阿里dns, geekdns, rubyfish等","台湾有quad101: dns.twnic.tw等","美国有cloudflare: 1.0.0.1等",'清单：<a href="https://dnscrypt.info/public-servers" target="_blank">public-servers</a>','另外，您可以在自己的国内服务器上自架DoH服务，以纵享丝滑 <a href="https://github.com/facebookexperimental/doh-proxy" target="_blank">doh-proxy</a>。在这种情况下，建议同时运行服务端(doh-proxy/doh-httpproxy, 提供对外服务)和客户端(doh-stub, 连接至doh.opendns.com)并将他们串联，因为通常情况下在普遍受到污染的地区找到一个完全不受污染的服务器是很困难的。',"建议上述列表1-2行即可，留空保存可恢复默认"]},dns:{title:"配置DNS服务器",internalQueryServers:"域名查询服务器",externalQueryServers:"国外域名查询服务器",messages:["“@:(dns.internalQueryServers)” 用于查询国内域名，而 “@:(dns.externalQueryServers)” 用于查询国外域名。","如果将 “@:(dns.externalQueryServers)” 留空，“@:(dns.internalQueryServers)” 将会负责查询所有域名。"]},egressPortWhitelist:{title:"出方向端口白名单",tcpPortWhitelist:"TCP端口白名单",udpPortWhitelist:"UDP端口白名单",messages:["如果你将v2rayA架设在对外提供服务的服务器A上，连接了代理服务器B，那么你需要注意：","透明代理会使得所有TCP、UDP流量走代理，通过走代理的流量其源IP地址会被替换为代理服务器B的IP地址，那么如果有客户向你的服务器A发出请求，他却将得到从你代理服务器B发出的回答，该回答在客户看来无疑是不合法的，从而导致连接被拒绝。","因此，需要将服务器提供的对外服务端口包含在白名单中，使其不走代理。如ssh(22)、v2raya({v2rayaPort})。","如不对外提供服务或仅对局域网内主机提供服务，则可不设置白名单。","格式：22表示端口22，20170:20172表示20170到20172三个端口。"]},configureServer:{title:"配置节点 | 节点",servername:"节点名称",port:"端口号",forceTLS:"强制开启TLS",noObfuscation:"不伪装",httpObfuscation:"伪装为HTTP",srtpObfuscation:"伪装视频通话(SRTP)",utpObfuscation:"伪装为BT下载(uTP)",wechatVideoObfuscation:"伪装为微信视频通话",dtlsObfuscation:"伪装为DTLS1.2数据包",wireguardObfuscation:"伪装为WireGuard数据包",hostObfuscation:"域名(host)",pathObfuscation:"路径(path)",seedObfuscation:"混淆种子",username:"用户名",password:"密码",origin:"原版"},configureSubscription:{title:"订阅配置"},import:{message:"填入节点链接或订阅地址：",batchMessage:"一行一个节点链接:",qrcodeError:"找不到有效的二维码，请重新尝试"},delete:{title:"确认删除",message:"确定要<b>删除</b>这些节点/订阅吗？注意，该操作是不可逆的。"},latency:{message:"时延测试往往需要花费较长时间，请耐心等待"},version:{higherVersionNeeded:"该操作需要 v2rayA 的版本高于{version}",v2rayInvalid:"检测到 geosite.dat, geoip.dat 文件或 v2ray-core 可能未正确安装，请检查",v2rayNotV5:"检测到 v2ray-core 的版本并非 v5，请使用 v5 版本或将 v2rayA 降级至 v1.5"},about:'<p>v2rayA 是 V2Ray 的一个 Web 客户端。</p>\n          <p class="about-small">默认端口：</p>\n          <p class="about-small">2017: v2rayA后端端口</p>\n          <p class="about-small">20170: SOCKS协议</p>\n          <p class="about-small">20171: HTTP协议</p>\n          <p class="about-small">20172: 带分流规则的HTTP协议</p>\n          <p class="about-small">其他端口：</p>\n          <p class="about-small">32345: tproxy，透明代理所需 </p>\n          <p>在使用中如果发现任何问题，欢迎<a href="https://github.com/v2rayA/v2rayA/issues">提出issue</a>.</p>\n          <p>文档：<a href="https://v2raya.org">https://v2raya.org</a>.</p>',axios:{messages:{optimizeBackend:"您是否需要调整服务端地址？",noBackendFound:"未在 {url} 检测到v2rayA服务端，请确定v2rayA正常运行",cannotCommunicate:["无法通信。如果您的服务端已正常运行，且端口正常开放，原因可能是当前浏览器不允许https站点访问http资源，您可以尝试切换为http备用站点。","无法通信。火狐浏览器不允许https站点访问http资源，您可以换用Chrome浏览器或切换为http备用站点。"]},urls:{usage:"https://v2raya.org/"}},routingA:{messages:["点击“查看帮助”按钮以获取帮助"]},outbound:{addMessage:"请输入你想要添加的出站(outbound)名称：",deleteMessage:'确定要<b>删除</b>出站 "{outboundName}" 吗？注意，该操作是不可逆的。'},driver:{welcome:["首先导入节点服务器","初次使用，还没有任何节点服务器，在这里导入或创建节点服务器。"],tabs:["订阅与节点服务器","导入订阅、节点服务器后，在这里切换和管理你的订阅、普通节点以及订阅节点。"]},log:{logModalTitle:"查看日志",refreshInterval:"刷新间隔",seconds:"秒",autoScoll:"自动滚动"}},_={common:{outboundSetting:"Outbound Setting",setting:"Setting",about:"About",loggedAs:"Logged as <b>{username}</b>",v2rayCoreStatus:"Status of v2ray-core",checkRunning:"Checking",isRunning:"Running",notRunning:"Ready",notLogin:"Login please",latest:"Latest",local:"Local",success:"SUCCESS",fail:"FAIL",message:"Message",none:"none",optional:"optional",loadBalance:"Load Balance",log:"Logs"},welcome:{title:"Welcome",docker:"v2rayA service is running in Docker. Version: {version}",default:"v2rayA service is running. Version: {version}",newVersion:"Detected new version: {version}",messages:["There is no server.","You can create/import a server or import a subscription."]},v2ray:{start:"Start",stop:"Stop"},server:{name:"Server Name",address:"Server Address",protocol:"Protocol",latency:"Latency",lastSeenTime:"Last seen time",lastTryTime:"Last try time",messages:{notAllowInsecure:"According to the docs of {name}, if you use {name}, AllowInsecure will be forbidden.",notRecommend:"According to the docs of {name}, if you use {name}, AllowInsecure is not recommend."}},InSecureConfirm:{title:"Dangerous configuration detected",message:"The configuration has set the <b>AllowInsecure</b> to true. This may cause security risks. Are you sure to continue?",confirm:"I know what I'm doing",cancel:"cancel"},subscription:{host:"Host",remarks:"Remarks",timeLastUpdate:"Datetime of Last Update",numberServers:"Number of Servers"},operations:{name:"Operations",update:"Update",modify:"Modify",share:"Share",view:"View",delete:"Delete",create:"Create",import:"Import",inBatch:"In batch",connect:"Connect",disconnect:"Disconnect",select:"Select",login:"Login",logout:"Logout",configure:"Configure",cancel:"Cancel",saveApply:"Save and Apply",confirm:"Confirm",confirm2:"Carefully confirmed",save:"Save",copyLink:"COPY LINK",helpManual:"Help & Manual",yes:"Yes",no:"No",switchSite:"Switch to alternate site",addOutbound:"Add an outbound"},register:{title:"Create an admin account first",messages:["Remember your admin account which is importantly used to login.","Account information is stored in local. We never send information to any server.","Once password was forgot, you could use v2raya --reset-password to reset."]},login:{title:"Login",username:"Username",password:"Password"},setting:{transparentProxy:"Transparent Proxy/System Proxy",transparentType:"Transparent Proxy/System Proxy Implementation",pacMode:"Traffic Splitting Mode of Rule Port",preventDnsSpoofing:"Prevent DNS Spoofing",specialMode:"Special Mode",mux:"Multiplex",autoUpdateSub:"Automatically Update Subscriptions",autoUpdateGfwlist:"Automatically Update GFWList",preferModeWhenUpdate:"Mode when Update Subscriptions and GFWList",ipForwardOn:"IP Forward",portSharingOn:"Port Sharing",concurrency:"Concurrency",options:{global:"Do not Split Traffic",direct:"Direct",pac:"Depend on Rule Port",whitelistCn:"Proxy except CN Sites",gfwlist:"Proxy only GFWList",sameAsPacMode:"Traffic Splitting Mode is the Same as the Rule Port",customRouting:"Customized Routing",antiDnsHijack:"Prevent DNS Hijack Only (fast)",forwardDnsRequest:"Forward DNS Request",doh:"DoH(dns-over-https)",default:"Keep Default",on:"On",off:"Off",updateSubWhenStart:"Update Subscriptions When Service Starts",updateSubAtIntervals:"Update Subscriptions Regularly (Unit: hour)",updateGfwlistWhenStart:"Update GFWList When Service Starts",updateGfwlistAtIntervals:"Update GFWList Regularly (Unit: hour)",dependTransparentMode:"Follows Transparent Proxy/System Proxy",closed:"Off",advanced:"Advanced Setting",leastPing:"Least Latency First"},messages:{gfwlist:"Based on modified time of file which sometimes is after latest version online.",transparentProxy:"If transparent proxy on, no extra configure needed and all TCP traffic will pass through the v2rayA. Providing proxy service to other computers and docker as the gateway should make option 'Share in LAN' on.",transparentType:"★tproxy: support UDP, but not support docker. ★redirect: friendly for docker, but does not support UDP and need to occupy local port 53 for dns anti-pollution.",pacMode:'Here you can set the splitting traffic rule of the rule port. By default, "Rule of Splitting Traffic" port is 20172 and HTTP protocol.',preventDnsSpoofing:"★Forward DNS Request: DNS requests will be forwarded by proxy server.★DoH(dns-over-https, v2ray-core: 4.22.0+): DNS over HTTPS.",specialMode:"★supervisor：Monitor dns pollution, intercept in advance, use the sniffing mechanism of v2ray-core to prevent pollution. ★fakedns：Use the fakens strategy to speed up the resolving.",tcpFastOpen:"Simplify TCP handshake process to speed up connection establishment. Risk of emphasizing characteristics of packets exists. It may cause failed to connect if your system does not support it.",mux:"Multiplexing TCP connections to reduce the number of handshake, but it will affect the use cases with high throughput, such as watching videos, downloading, and test speed. Risk of emphasizing characteristics of packets exists. Support vmess only now.",confirmEgressPorts:"<p>You are setting up transparent proxy across LANs, confirm egress port whitelist.</p>\n                          <p>Whitelist:</p>\n                          <p>TCP: {tcpPorts}</p>\n                          <p>UDP: {udpPorts}</p>",grpcShouldWithTls:"gRPC must be with TLS",ssPluginImpl:"★default: 'transport' for simple-obfs, 'chained' for v2ray-plugin.★chained: shadowsocks traffic will be redirect to standalone plugin.★transport: processed by the transport layer of v2ray/xray core directly."}},customAddressPort:{title:"Address and Ports",serviceAddress:"Address of Service",portSocks5:"Port of SOCKS5",portHttp:"Port of HTTP",portSocks5WithPac:"Port of SOCKS5(with Rule)",portHttpWithPac:"Port of HTTP(with Rule)",portVmess:"Port of VMess(with Rule)",portVmessLink:"Link of VMess port",messages:["Service address default as 0.0.0.0:2017 can be changed by setting environment variable <code>V2RAYA_ADDRESS</code> and command argument<code>--address</code>.","If you start v2raya docker container with port mapping instead of <code>--network host</code>, you can remapping ports in this way.","We cannot judge port occupations in docker mode. Confirm it by yourself.","Zero means to close this port."]},customRouting:{title:"Customize Routing Rule",defaultRoutingRule:"Default Routing Rule",sameAsDefaultRule:"the same as default rule",appendRule:"Append Rule",direct:"Direct",proxy:"Proxy",block:"Block",rule:"Rule",domainFile:"Domain File",typeRule:"Type of Rule",messages:{0:"v2rayA will recognize all SiteDat file in <b>{V2RayLocationAsset}</b>",1:'To make a SiteDat file by yourself: <a href="https://github.com/ToutyRater/V2Ray-SiteDAT">ToutyRater/V2Ray-SiteDAT</a>',2:"Multi-select is supported.",noSiteDatFileFound:"No siteDat file found in {V2RayLocationAsset}",emptyRuleNotPermitted:"Empty rule is not permitted"}},doh:{title:"Configure DoH Server",dohPriorityList:"Priority list of DoH Servers",messages:["DoH (DNS over HTTPS) can effectively avoid DNS pollution. But some native DoH providers may themselves be contaminated sometimes. In addition, some DoH services may be blocked by local network providers. Please choose the fastest and stablest DoH server.","Awesome public DoH servers in Mainland China include alidns, geekdns, rubyfish, etc","In taiwan area include quad101, etc","USA: cloudflare, dns.google, etc",'Checklist：<a href="https://dnscrypt.info/public-servers" target="_blank">public-servers</a>','Besides, setting up DoH service at your own native server is suggested and well-behaved in most cases <a href="https://github.com/facebookexperimental/doh-proxy" target="_blank">doh-proxy</a>. In this case, it is recommended to run the server(doh-proxy/doh-httpproxy) providing service and client(doh-stub) connecting to doh.opendns.com at the same time and connect them in series, because you can hardly find a server that is not polluted in a generally contaminated region.',"Optimally, place one or two lines above. The list will restore to default after saving with empty content."]},dns:{title:"Configure DNS Server",internalQueryServers:"Domain Query Servers",externalQueryServers:"External Domain Query Servers",messages:['"@:(dns.internalQueryServers)" are designed to be used to look up domain names in China, while "@:(dns.externalQueryServers)" be used to look up others.','"@:(dns.internalQueryServers)" will be used to look up all domain names if "@:(dns.externalQueryServers)" is empty.']},egressPortWhitelist:{title:"Egress Port Whitelist",tcpPortWhitelist:"TCP Port Whitelist",udpPortWhitelist:"UDP Port Whitelist",messages:["If v2rayA is setup on a server A which connected with a proxy server B, pay attention:","Transparent proxy will force all TCP and UDP traffic to pass through proxy server B, where source IP address will be replaced with proxy B's. Moreover, if some clients send requests to server A that provides service, they will received responses from your proxy B's IP address weirdly, which is illegal.","To resolve it, we need to add those service ports to whitelist so that not pass through proxy.For examples, ssh(22)、v2raya({v2rayaPort}).","Obviously, if the server does not provide any service, you can skip configuring.","Formatting：22 means port 22，20170:20172 means three ports 20170 to 20172."]},configureServer:{title:"Configure Server | Server",servername:"Servername",port:"Port",forceTLS:"forcibly TLS on",noObfuscation:"No obfuscation",httpObfuscation:"Obfuscated as HTTP",srtpObfuscation:"Obfuscated as Video Calls (SRTP)",utpObfuscation:"Obfuscated as Bittorrent (uTP)",wechatVideoObfuscation:"Obfuscated as Wechat Video Calls",dtlsObfuscation:"Obfuscated as DTLS1.2 Packets",wireguardObfuscation:"Obfuscated as WireGuard Packets",hostObfuscation:"Host",pathObfuscation:"Path",seedObfuscation:"Seed",username:"Username",password:"Password",origin:"origin"},configureSubscription:{title:"Configure Subscription"},import:{message:"Input a server link or subscription address:",batchMessage:"One server link per line:",qrcodeError:"Failed to find a valid QRCode, please try again"},delete:{title:"Confirm to DELETE",message:"Be sure to <b>DELETE</b> those servers/subscriptions? It is not reversible."},latency:{message:"Latency tests used to cost one or several minutes. Wait patiently please."},version:{higherVersionNeeded:"This operation need higher version of v2rayA than {version}",v2rayInvalid:"geosite.dat, geoip.dat or v2ray-core may not be installed correctly",v2rayNotV5:"The version of v2ray-core is not v5. Use v5 or downgrade v2rayA to v1.5"},about:'<p>v2rayA is a web GUI client of V2Ray.</p>\n          <p class="about-small">Default ports:</p>\n          <p class="about-small">2017: v2rayA service port</p>\n          <p class="about-small">20170: SOCKS protocol</p>\n          <p class="about-small">20171: HTTP protocol</p>\n          <p class="about-small">20172: HTTP protocol with "Rule of Splitting Traffic"</p>\n          <p class="about-small">Other ports：</p>\n          <p class="about-small">32345: tproxy, needed by transparent proxy </p>\n          <p>All data is stored in local instead of in the cloud. </p>\n          <p>Problems found during use can be reported at <a href="https://github.com/v2rayA/v2rayA/issues">issues</a>.</p>\n          <p>Documentation: <a href="https://v2raya.org">https://v2raya.org</a></p>',axios:{messages:{optimizeBackend:"Adjust v2rayA service address？",noBackendFound:"Cannot find v2rayA at {url}. Make sure v2rayA is running at this address.",cannotCommunicate:["Cannot communicate. If your service is running and ports open correctly, the reason may be that current browser does not allow https sites to access http resources, you can try using Chrome or switching to alternate http site.","Cannot communicate. Firefox does not allow https sites to access http resources, you can try switching to alternate http sites."]},urls:{usage:"https://github.com/v2rayA/v2rayA/wiki/Usage"}},routingA:{messages:["click the button 'Help&Manual' for help"]},outbound:{addMessage:"Please input the outbound name you want to add:",deleteMessage:'Be sure to <b>DELETE</b> the outbound "{outboundName}"? It is not reversible.'},log:{logModalTitle:"View logs",refreshInterval:"Refresh Interval",seconds:"seconds",autoScoll:"Auto Scroll"}},x={common:{outboundSetting:"تنظیمات خروجی",setting:"تنظیمات",about:"درباره",loggedAs:"Logged as <b>{username}</b>",v2rayCoreStatus:"وضعیت v2ray-core",checkRunning:"بررسی",isRunning:"درحال اجرا",notRunning:"آماده",notLogin:"لطفا وارد شوید",latest:"آخرین",local:"محلی",success:"موفق",fail:"عدم موفقیت",message:"پیام",none:"هیچ یک",optional:"اختیاری",loadBalance:"تعادل بار",log:"لاگ ها"},welcome:{title:"خوش آمدی",docker:"v2rayA service is running in Docker. Version: {version}",default:"v2rayA service is running. Version: {version}",newVersion:"Detected new version: {version}",messages:["There is no server.","You can create/import a server or import a subscription."]},v2ray:{start:"شروع",stop:"خاتمه"},server:{name:"نام سرور",address:"آدرس سرور",protocol:"پروتکل",latency:"تاخیر",lastSeenTime:"آخرین بار مراجعه",lastTryTime:"آخرین زمان تست کردن",messages:{notAllowInsecure:"According to the docs of {name}, if you use {name}, AllowInsecure will be forbidden.",notRecommend:"According to the docs of {name}, if you use {name}, AllowInsecure is not recommend."}},InSecureConfirm:{title:"پیکربندی خطرناک شناسایی شد",message:"The configuration has set the <b>AllowInsecure</b> to true. This may cause security risks. Are you sure to continue?",confirm:"من میدانم چه کار دارم میکنم",cancel:"لغو"},subscription:{host:"هاست",remarks:"Remarks",timeLastUpdate:"تاریخ آخرین به روز رسانی",numberServers:"تعداد سرورها"},operations:{name:"عملیات",update:"بروزرسانی",modify:"تغییر",share:"اشتراک",view:"View",delete:"حذف",create:"ایجاد",import:"وارد کردن",inBatch:"به صورت دسته ای",connect:"اتصال",disconnect:"قطع اتصال",select:"انتخاب",login:"وارد شدن",logout:"خارج شدن",configure:"پیکربندی شود",cancel:"لغو شود",saveApply:"ذخیره و اعمال شود",confirm:"تایید",confirm2:"با دقت تایید شود",save:"ذخیره",copyLink:"COPY LINK",helpManual:"Help & Manual",yes:"بله",no:"خیر",switchSite:"به سایت جایگزین بروید",addOutbound:"یک خروجی اضافه کنید"},register:{title:"Create an admin account first",messages:["Remember your admin account which is importantly used to login.","Account information is stored in local. We never send information to any server.","Once password was forgot, you could use v2raya --reset-password to reset."]},login:{title:"وارد شدن",username:"نام کاربری",password:"رمز عبور"},setting:{transparentProxy:"Transparent Proxy/System Proxy",transparentType:"Transparent Proxy/System Proxy Implementation",pacMode:"Traffic Splitting Mode of Rule Port",preventDnsSpoofing:"Prevent DNS Spoofing",specialMode:"حالت ویژه",mux:"Multiplex",autoUpdateSub:"Automatically Update Subscriptions",autoUpdateGfwlist:"Automatically Update GFWList",preferModeWhenUpdate:"Mode when Update Subscriptions and GFWList",ipForwardOn:"IP Forward",portSharingOn:"به اشتراک گذاری پورت",concurrency:"همزمانی",options:{global:"Do not Split Traffic",direct:"Direct",pac:"Depend on Rule Port",whitelistCn:"Proxy except CN Sites",gfwlist:"Proxy only GFWList",sameAsPacMode:"Traffic Splitting Mode is the Same as the Rule Port",customRouting:"Customized Routing",antiDnsHijack:"Prevent DNS Hijack Only (fast)",forwardDnsRequest:"Forward DNS Request",doh:"DoH(dns-over-https)",default:"Keep Default",on:"On",off:"Off",updateSubWhenStart:"Update Subscriptions When Service Starts",updateSubAtIntervals:"Update Subscriptions Regularly (Unit: hour)",updateGfwlistWhenStart:"Update GFWList When Service Starts",updateGfwlistAtIntervals:"Update GFWList Regularly (Unit: hour)",dependTransparentMode:"Follows Transparent Proxy/System Proxy",closed:"Off",advanced:"تنظیمات پیشرفته",leastPing:"Least Latency First"},messages:{gfwlist:"Based on modified time of file which sometimes is after latest version online.",transparentProxy:"If transparent proxy on, no extra configure needed and all TCP traffic will pass through the v2rayA. Providing proxy service to other computers and docker as the gateway should make option 'Share in LAN' on.",transparentType:"★tproxy: support UDP, but not support docker. ★redirect: friendly for docker, but does not support UDP and need to occupy local port 53 for dns anti-pollution.",pacMode:'Here you can set the splitting traffic rule of the rule port. By default, "Rule of Splitting Traffic" port is 20172 and HTTP protocol.',preventDnsSpoofing:"★Forward DNS Request: DNS requests will be forwarded by proxy server.★DoH(dns-over-https, v2ray-core: 4.22.0+): DNS over HTTPS.",specialMode:"★supervisor：Monitor dns pollution, intercept in advance, use the sniffing mechanism of v2ray-core to prevent pollution. ★fakedns：Use the fakens strategy to speed up the resolving.",tcpFastOpen:"Simplify TCP handshake process to speed up connection establishment. Risk of emphasizing characteristics of packets exists. It may cause failed to connect if your system does not support it.",mux:"Multiplexing TCP connections to reduce the number of handshake, but it will affect the use cases with high throughput, such as watching videos, downloading, and test speed. Risk of emphasizing characteristics of packets exists. Support vmess only now.",confirmEgressPorts:"<p>You are setting up transparent proxy across LANs, confirm egress port whitelist.</p>\n                          <p>Whitelist:</p>\n                          <p>TCP: {tcpPorts}</p>\n                          <p>UDP: {udpPorts}</p>",grpcShouldWithTls:"gRPC must be with TLS",ssPluginImpl:"★default: 'transport' for simple-obfs, 'chained' for v2ray-plugin.★chained: shadowsocks traffic will be redirect to standalone plugin.★transport: processed by the transport layer of v2ray/xray core directly."}},customAddressPort:{title:"آدرس و پورت ها",serviceAddress:"آدرس سرویس",portSocks5:"Port of SOCKS5",portHttp:"پورت HTTP",portSocks5WithPac:"Port of SOCKS5(with Rule)",portHttpWithPac:"Port of HTTP(with Rule)",portVmess:"Port of VMess(with Rule)",portVmessLink:"لینک پورت VMess",messages:["Service address default as 0.0.0.0:2017 can be changed by setting environment variable <code>V2RAYA_ADDRESS</code> and command argument<code>--address</code>.","If you start v2raya docker container with port mapping instead of <code>--network host</code>, you can remapping ports in this way.","We cannot judge port occupations in docker mode. Confirm it by yourself.","Zero means to close this port."]},customRouting:{title:"Customize Routing Rule",defaultRoutingRule:"Default Routing Rule",sameAsDefaultRule:"the same as default rule",appendRule:"Append Rule",direct:"Direct",proxy:"پروکسی",block:"Block",rule:"Rule",domainFile:"Domain File",typeRule:"Type of Rule",messages:{0:"v2rayA will recognize all SiteDat file in <b>{V2RayLocationAsset}</b>",1:'To make a SiteDat file by yourself: <a href="https://github.com/ToutyRater/V2Ray-SiteDAT">ToutyRater/V2Ray-SiteDAT</a>',2:"Multi-select is supported.",noSiteDatFileFound:"No siteDat file found in {V2RayLocationAsset}",emptyRuleNotPermitted:"Empty rule is not permitted"}},doh:{title:"Configure DoH Server",dohPriorityList:"Priority list of DoH Servers",messages:["DoH (DNS over HTTPS) can effectively avoid DNS pollution. But some native DoH providers may themselves be contaminated sometimes. In addition, some DoH services may be blocked by local network providers. Please choose the fastest and stablest DoH server.","Awesome public DoH servers in Mainland China include alidns, geekdns, rubyfish, etc","In taiwan area include quad101, etc","USA: cloudflare, dns.google, etc",'Checklist：<a href="https://dnscrypt.info/public-servers" target="_blank">public-servers</a>','Besides, setting up DoH service at your own native server is suggested and well-behaved in most cases <a href="https://github.com/facebookexperimental/doh-proxy" target="_blank">doh-proxy</a>. In this case, it is recommended to run the server(doh-proxy/doh-httpproxy) providing service and client(doh-stub) connecting to doh.opendns.com at the same time and connect them in series, because you can hardly find a server that is not polluted in a generally contaminated region.',"Optimally, place one or two lines above. The list will restore to default after saving with empty content."]},dns:{title:"Configure DNS Server",internalQueryServers:"Domain Query Servers",externalQueryServers:"External Domain Query Servers",messages:['"@:(dns.internalQueryServers)" are designed to be used to look up domain names in China, while "@:(dns.externalQueryServers)" be used to look up others.','"@:(dns.internalQueryServers)" will be used to look up all domain names if "@:(dns.externalQueryServers)" is empty.']},egressPortWhitelist:{title:"Egress Port Whitelist",tcpPortWhitelist:"TCP Port Whitelist",udpPortWhitelist:"UDP Port Whitelist",messages:["If v2rayA is setup on a server A which connected with a proxy server B, pay attention:","Transparent proxy will force all TCP and UDP traffic to pass through proxy server B, where source IP address will be replaced with proxy B's. Moreover, if some clients send requests to server A that provides service, they will received responses from your proxy B's IP address weirdly, which is illegal.","To resolve it, we need to add those service ports to whitelist so that not pass through proxy.For examples, ssh(22)、v2raya({v2rayaPort}).","Obviously, if the server does not provide any service, you can skip configuring.","Formatting：22 means port 22，20170:20172 means three ports 20170 to 20172."]},configureServer:{title:"Configure Server | Server",servername:"Servername",port:"Port",forceTLS:"forcibly TLS on",noObfuscation:"No obfuscation",httpObfuscation:"Obfuscated as HTTP",srtpObfuscation:"Obfuscated as Video Calls (SRTP)",utpObfuscation:"Obfuscated as Bittorrent (uTP)",wechatVideoObfuscation:"Obfuscated as Wechat Video Calls",dtlsObfuscation:"Obfuscated as DTLS1.2 Packets",wireguardObfuscation:"Obfuscated as WireGuard Packets",hostObfuscation:"هاست",pathObfuscation:"مسیر",seedObfuscation:"Seed",username:"نام کاربری",password:"رمز عبور",origin:"origin"},configureSubscription:{title:"Configure Subscription"},import:{message:"Input a server link or subscription address:",batchMessage:"One server link per line:",qrcodeError:"Failed to find a valid QRCode, please try again"},delete:{title:"Confirm to DELETE",message:"Be sure to <b>DELETE</b> those servers/subscriptions? It is not reversible."},latency:{message:"Latency tests used to cost one or several minutes. Wait patiently please."},version:{higherVersionNeeded:"This operation need higher version of v2rayA than {version}",v2rayInvalid:"geosite.dat, geoip.dat or v2ray-core may not be installed correctly",v2rayNotV5:"The version of v2ray-core is not v5. Use v5 or downgrade v2rayA to v1.5"},about:'<p>v2rayA is a web GUI client of V2Ray.</p>\n          <p class="about-small">Default ports:</p>\n          <p class="about-small">2017: v2rayA service port</p>\n          <p class="about-small">20170: SOCKS protocol</p>\n          <p class="about-small">20171: HTTP protocol</p>\n          <p class="about-small">20172: HTTP protocol with "Rule of Splitting Traffic"</p>\n          <p class="about-small">Other ports：</p>\n          <p class="about-small">32345: tproxy, needed by transparent proxy </p>\n          <p>All data is stored in local instead of in the cloud. </p>\n          <p>Problems found during use can be reported at <a href="https://github.com/v2rayA/v2rayA/issues">issues</a>.</p>\n          <p>Documentation: <a href="https://v2raya.org">https://v2raya.org</a></p>',axios:{messages:{optimizeBackend:"Adjust v2rayA service address？",noBackendFound:"Cannot find v2rayA at {url}. Make sure v2rayA is running at this address.",cannotCommunicate:["Cannot communicate. If your service is running and ports open correctly, the reason may be that current browser does not allow https sites to access http resources, you can try using Chrome or switching to alternate http site.","Cannot communicate. Firefox does not allow https sites to access http resources, you can try switching to alternate http sites."]},urls:{usage:"https://github.com/v2rayA/v2rayA/wiki/Usage"}},routingA:{messages:["click the button 'Help&Manual' for help"]},outbound:{addMessage:"لطفاً نام خروجی را که می خواهید اضافه کنید وارد کنید:",deleteMessage:'Be sure to <b>DELETE</b> the outbound "{outboundName}"? It is not reversible.'},log:{logModalTitle:"دیدن لاگ ها",refreshInterval:"Refresh Interval",seconds:"seconds"}},$={zh:k,en:_,fa:x};o.ZP.use(S.Z);let C="en",P=localStorage["_lang"];if(P)C=P;else for(let qt of window.navigator.languages)if(qt=qt.split("-")[0],qt in $){C=qt;break}const A=new S.Z({locale:C,messages:$,fallbackLocale:"en"});var T=A,R={i18n:T,name:"ModalLogin",props:{first:{type:Boolean,default:!1}},data:()=>({username:"",password:""}),mounted(){this.$refs.username.focus()},methods:{handleClickSubmit(){this.first?this.$axios({url:`${localStorage["backendAddress"]}/api/account`,method:"post",data:{username:this.username,password:this.password}}).then((e=>{v(e,this,(()=>{localStorage["token"]=e.data.data.token,this.$emit("close"),this.$remount()}))})):this.$axios({url:`${localStorage["backendAddress"]}/api/login`,method:"post",data:{username:this.username,password:this.password}}).then((e=>{v(e,this,(()=>{localStorage["token"]=e.data.data.token,this.$emit("close"),this.$remount()}))}))},handleEnter(){this.handleClickSubmit()}}},I=R,L=s(1001),M=(0,L.Z)(I,p,u,!1,null,"3bd9bd39",null),D=M.exports,O={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},U=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(" "+e._s(e.$t("customAddressPort.title"))+" ")])]),t("section",{staticClass:"modal-card-body"},[t("b-field",{attrs:{label:e.$t("customAddressPort.serviceAddress"),"label-position":"on-border"}},[t("b-input",{ref:"backendAddress",attrs:{placeholder:"http://localhost:2017",pattern:"https?://.+(:\\d+)?"},model:{value:e.table.backendAddress,callback:function(t){e.$set(e.table,"backendAddress",t)},expression:"table.backendAddress"}},[e._v(" > ")])],1),e.backendReady&&!1===e.dockerMode&&!e.addressChanged?[t("b-field",{attrs:{label:e.$t("customAddressPort.portSocks5"),"label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"20170",type:"number",min:"0",required:""},model:{value:e.table.socks5,callback:function(t){e.$set(e.table,"socks5",t)},expression:"table.socks5"}})],1),t("b-field",{attrs:{label:e.$t("customAddressPort.portHttp"),"label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"20171",type:"number",min:"0",required:""},model:{value:e.table.http,callback:function(t){e.$set(e.table,"http",t)},expression:"table.http"}})],1),t("b-field",{attrs:{label:e.$t("customAddressPort.portSocks5WithPac"),"label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"0",type:"number",min:"0",required:""},model:{value:e.table.socks5WithPac,callback:function(t){e.$set(e.table,"socks5WithPac",t)},expression:"table.socks5WithPac"}})],1),t("b-field",{attrs:{label:e.$t("customAddressPort.portHttpWithPac"),"label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"20172",type:"number",min:"0",required:""},model:{value:e.table.httpWithPac,callback:function(t){e.$set(e.table,"httpWithPac",t)},expression:"table.httpWithPac"}})],1),t("b-field",{attrs:{label:e.$t("customAddressPort.portVmess"),"label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"0",type:"number",min:"0",required:""},model:{value:e.table.vmess,callback:function(t){e.$set(e.table,"vmess",t)},expression:"table.vmess"}})],1),e.table.vmess>0&&e.table.vmessLink?t("b-message",{staticClass:"after-line-dot5",staticStyle:{"font-size":"13px"},attrs:{type:"is-info"}},[t("b-button",{attrs:{type:"is-link is-info is-outlined"},on:{click:e.handleClickShowVmessLink}},[e._v(" "+e._s(e.$t("customAddressPort.portVmessLink"))+" ")])],1):e._e(),t("b-message",{staticClass:"after-line-dot5",staticStyle:{"font-size":"13px"},attrs:{type:"is-info"}},[t("p",{directives:[{name:"show",rawName:"v-show",value:!e.dockerMode,expression:"!dockerMode"}],domProps:{innerHTML:e._s(e.$t("customAddressPort.messages.0"))}}),t("p",{directives:[{name:"show",rawName:"v-show",value:e.dockerMode,expression:"dockerMode"}],domProps:{innerHTML:e._s(e.$t("customAddressPort.messages.1"))}}),t("p",{directives:[{name:"show",rawName:"v-show",value:e.dockerMode,expression:"dockerMode"}],domProps:{innerHTML:e._s(e.$t("customAddressPort.messages.2"))}}),t("p",{domProps:{innerHTML:e._s(e.$t("customAddressPort.messages.3"))}})])]:e._e()],2),t("footer",{staticClass:"modal-card-foot flex-end"},[t("button",{staticClass:"button",on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.confirm"))+" ")])])])},N=[],V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"500px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title has-text-centered"},[e._v(e._s(e.title))])]),t("section",{staticClass:"modal-card-body lazy",staticStyle:{"text-align":"center"}},[e._m(0),t("div",{staticClass:"tags has-addons is-centered",staticStyle:{position:"relative"}},[t("span",{staticClass:"tag is-rounded is-dark sharingAddressTag",staticStyle:{position:"relative"},attrs:{"data-clipboard-text":e.sharingAddress}},[t("div",{staticClass:"tag-cover tag is-rounded",staticStyle:{display:"none"}}),t("span",{staticClass:"has-ellipsis",staticStyle:{"max-width":"10em"}},[e._v(" "+e._s(e.shortDesc)+" ")])]),t("div",{attrs:{id:"tag-cover-text"}},[e._v(e._s(e.$t("operations.copyLink")))]),t("span",{staticClass:"tag is-rounded is-primary sharingAddressTag",staticStyle:{position:"relative"},attrs:{"data-clipboard-text":e.sharingAddress}},[t("span",{staticClass:"has-ellipsis",staticStyle:{"max-width":"25em"}},[e._v(" "+e._s(e.sharingAddress)+" ")]),t("div",{staticClass:"tag-cover tag is-rounded",staticStyle:{display:"none"}})])])]),e._m(1)])},W=[function(){var e=this,t=e._self._c;return t("div",[t("canvas",{staticClass:"qrcode",attrs:{id:"canvas"}})])},function(){var e=this,t=e._self._c;return t("footer",{staticClass:"modal-card-foot",staticStyle:{"justify-content":"center"}},[t("a",{staticClass:"is-link",attrs:{href:"https://github.com/v2rayA/v2rayA",target:"_blank"}},[t("img",{staticClass:"leave-right",attrs:{src:"https://img.shields.io/github/stars/mzz2017/v2rayA.svg?style=social",alt:"stars"}}),t("img",{staticClass:"leave-right",attrs:{src:"https://img.shields.io/github/forks/mzz2017/v2rayA.svg?style=social",alt:"forks"}}),t("img",{staticClass:"leave-right",attrs:{src:"https://img.shields.io/github/watchers/mzz2017/v2rayA.svg?style=social",alt:"watchers"}})])])}],H=s(2592),j=s(1265),q=s(2152),F=s.n(q),E=s(9575),z={name:"ModalSharing",i18n:T,props:{title:{type:String,required:!0},sharingAddress:{type:String,required:!0},shortDesc:{type:String,required:!0},type:{type:String,required:!0}},beforeDestroy(){this.clipboard.destroy()},mounted(){document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1),this.clipboard=new(F())(".sharingAddressTag"),this.clipboard.on("success",(e=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",queue:!1}),e.clearSelection()})),this.clipboard.on("error",(e=>{this.$buefy.toast.open({message:this.$t("common.fail")+", error:"+e.toLocaleString(),type:"is-warning",position:"is-top",queue:!1})}));let e=this.sharingAddress;this._type===h.SubscriptionType&&(e="sub://"+E.Base64.encode(e));let t=document.getElementById("canvas");H.toCanvas(t,e,{errorCorrectionLevel:"H"},(function(e){e&&console.error(e)}));let s=document.querySelectorAll(".sharingAddressTag"),o=document.querySelectorAll(".tag-cover"),a=document.querySelector("#tag-cover-text"),n=()=>{o.forEach((e=>e.style.display="unset")),a.style.display="flex"},r=()=>{o.forEach((e=>e.style.display="none")),a.style.display="none"};s.forEach((e=>e.addEventListener("mouseenter",n))),s.forEach((e=>e.addEventListener("mouseleave",r)))},methods:{handleFileChange(e){const t=this,s=e.target.files[0];let o=document.querySelector("#QRCodeImport");if(o.outerHTML=o.outerHTML,this.$nextTick((()=>{document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1)})),!s.type.match(/image\/.*/))return void this.$buefy.toast.open({message:this.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1});const a=new FileReader;a.onload=function(e){const s=e.target.result,o=new j.h;o.scan(s).then((e=>{console.log(e),t.handleClickImportConfirm(e.data)})).catch((e=>{console.error(e),t.$buefy.toast.open({message:t.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1})}))},a.readAsDataURL(s)}}},B=z,G=(0,L.Z)(B,V,W,!1,null,"35348597",null),Z=G.exports,Q={name:"ModalCustomPorts",i18n:T,data:()=>({table:{backendAddress:"http://localhost:2017",socks5:"20170",http:"20171",socks5WithPac:"0",httpWithPac:"20172",vmess:"0",vmessLink:""},backendReady:!1}),computed:{dockerMode(){return"true"===window.localStorage["docker"]},addressChanged(){let e=this.table.backendAddress;return e.endsWith("/")&&(e=e.substr(0,e.length-1)),e+"/api"!==`${localStorage["backendAddress"]}/api`}},created(){this.table.backendAddress=localStorage["backendAddress"],this.$axios({url:`${localStorage["backendAddress"]}/api/ports`}).then((e=>{v(e,this,(()=>{this.backendReady=!0,Object.assign(this.table,e.data.data)}))}))},methods:{handleClickShowVmessLink(){this.table.vmessLink?(this.$parent.close(),this.$buefy.modal.open({width:500,component:Z,props:{title:this.$t("customAddressPort.portVmessLink"),sharingAddress:this.table.vmessLink,shortDesc:"VMess | v2rayA",type:h.ServerType}})):this.$buefy.toast.open({message:"no vmessLink found",type:"is-warning",position:"is-top",queue:!1,duration:5e3})},handleClickSubmit(){if(!this.$refs.backendAddress.checkHtml5Validity())return;let e=this.table.backendAddress;e.endsWith("/")&&(e=e.substr(0,e.length-1)),this.backendReady&&!this.addressChanged?this.$axios({url:e+"/api/ports",method:"put",data:{socks5:parseInt(this.table.socks5),http:parseInt(this.table.http),socks5WithPac:parseInt(this.table.socks5WithPac),httpWithPac:parseInt(this.table.httpWithPac),vmess:parseInt(this.table.vmess)}}).then((t=>{v(t,this,(()=>{t.data.data?.vmessLink&&this.$buefy.modal.open({width:500,component:Z,props:{title:this.$t("customAddressPort.portVmessLink"),sharingAddress:t.data.data.vmessLink,shortDesc:"VMess | v2rayA",type:h.ServerType}}),localStorage["backendAddress"]=e,this.$emit("close")}))})):this.$axios({url:e+"/api/version"}).then((()=>{localStorage["backendAddress"]=e,this.$emit("close"),this.$remount()}))}}},K=Q,Y=(0,L.Z)(K,U,N,!1,null,null,null),J=Y.exports,X=s(3416);o.ZP.prototype.$axios=i(),i().defaults.timeout=6e4,i().interceptors.request.use((e=>(localStorage.hasOwnProperty("token")&&(e.headers.Authorization=`${localStorage["token"]}`,e.headers["X-V2raya-Request-Id"]=(0,X.x0)()),e)),(e=>(console.log("!",e.name,e.message),l.V.open({message:e.message,type:"is-warning",position:"is-top",duration:5e3}),Promise.reject(e))));let ee="";function te(e=localStorage["backendAddress"]){ee!==e&&(ee=e,c.GU.open({message:T.t("axios.messages.optimizeBackend"),type:"is-primary",queue:!1,duration:1e4,position:"is-top",actionText:T.t("operations.yes"),onAction:()=>{d.NK.open({component:J,hasModalCard:!0,customClass:"modal-custom-ports"})}}),c.GU.open({message:T.t("axios.messages.noBackendFound",{url:e}),type:"is-warning",queue:!1,position:"is-top",duration:1e4,actionText:T.t("operations.helpManual"),onAction:()=>{window.open(T.t("axios.urls.usage"),"_blank")}}))}i().interceptors.response.use((function(e){return e}),(function(e){if(console.log("!!",e.name,e.message),console.log(Object.assign({},e)),"ECONNABORTED"===e.code&&e.isAxiosError)return Promise.reject(e);let t,s;if(e.config&&(t=g(e.config.url),s=t.host),e.response&&401===e.response.status)new o.ZP({components:{Modal:d.ZP,ModalLogin:D},data:()=>({show:!0}),render(){const t=arguments[0];let s=e.response.data&&e.response.data.data&&!0===e.response.data.data.first;return t("b-modal",{attrs:{active:this.show,"trap-focus":!0,"has-modal-card":!0,"aria-role":"dialog","aria-modal":!0,"full-screen":!1,id:"login"},style:"z-index:1000",class:"modal-login"},[t(D,{attrs:{first:s},on:{close:()=>{this.show=!1}}})])}}).$mount("#login");else if("https"===location.protocol.substr(0,5)&&"http"===t.protocol){let e=T.t("axios.messages.cannotCommunicate.0");if("localhost"===s||"local"===s||"127.0.0.1"===s){if(O.versions.webKit)return void te(t.source.replace(t.relative,""));O.versions.gecko&&(e=T.t("axios.messages.cannotCommunicate.1"))}c.GU.open({message:e,type:"is-warning",position:"is-top",queue:!1,duration:1e4,actionText:T.t("operations.switchSite"),onAction:()=>{window.open("http://v.v2raya.org","_self")}}),c.GU.open({message:T.t("axios.messages.optimizeBackend"),type:"is-primary",queue:!1,duration:1e4,position:"is-top",actionText:T.t("operations.yes"),onAction:()=>{d.NK.open({component:J,hasModalCard:!0,customClass:"modal-custom-ports"})}})}else if(e.message&&"Network Error"===e.message||e.config&&"/api/version"===e.config.url)te(t.source.replace(t.relative,""));else{if(!e.message||e.message&&e.message.indexOf("404")>=0||e.response&&404===e.response.status)return Promise.reject(e);console.log("!other"),l.V.open({message:e,type:"is-warning",position:"is-top",queue:!1,duration:5e3})}return Promise.reject(e)}));var se=i(),oe=(s(5904),s(629));o.ZP.use(oe.ZP);var ae=new oe.ZP.Store({state:{nav:"",running:T.t("common.checkRunning"),connectedServer:{}},mutations:{NAV(e,t){e.nav=t},RUNNING(e,t){e.running=t},CONNECTED_SERVER(e,t){e.connectedServer=t}},actions:{},modules:{}}),ne=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("b-navbar",{ref:"navs",attrs:{"fixed-top":"",shadow:"",type:"is-light"}},[t("template",{slot:"brand"},[t("b-navbar-item",{attrs:{href:"/"}},[t("img",{staticClass:"logo no-select",attrs:{src:s(1823),alt:"v2rayA"}})]),t("b-navbar-item",{attrs:{tag:"div"}},[t("b-tag",{staticClass:"pointerTag",attrs:{id:"statusTag",type:e.statusMap[e.runningState.running]},nativeOn:{mouseenter:function(t){return e.handleOnStatusMouseEnter.apply(null,arguments)},mouseleave:function(t){return e.handleOnStatusMouseLeave.apply(null,arguments)},click:function(t){return e.handleClickStatus.apply(null,arguments)}}},[e._v(e._s(e.coverStatusText?e.coverStatusText:e.runningState.running)+" ")])],1),t("b-navbar-item",{attrs:{tag:"div"}},[e.updateOutboundDropdown?t("b-dropdown",{attrs:{triggers:e.isMobile?["click"]:["click","hover"],"aria-role":"list","close-on-click":!1},on:{"active-change":e.handleOutboundDropdownActiveChange},nativeOn:{mouseenter:function(t){return e.handleOutboundDropdownActiveChange.apply(null,arguments)}},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("b-tag",{staticClass:"pointerTag",attrs:{type:"is-info","icon-right":"menu-down"}},[e._v(e._s(e.outboundName.toUpperCase())+" ")])]},proxy:!0}],null,!1,1647434248)},[e._l(e.outbounds,(function(s){return t("b-dropdown-item",{key:s,staticClass:"is-flex padding-right-1rem justify-content-space-between outbound-dropdown",attrs:{"aria-role":"listitem"},on:{click:function(t){e.outboundName=s}},nativeOn:{mouseenter:function(t){return e.handleOnOutboundMouseEnter(s)},mouseleave:function(t){return e.handleOnOutboundMouseLeave.apply(null,arguments)}}},[t("p",{staticClass:"is-relative is-fullwidth"},[t("span",[e._v(e._s(e.outboundNameDecorator(s)))]),t("span",[t("i",{directives:[{name:"show",rawName:"v-show",value:e.isMobile||e.outboundDropdownHover[s],expression:"isMobile || outboundDropdownHover[outbound]"}],staticClass:"iconfont icon-setting outbound-setting",on:{click:function(t){return e.handleClickOutboundSetting(t,s)}}})])])])})),t("b-dropdown-item",{staticClass:"is-flex padding-right-1rem",attrs:{"aria-role":"listitem",separator:""}}),t("b-dropdown-item",{staticClass:"is-flex padding-right-1rem",attrs:{"aria-role":"listitem"},on:{click:e.handleAddOutbound}},[e._v(e._s(e.$t("operations.addOutbound"))+" ")])],2):e._e()],1)],1),t("template",{slot:"start"}),t("template",{slot:"end"},[t("b-navbar-item",{attrs:{tag:"a"},nativeOn:{click:function(t){return e.handleClickSetting.apply(null,arguments)}}},[t("i",{staticClass:"iconfont icon-setting",staticStyle:{"font-size":"1.25em"}}),e._v(" "+e._s(e.$t("common.setting"))+" ")]),t("b-navbar-item",{attrs:{tag:"a"},nativeOn:{click:function(t){return e.handleClickAbout.apply(null,arguments)}}},[t("i",{staticClass:"iconfont icon-heart",staticStyle:{"font-size":"1.25em"}}),e._v(" "+e._s(e.$t("common.about"))+" ")]),t("b-navbar-item",{attrs:{tag:"a"},nativeOn:{click:function(t){return e.handleClickLogs.apply(null,arguments)}}},[t("i",{staticClass:"iconfont icon-info",staticStyle:{"font-size":"1.25em"}}),e._v(" "+e._s(e.$t("common.log"))+" ")]),t("b-dropdown",{staticClass:"menudropdown",staticStyle:{"margin-right":"10px"},attrs:{position:"is-bottom-left","aria-role":"menu"}},[t("a",{staticClass:"navbar-item",attrs:{slot:"trigger",role:"button"},slot:"trigger"},[t("span",{staticClass:"no-select"},[e._v(e._s(e.username))]),t("i",{staticClass:"iconfont icon-caret-down",staticStyle:{position:"relative",top:"1px",left:"2px"}})]),t("b-dropdown-item",{attrs:{custom:"","aria-role":"menuitem"},domProps:{innerHTML:e._s(e.$t("common.loggedAs",{username:e.username}))}}),t("b-dropdown-item",{staticClass:"is-flex",staticStyle:{"box-sizing":"content-box",height:"16px",width:"60px","justify-content":"space-between"},attrs:{custom:"","aria-role":"menuitem"}},e._l(e.langs,(function(o){return t("img",{key:o.flag,staticStyle:{height:"100%","flex-shrink":"0",cursor:"pointer"},attrs:{src:s(5640)(`./flag_${o.flag}.svg`),alt:o.alt},on:{click:function(t){return e.handleClickLang(o.flag)}}})})),0),t("hr",{staticClass:"dropdown-divider"}),t("b-dropdown-item",{staticClass:"no-select",attrs:{value:"logout","aria-role":"menuitem"},on:{click:e.handleClickLogout}},[t("i",{staticClass:"iconfont icon-logout",staticStyle:{position:"relative",top:"1px"}}),e._v(" "+e._s(e.$t("operations.logout"))+" ")])],1)],1)],2),t("node",{attrs:{outbound:e.outboundName,observatory:e.observatory},model:{value:e.runningState,callback:function(t){e.runningState=t},expression:"runningState"}}),t("b-modal",{staticClass:"modal-custom-ports",attrs:{active:e.showCustomPorts,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.showCustomPorts=t}}},[t("ModalCustomAddress",{on:{close:function(t){e.showCustomPorts=!1}}})],1),t("div",{attrs:{id:"login"}})],1)},re=[],ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card modal-setting",staticStyle:{"max-width":"800px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("common.setting")))])]),t("section",{staticClass:"modal-card-body rules"},[t("b-field",{staticStyle:{position:"relative"},attrs:{label:"GFWList",horizontal:"","custom-class":"modal-setting-label"}},[t("span",[e._v(e._s(e.$t("common.latest"))+":")]),t("a",{staticClass:"is-link",attrs:{href:"https://github.com/v2rayA/dist-v2ray-rules-dat/releases",target:"_blank"}},[e._v(e._s(e.remoteGFWListVersion))]),t("span",[e._v(e._s(e.$t("common.local"))+":")]),e.dayjs(e.localGFWListVersion).isAfter(e.dayjs(e.remoteGFWListVersion))?t("b-tooltip",{attrs:{label:e.$t("setting.messages.gfwlist"),position:"is-bottom",type:"is-danger",dashed:"",multilined:"",animated:""}},[e._v(" "+e._s(e.localGFWListVersion?e.localGFWListVersion:e.$t("none"))+" ")]):t("span",[e._v(e._s(e.localGFWListVersion?e.localGFWListVersion:e.$t("none")))]),t("b-button",{staticStyle:{position:"relative",top:"-2px","text-decoration":"none","font-weight":"bold"},attrs:{size:"is-small",type:"is-text"},on:{click:e.handleClickUpdateGFWList}},[e._v(e._s(e.$t("operations.update"))+" ")])],1),t("hr",{staticClass:"dropdown-divider",staticStyle:{margin:"1.25rem 0 1.25rem"}}),t("b-field",{staticClass:"with-icon-alert",attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" "+e._s(e.$t("setting.transparentProxy"))+" "),t("b-tooltip",{attrs:{type:"is-dark",label:e.$t("setting.messages.transparentProxy"),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{attrs:{expanded:""},model:{value:e.transparent,callback:function(t){e.transparent=t},expression:"transparent"}},[t("option",{attrs:{value:"close"}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"proxy"}},[e._v(" "+e._s(e.$t("setting.options.on"))+": "+e._s(e.$t("setting.options.global"))+" ")]),t("option",{attrs:{value:"whitelist"}},[e._v(" "+e._s(e.$t("setting.options.on"))+": "+e._s(e.$t("setting.options.whitelistCn"))+" ")]),t("option",{attrs:{value:"gfwlist"}},[e._v(" "+e._s(e.$t("setting.options.on"))+": "+e._s(e.$t("setting.options.gfwlist"))+" ")]),t("option",{attrs:{value:"pac"}},[e._v(" "+e._s(e.$t("setting.options.on"))+": "+e._s(e.$t("setting.options.sameAsPacMode"))+" ")])]),t("b-checkbox-button",{directives:[{name:"show",rawName:"v-show",value:!e.lite,expression:"!lite"}],staticStyle:{position:"relative",left:"-1px"},attrs:{"native-value":!0},model:{value:e.ipforward,callback:function(t){e.ipforward=t},expression:"ipforward"}},[e._v(e._s(e.$t("setting.ipForwardOn"))+" ")]),t("b-checkbox-button",{staticStyle:{position:"relative",left:"-1px"},attrs:{"native-value":!0},model:{value:e.portSharing,callback:function(t){e.portSharing=t},expression:"portSharing"}},[e._v(e._s(e.$t("setting.portSharingOn"))+" ")])],2),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"close"!==e.transparent,expression:"transparent !== 'close'"}],attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" "+e._s(e.$t("setting.transparentType"))+" "),t("b-tooltip",{attrs:{type:"is-dark",multilined:"",label:e.$t("setting.messages.transparentType"),position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{staticClass:"left-border",attrs:{expanded:""},model:{value:e.transparentType,callback:function(t){e.transparentType=t},expression:"transparentType"}},[t("option",{directives:[{name:"show",rawName:"v-show",value:!e.lite,expression:"!lite"}],attrs:{value:"redirect"}},[e._v("redirect")]),t("option",{directives:[{name:"show",rawName:"v-show",value:!e.lite,expression:"!lite"}],attrs:{value:"tproxy"}},[e._v("tproxy")]),t("option",{attrs:{value:"system_proxy"}},[e._v("system proxy")])])],2),t("b-field",{attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" "+e._s(e.$t("setting.pacMode"))+" "),t("b-tooltip",{attrs:{type:"is-dark",label:e.$t("setting.messages.pacMode"),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{staticStyle:{"flex-shrink":"0"},attrs:{expanded:""},model:{value:e.pacMode,callback:function(t){e.pacMode=t},expression:"pacMode"}},[t("option",{attrs:{value:"whitelist"}},[e._v(" "+e._s(e.$t("setting.options.whitelistCn"))+" ")]),t("option",{attrs:{value:"gfwlist"}},[e._v(e._s(e.$t("setting.options.gfwlist")))]),t("option",{attrs:{value:"routingA"}},[e._v("RoutingA")])]),"custom"===e.pacMode?[t("b-button",{staticStyle:{"margin-left":"0","border-bottom-left-radius":"0","border-top-left-radius":"0",color:"rgba(0, 0, 0, 0.75)"},attrs:{type:"is-primary",outlined:""},on:{click:e.handleClickConfigurePac}},[e._v(e._s(e.$t("operations.configure"))+" ")])]:e._e(),"routingA"===e.pacMode?[t("b-button",{staticStyle:{"margin-left":"0","border-bottom-left-radius":"0","border-top-left-radius":"0",color:"rgba(0, 0, 0, 0.75)"},attrs:{outlined:""},on:{click:e.handleClickConfigureRoutingA}},[e._v(e._s(e.$t("operations.configure"))+" ")])]:e._e(),t("p")],2),t("b-field",{attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" "+e._s(e.$t("setting.preventDnsSpoofing"))+" "),t("b-tooltip",{attrs:{type:"is-dark",label:e.$t("setting.messages.preventDnsSpoofing"),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{staticClass:"left-border",attrs:{expanded:""},model:{value:e.antipollution,callback:function(t){e.antipollution=t},expression:"antipollution"}},[t("option",{attrs:{value:"closed"}},[e._v(e._s(e.$t("setting.options.closed")))]),t("option",{attrs:{value:"none"}},[e._v(" "+e._s(e.$t("setting.options.antiDnsHijack"))+" ")]),t("option",{attrs:{value:"dnsforward"}},[e._v(" "+e._s(e.$t("setting.options.forwardDnsRequest"))+" ")]),t("option",{attrs:{value:"doh"}},[e._v(e._s(e.$t("setting.options.doh")))]),t("option",{attrs:{value:"advanced"}},[e._v(e._s(e.$t("setting.options.advanced")))])]),"advanced"===e.antipollution?t("b-button",{class:{"right-extra-button":"closed"===e.antipollution,"no-border-radius":"closed"!==e.antipollution},on:{click:e.handleClickDnsSetting}},[e._v(" "+e._s(e.$t("operations.configure"))+" ")]):e._e(),t("p")],2),t("b-field",{directives:[{name:"show",rawName:"v-show",value:e.showSpecialMode,expression:"showSpecialMode"}],attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" "+e._s(e.$t("setting.specialMode"))+" "),t("b-tooltip",{attrs:{type:"is-dark",multilined:"",label:e.$t("setting.messages.specialMode"),position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{staticClass:"left-border",attrs:{expanded:""},model:{value:e.specialMode,callback:function(t){e.specialMode=t},expression:"specialMode"}},[t("option",{attrs:{value:"none"}},[e._v(e._s(e.$t("setting.options.closed")))]),t("option",{attrs:{value:"supervisor"}},[e._v("supervisor")]),t("option",{directives:[{name:"show",rawName:"v-show",value:"closed"!==e.antipollution,expression:"antipollution !== 'closed'"}],attrs:{value:"fakedns"}},[e._v(" fakedns ")])])],2),t("b-field",{attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" TCPFastOpen "),t("b-tooltip",{attrs:{type:"is-dark",label:e.$t("setting.messages.tcpFastOpen"),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{attrs:{expanded:""},model:{value:e.tcpFastOpen,callback:function(t){e.tcpFastOpen=t},expression:"tcpFastOpen"}},[t("option",{attrs:{value:"default"}},[e._v(e._s(e.$t("setting.options.default")))]),t("option",{attrs:{value:"yes"}},[e._v(e._s(e.$t("setting.options.on")))]),t("option",{attrs:{value:"no"}},[e._v(e._s(e.$t("setting.options.off")))])])],2),t("b-field",{staticClass:"with-icon-alert",attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" "+e._s(e.$t("setting.mux"))+" "),t("b-tooltip",{attrs:{type:"is-dark",label:e.$t("setting.messages.mux"),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{staticStyle:{flex:"1"},attrs:{expanded:""},model:{value:e.muxOn,callback:function(t){e.muxOn=t},expression:"muxOn"}},[t("option",{attrs:{value:"no"}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"yes"}},[e._v(e._s(e.$t("setting.options.on")))])]),"yes"===e.muxOn?t("cus-b-input",{ref:"muxinput",staticStyle:{flex:"1"},attrs:{placeholder:e.$t("setting.concurrency"),"custom-class":"no-shadow",type:"number",min:"1",max:"1024","validation-icon":" iconfont icon-alert"},model:{value:e.mux,callback:function(t){e.mux=t},expression:"mux"}}):e._e()],2),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"gfwlist"===e.pacMode||"gfwlist"===e.transparent,expression:"pacMode === 'gfwlist' || transparent === 'gfwlist'"}],attrs:{label:e.$t("setting.autoUpdateGfwlist"),"label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.pacAutoUpdateMode,callback:function(t){e.pacAutoUpdateMode=t},expression:"pacAutoUpdateMode"}},[t("option",{attrs:{value:"none"}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"auto_update"}},[e._v(" "+e._s(e.$t("setting.options.updateGfwlistWhenStart"))+" ")]),t("option",{attrs:{value:"auto_update_at_intervals"}},[e._v(" "+e._s(e.$t("setting.options.updateGfwlistAtIntervals"))+" ")])]),"auto_update_at_intervals"===e.pacAutoUpdateMode?t("cus-b-input",{ref:"autoUpdatePacInput",staticStyle:{flex:"1"},attrs:{"custom-class":"no-shadow",type:"number",min:"1","validation-icon":" iconfont icon-alert"},model:{value:e.pacAutoUpdateIntervalHour,callback:function(t){e.pacAutoUpdateIntervalHour=t},expression:"pacAutoUpdateIntervalHour"}}):e._e()],1),t("b-field",{attrs:{label:e.$t("setting.autoUpdateSub"),"label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.subscriptionAutoUpdateMode,callback:function(t){e.subscriptionAutoUpdateMode=t},expression:"subscriptionAutoUpdateMode"}},[t("option",{attrs:{value:"none"}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"auto_update"}},[e._v(" "+e._s(e.$t("setting.options.updateSubWhenStart"))+" ")]),t("option",{attrs:{value:"auto_update_at_intervals"}},[e._v(" "+e._s(e.$t("setting.options.updateSubAtIntervals"))+" ")])]),"auto_update_at_intervals"===e.subscriptionAutoUpdateMode?t("cus-b-input",{ref:"autoUpdateSubInput",staticStyle:{flex:"1"},attrs:{"custom-class":"no-shadow",type:"number",min:"1","validation-icon":" iconfont icon-alert"},model:{value:e.subscriptionAutoUpdateIntervalHour,callback:function(t){e.subscriptionAutoUpdateIntervalHour=t},expression:"subscriptionAutoUpdateIntervalHour"}}):e._e()],1),t("b-field",{attrs:{label:e.$t("setting.preferModeWhenUpdate"),"label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.proxyModeWhenSubscribe,callback:function(t){e.proxyModeWhenSubscribe=t},expression:"proxyModeWhenSubscribe"}},[t("option",{attrs:{value:"direct"}},[e._v(" "+e._s("close"===e.transparent||e.lite?e.$t("setting.options.direct"):e.$t("setting.options.dependTransparentMode"))+" ")]),t("option",{attrs:{value:"proxy"}},[e._v(e._s(e.$t("setting.options.global")))]),t("option",{attrs:{value:"pac"}},[e._v(e._s(e.$t("setting.options.pac")))])])],1)],1),t("footer",{staticClass:"modal-card-foot flex-end"},[t("button",{staticClass:"button footer-absolute-left",attrs:{type:"button"},on:{click:function(t){return e.$emit("clickPorts")}}},[e._v(" "+e._s(e.$t("customAddressPort.title"))+" ")]),t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.saveApply"))+" ")])])])},le=[],ce=s(7484),de=s.n(ce),pe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card modal-configure-pac",staticStyle:{"max-width":"550px",height:"700px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("customRouting.title")))])]),t("section",{staticClass:"modal-card-body rules"},[t("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-info"}},[t("p",{domProps:{innerHTML:e._s(e.$t("customRouting.messages.0",{V2RayLocationAsset:e.V2RayLocationAsset}))}}),t("p",{domProps:{innerHTML:e._s(e.$t("customRouting.messages.1",{V2RayLocationAsset:e.V2RayLocationAsset}))}})]),t("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-success"}},[t("p",[e._v(e._s(e.$t("customRouting.messages.2")))])]),t("b-collapse",{staticClass:"card",scopedSlots:e._u([{key:"trigger",fn:function(s){return t("div",{staticClass:"card-header",attrs:{role:"button"}},[t("p",{staticClass:"card-header-title"},[e._v(" "+e._s(e.$t("customRouting.defaultRoutingRule"))+" ")]),t("a",{staticClass:"card-header-icon"},[t("b-icon",{attrs:{icon:s.open?"menu-down":"menu-up"}})],1)])}}])},[t("div",{staticClass:"card-content"},[t("b-field",{attrs:{label:e.$t("customRouting.defaultRoutingRule"),"label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.customPac.defaultProxyMode,callback:function(t){e.$set(e.customPac,"defaultProxyMode",t)},expression:"customPac.defaultProxyMode"}},[t("option",{attrs:{value:"direct"}},[e._v(e._s(e.$t("customRouting.direct")))]),t("option",{attrs:{value:"proxy"}},[e._v(e._s(e.$t("customRouting.proxy")))]),t("option",{attrs:{value:"block"}},[e._v(e._s(e.$t("customRouting.block")))])])],1)],1)]),e._l(e.customPac.routingRules,(function(s,o){return t("b-collapse",{key:s.value,staticClass:"card",scopedSlots:e._u([{key:"trigger",fn:function(s){return t("div",{staticClass:"card-header",attrs:{role:"button"}},[t("p",{staticClass:"card-header-title",staticStyle:{position:"relative"}},[t("span",[e._v(e._s(`${e.$t("customRouting.rule")}${o+1}`))]),t("b-button",{staticStyle:{position:"absolute",right:"0"},attrs:{type:"is-text",size:"is-small"},on:{click:function(t){return e.handleClickDeleteRule(...arguments,o)}}},[e._v(e._s(e.$t("operations.delete")))])],1),t("a",{staticClass:"card-header-icon"},[t("b-icon",{attrs:{icon:s.open?" iconfont icon-caret-down":" iconfont icon-caret-up"}})],1)])}}],null,!0)},[t("div",{staticClass:"card-content"},[t("b-field",{attrs:{label:e.$t("customRouting.domainFile"),"label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:s.filename,callback:function(t){e.$set(s,"filename",t)},expression:"rule.filename"}},e._l(e.siteDatFiles,(function(s){return t("option",{key:s.filename,domProps:{value:s.filename}},[e._v(" "+e._s(s.filename)+" ")])})),0)],1),t("b-field",{attrs:{label:"Tags","label-position":"on-border"}},[t("b-select",{attrs:{multiple:"","native-size":e.siteDatFiles[s.filename].tags.length>16?16:e.siteDatFiles[s.filename].tags.length,size:"is-small",expanded:""},model:{value:s.tags,callback:function(t){e.$set(s,"tags",t)},expression:"rule.tags"}},e._l(e.siteDatFiles[s.filename].tags,(function(s){return t("option",{key:s,domProps:{value:s}},[e._v(" "+e._s(s)+" ")])})),0)],1),t("p",{staticClass:"content",staticStyle:{"font-size":"0.8em","margin-left":"0.5em"}},[e._v(" tags: "+e._s(s.tags)+" ")]),t("b-field",{attrs:{label:e.$t("customRouting.typeRule"),"label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:s.ruleType,callback:function(t){e.$set(s,"ruleType",t)},expression:"rule.ruleType"}},[t("option",{attrs:{value:"direct"}},[e._v(" "+e._s(e.$t("customRouting.direct")+("direct"===e.customPac.defaultProxyMode?`(${e.$t("customRouting.sameAsDefaultRule")})`:""))+" ")]),t("option",{attrs:{value:"proxy"}},[e._v(" "+e._s(e.$t("customRouting.proxy")+("proxy"===e.customPac.defaultProxyMode?`(${e.$t("customRouting.sameAsDefaultRule")})`:""))+" ")]),t("option",{attrs:{value:"block"}},[e._v(" "+e._s(e.$t("customRouting.block")+("block"===e.customPac.defaultProxyMode?`(${e.$t("customRouting.sameAsDefaultRule")})`:""))+" ")])])],1)],1)])}))],2),t("footer",{staticClass:"modal-card-foot"},[t("div",{staticStyle:{position:"relative",display:"flex","justify-content":"flex-end",width:"100%"}},[t("button",{staticClass:"button btn-new",attrs:{type:"button"},on:{click:e.handleNew}},[e._v(" "+e._s(e.$t("customRouting.appendRule"))+" ")]),t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.save"))+" ")])])])])},ue=[],he={name:"ModalCustomRouting",data:()=>({customPac:{defaultProxyMode:"",routingRules:[]},siteDatFiles:[],firstSiteDatFilename:"",V2RayLocationAsset:""}),mounted(){(async()=>{let e=this.customPac;await this.$axios({url:`${localStorage["backendAddress"]}/api/customPac`}).then((t=>{v(t,this,(()=>{e=t.data.data.customPac,this.V2RayLocationAsset=t.data.data.V2RayLocationAsset}))}));let t=!1;await this.$axios({url:`${localStorage["backendAddress"]}/api/siteDatFiles`}).then((e=>{v(e,this,(()=>{e.data.data.siteDatFiles&&e.data.data.siteDatFiles.length>0?(this.siteDatFiles={},e.data.data.siteDatFiles.forEach((e=>{this.siteDatFiles[e.filename]=e,e.tags.sort()})),this.firstSiteDatFilename=e.data.data.siteDatFiles[0].filename):(this.$buefy.toast.open({message:this.$t("customRouting.messages.noSiteDatFileFound",{V2RayLocationAsset:this.V2RayLocationAsset}),type:"is-warning",position:"is-top",queue:!1,duration:5e3}),t=!0)}))})),this.customPac=e,t&&this.$parent.close()})()},methods:{handleNew(){this.customPac.routingRules.push({filename:this.firstSiteDatFilename,tags:[],matchType:"domain",ruleType:"direct"===this.customPac.defaultProxyMode?"proxy":"direct"});let e=document.querySelector(".modal-configure-pac .rules");this.$nextTick((()=>{e.scrollTop=e.scrollHeight-e.clientHeight}))},handleClickDeleteRule(e,t){e.stopImmediatePropagation(),this.customPac.routingRules.splice(t,1)},handleClickSubmit(){this.customPac.routingRules.some((e=>e.tags.length<=0))?this.$buefy.toast.open({message:this.$t("customRouting.messages.emptyRuleNotPermitted"),type:"is-warning",position:"is-top",queue:!1,duration:3e3}):this.$axios({url:`${localStorage["backendAddress"]}/api/customPac`,method:"put",data:{customPac:this.customPac}}).then((e=>{v(e,this,(()=>{this.$parent.close()}))}))}}},me=he,be=(0,L.Z)(me,pe,ue,!1,null,"e8f8ad4e",null),fe=be.exports,ve=function(){var e=this,t=e._self._c;return t("div",{ref:"modal",staticClass:"modal-card modal-routinga",staticStyle:{width:"100%",height:"2000px",margin:"auto"}},[e._m(0),t("section",{staticClass:"modal-card-body rules"},[t("b-input",{staticClass:"full-min-height",attrs:{type:"textarea","custom-class":"full-min-height horizon-scroll code-font",placeholder:e.$t("routingA.messages.0"),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},model:{value:e.routingA,callback:function(t){e.routingA=t},expression:"routingA"}})],1),t("footer",{staticClass:"modal-card-foot"},[t("div",{staticStyle:{position:"relative",display:"flex","justify-content":"flex-end",width:"100%"}},[t("button",{staticClass:"button btn-left",on:{click:e.handleClickManual}},[e._v(" "+e._s(e.$t("operations.helpManual"))+" ")]),t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.save"))+" ")])])])])},ge=[function(){var e=this,t=e._self._c;return t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v("RoutingA")])])}],ye={name:"ModalCustomRoutingA",data:()=>({routingA:""}),mounted(){this.$axios({url:`${localStorage["backendAddress"]}/api/routingA`}).then((e=>{v(e,this,(()=>{this.routingA=e.data.data.routingA}),(()=>{this.$parent.close()}))})).catch((()=>{this.$parent.close()})),this.initRoutingAAnimationContentStyle()},methods:{initRoutingAAnimationContentStyle(){let e=this.$refs.modal;while(e&&!/\banimation-content\b/.test(e.className))e=e.parentElement;e&&(e.className=e.className.replace("animation-content","routinga-animation-content"))},handleClickManual(){window.open("https://github.com/v2rayA/v2rayA/wiki/RoutingA","_blank")},handleClickSubmit(){this.$axios({url:`${localStorage["backendAddress"]}/api/routingA`,method:"put",data:{routingA:this.routingA}}).then((e=>{v(e,this,(()=>{this.$parent.close()}))}))}}},we=ye,Se=(0,L.Z)(we,ve,ge,!1,null,"999c7226",null),ke=Se.exports,_e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"control",class:e.rootClasses},["textarea"!==e.type?t("input",e._b({ref:"input",staticClass:"input",class:[e.inputClasses,e.customClass],attrs:{type:e.newType,autocomplete:e.newAutocomplete,maxlength:e.maxlength},domProps:{value:e.computedValue},on:{input:e.onInput,blur:e.onBlur,focus:e.onFocus}},"input",e.$attrs,!1)):t("textarea",e._b({ref:"textarea",staticClass:"textarea",class:[e.inputClasses,e.customClass],attrs:{maxlength:e.maxlength},domProps:{value:e.computedValue},on:{input:e.onInput,blur:e.onBlur,focus:e.onFocus}},"textarea",e.$attrs,!1)),e.icon?t("b-icon",{staticClass:"is-left",attrs:{icon:e.icon,pack:e.iconPack,size:e.iconSize}}):e._e(),e.loading||!e.passwordReveal&&!e.statusTypeIcon?e._e():t("b-icon",{staticClass:"is-right",class:{"is-clickable":e.passwordReveal},attrs:{icon:e.passwordReveal?e.passwordVisibleIcon:e.statusTypeIcon,pack:e.iconPack,size:e.iconSize,type:e.passwordReveal?"is-primary":e.statusType,both:""},nativeOn:{click:function(t){return e.togglePasswordVisibility.apply(null,arguments)}}}),e.maxlength&&e.hasCounter&&"number"!==e.type?t("small",{staticClass:"help counter",class:{"is-invisible":!e.isFocused}},[e._v(" "+e._s(e.valueLength)+" / "+e._s(e.maxlength)+" ")]):e._e()],1)},xe=[],$e=s(5926),Ce=s(6805),Pe=s(9753),Ae={name:"CusBInput",components:{[$e.Z.name]:$e.Z},mixins:[Pe.Z],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},passwordReveal:Boolean,hasCounter:{type:Boolean,default:()=>Ce.ZP.defaultInputHasCounter},customClass:{type:String,default:""}},data(){return{newValue:this.value,newType:this.type,newAutocomplete:this.autocomplete||Ce.ZP.defaultInputAutocomplete,isPasswordVisible:!1,_elementRef:"textarea"===this.type?"textarea":"input"}},computed:{computedValue:{get(){return this.newValue},set(e){this.newValue=e,this.$emit("input",e),!this.isValid&&this.checkHtml5Validity()}},rootClasses(){return[this.iconPosition,this.size,{"is-expanded":this.expanded,"is-loading":this.loading,"is-clearfix":!this.hasMessage}]},inputClasses(){return[this.statusType,this.size,{"is-rounded":this.rounded}]},hasIconRight(){return this.passwordReveal||this.loading||this.statusTypeIcon},iconPosition(){return this.icon&&this.hasIconRight?"has-icons-left has-icons-right":!this.icon&&this.hasIconRight?"has-icons-right":this.icon?"has-icons-left":void 0},statusTypeIcon(){switch(this.statusType){case"is-success":return"check";case"is-danger":return" iconfont icon-alert";case"is-info":return"information";case"is-warning":return"alert"}},hasMessage(){return!!this.statusMessage},passwordVisibleIcon(){return this.isPasswordVisible?"eye-off":"eye"},valueLength(){return"string"===typeof this.computedValue?this.computedValue.length:"number"===typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value(e){this.newValue=e}},methods:{togglePasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible,this.newType=this.isPasswordVisible?"text":"password",this.$nextTick((()=>{this.$refs.input.focus()}))},onInput(e){this.$nextTick((()=>{e.target&&(this.computedValue=e.target.value)}))}}},Te=Ae,Re=(0,L.Z)(Te,_e,xe,!1,null,null,null),Ie=Re.exports,Le=s(4505),Me=s(4472),De=s(6365),Oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(" "+e._s(e.$t("dns.title"))+" ")])]),t("section",{staticClass:"modal-card-body"},[t("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-info"}},[t("p",[e._v(e._s(e.$t("dns.messages.0")))])]),t("b-field",{attrs:{label:e.$t("dns.internalQueryServers")}},[t("b-input",{attrs:{type:"textarea","custom-class":"full-min-height horizon-scroll code-font"},model:{value:e.internal,callback:function(t){e.internal=t},expression:"internal"}})],1),t("b-field",{attrs:{label:e.$t("dns.externalQueryServers")}},[t("b-input",{attrs:{type:"textarea","custom-class":"full-min-height horizon-scroll code-font",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},model:{value:e.external,callback:function(t){e.external=t},expression:"external"}})],1),t("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-danger"}},[t("p",[e._v(e._s(e.$t("dns.messages.1")))])])],1),t("footer",{staticClass:"modal-card-foot flex-end"},[t("button",{staticClass:"button",on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.save"))+" ")])])])},Ue=[],Ne={name:"ModalDnsSetting",data:()=>({internal:"",external:""}),created(){this.$axios({url:`${localStorage["backendAddress"]}/api/dnsList`}).then((e=>{v(e,this,(()=>{if(e.data.data.internal){let t=e.data.data.internal,s=e.data.data.external;console.log(e.data.data),t.length&&(this.internal=t.join("\n")),s.length&&(this.external=s.join("\n"))}}))}))},methods:{handleClickSubmit(){this.$axios({url:`${localStorage["backendAddress"]}/api/dnsList`,method:"put",data:{internal:this.internal,external:this.external}}).then((e=>{v(e,this,(()=>{this.$emit("close")}))}))},beforeAdding(e){return/^\d+$/.test(e)||/^\d+:\d+$/.test(e)}}},Ve=Ne,We=(0,L.Z)(Ve,Oe,Ue,!1,null,"0fc0bac8",null),He=We.exports;function je(e,t,s,a){let n=setInterval((()=>{se({url:`${localStorage["backendAddress"]}/api/touch`,timeout:t}).then((e=>{v(e,null,(()=>{e.data.data.running&&e.data.data.touch.connectedServer&&(clearInterval(n),s&&s(),o.ZP.prototype.$remount())}),(()=>{"the last request is being processed"!==e.data.message&&this.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",queue:!1,duration:5e3})}))})).catch((e=>{401===e.response.status&&(clearInterval(n),s&&s())}))}),t);e.then((()=>{Promise.race([e,new Promise((e=>{setTimeout(e,a||3e4)}))]).finally((()=>{clearInterval(n)}))}))}var qe={name:"ModalSetting",components:{BCheckboxButton:De.Z,BSelect:Me.Z,BButton:Le.Z,CusBInput:Ie},data:()=>({proxyModeWhenSubscribe:"direct",tcpFastOpen:"default",muxOn:"no",mux:"8",transparent:"close",transparentType:"redirect",ipforward:!1,portSharing:!1,dnsForceMode:!1,dnsforward:"no",antipollution:"none",specialMode:"none",pacAutoUpdateMode:"none",pacAutoUpdateIntervalHour:0,subscriptionAutoUpdateMode:"none",subscriptionAutoUpdateIntervalHour:0,customSiteDAT:{},pacMode:"whitelist",showClockPicker:!0,serverListMode:"noSubscription",remoteGFWListVersion:"checking...",localGFWListVersion:"checking...",showSpecialMode:!0}),computed:{lite(){return window.localStorage["lite"]&&parseInt(window.localStorage["lite"])>0},dockerMode(){return"true"===window.localStorage["docker"]},v2rayaPort(){let e=g(`${localStorage["backendAddress"]}/api`),t=e.port;return t||(t="http"===e.protocol?"80":"https"===e.protocol?"443":""),w(t)}},watch:{antipollution(e){"closed"===e&&"fakedns"===this.specialMode&&(this.specialMode="none")}},created(){this.$axios({url:`${localStorage["backendAddress"]}/api/remoteGFWListVersion`}).then((e=>{v(e,this,(()=>{this.remoteGFWListVersion=e.data.data.remoteGFWListVersion}))})),this.$axios({url:`${localStorage["backendAddress"]}/api/setting`}).then((e=>{v(e,this,(()=>{Object.assign(this,e.data.data.setting),delete e.data.data["setting"],Object.assign(this,e.data.data),this.subscriptionAutoUpdateTime=new Date(this.subscriptionAutoUpdateTime),this.pacAutoUpdateTime=new Date(this.pacAutoUpdateTime),this.lite&&(this.transparentType="system_proxy",this.showSpecialMode=!1)}))}))},methods:{dayjs(){return de().apply(this,arguments)},handleClickUpdateGFWList(){this.$axios({url:`${localStorage["backendAddress"]}/api/gfwList`,method:"put",timeout:0}).then((e=>{v(e,this,(()=>{this.localGFWListVersion=e.data.data.localGFWListVersion,this.$buefy.toast.open({message:this.$t("common.success"),type:"is-warning",position:"is-top",duration:5e3,queue:!1})}))}))},requestUpdateSetting(){let e;je(this.$axios({url:`${localStorage["backendAddress"]}/api/setting`,method:"put",data:{proxyModeWhenSubscribe:this.proxyModeWhenSubscribe,pacAutoUpdateMode:this.pacAutoUpdateMode,pacAutoUpdateIntervalHour:parseInt(this.pacAutoUpdateIntervalHour),subscriptionAutoUpdateMode:this.subscriptionAutoUpdateMode,subscriptionAutoUpdateIntervalHour:parseInt(this.subscriptionAutoUpdateIntervalHour),pacMode:this.pacMode,tcpFastOpen:this.tcpFastOpen,muxOn:this.muxOn,mux:parseInt(this.mux),transparent:this.transparent,transparentType:this.transparentType,ipforward:this.ipforward,portSharing:this.portSharing,dnsforward:"dnsforward"===this.antipollution?"yes":"no",antipollution:this.antipollution,specialMode:this.specialMode},cancelToken:new se.CancelToken((function(t){e=t}))}).then((e=>{v(e,this,(()=>{this.$buefy.toast.open({message:e.data.code,type:"is-primary",position:"is-top",queue:!1}),this.$parent.close()})),"SUCCESS"!==e.data.code&&e.data.message.indexOf("invalid config")>=0&&(this.$parent.$parent.runningState.running=this.$t("common.notRunning"))})),3e3,e)},handleClickSubmit(){("yes"!==this.muxOn||this.$refs.muxinput.checkHtml5Validity())&&("auto_update_at_intervals"!==this.subscriptionAutoUpdateMode||this.$refs.autoUpdateSubInput.checkHtml5Validity())&&("auto_update_at_intervals"!==this.pacAutoUpdateMode||this.$refs.autoUpdatePacInput.checkHtml5Validity())&&(console.log(`${localStorage["backendAddress"]}/api`),this.requestUpdateSetting())},handleClickConfigurePac(){this.$buefy.modal.open({parent:this,component:fe,hasModalCard:!0,canCancel:!0})},handleClickConfigureRoutingA(){this.$buefy.modal.open({parent:this,component:ke,hasModalCard:!0,canCancel:!0})},handleClickDnsSetting(){this.$buefy.modal.open({parent:this,component:He,hasModalCard:!0,canCancel:!0})}}},Fe=qe,Ee=(0,L.Z)(Fe,ie,le,!1,null,null,null),ze=Ee.exports,Be=function(){var e=this,t=e._self._c;return t("section",{staticClass:"node-section container hero",attrs:{id:"node-section"}},[t("b-sidebar",{directives:[{name:"show",rawName:"v-show",value:e.connectedServerInfo.length,expression:"connectedServerInfo.length"}],staticClass:"node-status-sidebar-reduced",attrs:{open:!0,"can-cancel":!1},nativeOn:{mouseenter:function(t){e.showSidebar=!0},click:function(t){e.showSidebar=!0}}},[t("img",{attrs:{src:s(39),width:"36px"}})]),t("b-sidebar",{staticClass:"node-status-sidebar",attrs:{open:e.showSidebar,type:"is-light",fullheight:!1,fullwidth:!1,overlay:!1,right:!1,"can-cancel":["outside"]},on:{close:function(t){e.showSidebar=!1}},nativeOn:{mouseleave:function(t){e.showSidebar=!1}}},e._l(e.connectedServerInfo,(function(s){return t("b-message",{key:s.value,attrs:{title:`${s.info.name}${s.info.subscription_name?` [${s.info.subscription_name}]`:""}`,closable:!1,size:"is-small",type:s.info.alive?s.selected?"is-primary":"is-success":null===s.info.alive?"is-light":"is-danger"},nativeOn:{click:function(t){return e.handleClickConnectedServer(s.which)}}},[s.showContent?t("div",[t("p",[e._v(e._s(e.$t("server.protocol"))+": "+e._s(s.info.net))]),s.info.delay&&s.info.delay<99999?t("p",[e._v(" "+e._s(e.$t("server.latency"))+": "+e._s(s.info.delay)+"ms ")]):e._e(),!s.info.alive&&s.info.last_seen_time?t("p",[e._v(" "+e._s(e.$t("server.lastSeenTime"))+": "+e._s(e._f("unix2datetime")(s.info.last_seen_time))+" ")]):e._e(),s.info.last_try_time?t("p",[e._v(" "+e._s(e.$t("server.lastTryTime"))+": "+e._s(e._f("unix2datetime")(s.info.last_try_time))+" ")]):e._e()]):e._e()])})),1),e.ready?t("div",{staticClass:"hero-body"},[t("b-field",{class:{"float-toolbar":e.overHeight},style:{background:e.overHeight?e.isCheckedRowsPingable()||e.isCheckedRowsDeletable()?"rgba(0, 0, 0, 0.1)":"rgba(0, 0, 0, 0.05)":"transparent"},attrs:{id:"toolbar",grouped:"","group-multiline":""}},[t("div",{staticStyle:{"max-width":"60%"}},[t("button",{class:{button:!0,field:!0,"is-info":!0,"mobile-small":!0,"not-display":!e.overHeight&&!e.isCheckedRowsPingable()},attrs:{disabled:!e.isCheckedRowsPingable()},on:{click:function(t){return e.handleClickLatency(!0)}}},[t("i",{staticClass:"iconfont icon-wave"}),t("span",[e._v("PING")])]),t("button",{class:{button:!0,field:!0,"is-info":!0,"mobile-small":!0,"not-display":!e.overHeight&&!e.isCheckedRowsPingable()},attrs:{disabled:!e.isCheckedRowsPingable()},on:{click:function(t){return e.handleClickLatency(!1)}}},[t("i",{staticClass:"iconfont icon-wave"}),t("span",[e._v("HTTP")])]),t("button",{class:{button:!0,field:!0,"is-delete":!0,"mobile-small":!0,"not-display":!e.overHeight&&!e.isCheckedRowsDeletable()},attrs:{disabled:!e.isCheckedRowsDeletable()},on:{click:e.handleClickDelete}},[t("i",{staticClass:"iconfont icon-delete"}),t("span",[e._v(e._s(e.$t("operations.delete")))])]),t("button",{class:{button:!0,field:!0,"is-delete":!0,"mobile-small":!0,"not-show":!0}},[t("i",{staticClass:"iconfont icon-delete"}),t("span",[e._v("placeholder")])]),t("span",{staticClass:"field not-show mobile-small"},[e._v("placeholder")])]),t("div",{staticClass:"right"},[t("b-button",{staticClass:"field mobile-small",attrs:{type:"is-primary"},on:{click:e.handleClickCreate}},[t("i",{staticClass:"iconfont icon-chuangjiangongdan1"}),t("span",[e._v(e._s(e.$t("operations.create")))])]),t("b-button",{staticClass:"field mobile-small",attrs:{type:"is-primary"},on:{click:e.handleClickImport}},[t("i",{staticClass:"iconfont icon-daoruzupu-xianxing"}),t("span",[e._v(e._s(e.$t("operations.import")))])])],1)]),e.tableData.subscriptions.length||e.tableData.servers.length?e._e():t("b-collapse",{staticClass:"card welcome-driver",attrs:{"aria-id":"contentIdForA11y3"},scopedSlots:e._u([{key:"trigger",fn:function(s){return t("div",{staticClass:"card-header",attrs:{role:"button","aria-controls":"contentIdForA11y3"}},[t("p",{staticClass:"card-header-title"},[e._v(" "+e._s(e.$t("welcome.title"))+" ")]),t("a",{staticClass:"card-header-icon"},[t("b-icon",{attrs:{icon:s.open?"menu-down":"menu-up"}})],1)])}}],null,!1,611003742)},[t("div",{staticClass:"card-content"},[t("div",{staticClass:"content"},[t("p",[e._v(e._s(e.$t("welcome.messages.0")))]),t("p",[e._v(e._s(e.$t("welcome.messages.1")))])])]),t("footer",{staticClass:"card-footer"},[t("a",{staticClass:"card-footer-item",on:{click:e.handleClickCreate}},[e._v(e._s(e.$t("operations.create")))]),t("a",{staticClass:"card-footer-item",on:{click:e.handleClickImport}},[e._v(e._s(e.$t("operations.import")))])])]),e.tableData.subscriptions.length||e.tableData.servers.length?t("b-tabs",{staticClass:"main-tabs",attrs:{position:"is-centered",type:"is-toggle-rounded"},on:{input:e.handleTabsChange},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("b-tab-item",{attrs:{label:"SUBSCRIPTION"}},[t("b-field",{attrs:{label:`SUBSCRIPTION(${e.tableData.subscriptions.length})`}},[t("b-table",{attrs:{data:e.tableData.subscriptions,"checked-rows":e.checkedRows,"row-class":(t,s)=>t.connected&&e.runningState.running===e.$t("common.isRunning")?"is-connected-running":t.connected?"is-connected-not-running":null,"default-sort":"id",checkable:""},on:{"update:checkedRows":function(t){e.checkedRows=t},"update:checked-rows":function(t){e.checkedRows=t}}},[t("b-table-column",{attrs:{field:"id",label:"ID",numeric:"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}],null,!1,2188296272)}),t("b-table-column",{attrs:{field:"host",label:e.$t("subscription.host"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.host)+" ")]}}],null,!1,3926748541)}),t("b-table-column",{attrs:{field:"remarks",label:e.$t("subscription.remarks"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.remarks)+" ")]}}],null,!1,309477996)}),t("b-table-column",{attrs:{field:"status",label:e.$t("subscription.timeLastUpdate"),width:"260",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.status)+" ")]}}],null,!1,2454658857)}),t("b-table-column",{attrs:{label:e.$t("subscription.numberServers"),centered:"",numeric:"",sortable:"","custom-sort":e.sortNumberServers},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.servers.length)+" ")]}}],null,!1,464684985)}),t("b-table-column",{attrs:{label:e.$t("operations.name"),width:"300"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"operate-box"},[t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-sync",outlined:"",type:"is-warning"},on:{click:function(t){return e.handleClickUpdateSubscription(s.row)}}},[e._v(" "+e._s(e.$t("operations.update"))+" ")]),t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-wendangxiugai",outlined:"",type:"is-info"},on:{click:function(t){return e.handleClickModifySubscription(s.row)}}},[e._v(" "+e._s(e.$t("operations.modify"))+" ")]),t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-share",outlined:"",type:"is-success"},on:{click:function(t){return e.handleClickShare(s.row)}}},[e._v(" "+e._s(e.$t("operations.share"))+" ")])],1)]}}],null,!1,2199245895)})],1)],1)],1),t("b-tab-item",{attrs:{label:"SERVER",icon:""+(e.connectedServerInTab["server"]?" iconfont icon-dian":"")}},[t("b-field",{attrs:{label:`SERVER(${e.tableData.servers.length})`}},[t("b-table",{attrs:{"per-page":"100","current-page":e.currentPage.servers,data:e.tableData.servers,"checked-rows":e.checkedRows,checkable:"","row-class":(t,s)=>t.connected&&e.runningState.running===e.$t("common.isRunning")?"is-connected-running":t.connected?"is-connected-not-running":null,"default-sort":"id"},on:{"update:currentPage":function(t){return e.$set(e.currentPage,"servers",t)},"update:current-page":function(t){return e.$set(e.currentPage,"servers",t)},"update:checkedRows":function(t){e.checkedRows=t},"update:checked-rows":function(t){e.checkedRows=t}}},[t("b-table-column",{attrs:{field:"id",label:"ID",numeric:"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}],null,!1,2188296272)}),t("b-table-column",{attrs:{field:"name",label:e.$t("server.name"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2982927002)}),t("b-table-column",{attrs:{field:"address",label:e.$t("server.address"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.address)+" ")]}}],null,!1,2722900651)}),t("b-table-column",{attrs:{field:"net",label:e.$t("server.protocol"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.net)+" ")]}}],null,!1,4003663010)}),t("b-table-column",{staticClass:"ping-latency",attrs:{field:"pingLatency",label:e.$t("server.latency"),sortable:"","custom-sort":e.sortping},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pingLatency)+" ")]}}],null,!1,692449221)}),t("b-table-column",{attrs:{label:e.$t("operations.name"),sortable:"","custom-sort":e.sortConnections,width:"300"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"operate-box"},[t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont "+(s.row.connected?"icon-Link_disconnect":"icon-lianjie"),outlined:!s.row.connected,type:(s.row.connected,"is-warning")},on:{click:function(t){return e.handleClickAboutConnection(s.row)}}},[e._v(" "+e._s(e.loadBalanceValid?s.row.connected?e.$t("operations.cancel"):e.$t("operations.select"):s.row.connected?e.$t("operations.disconnect"):e.$t("operations.connect"))+" ")]),t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-wendangxiugai",outlined:!s.row.connected,type:"is-info"},on:{click:function(t){return e.handleClickModifyServer(s.row)}}},[e._v(" "+e._s(e.$t("operations.modify"))+" ")]),t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-share",outlined:!s.row.connected,type:"is-success"},on:{click:function(t){return e.handleClickShare(s.row)}}},[e._v(" "+e._s(e.$t("operations.share"))+" ")])],1)]}}],null,!1,3776941652)})],1)],1)],1),e._l(e.tableData.subscriptions,(function(s,o){return t("b-tab-item",{key:s.id,attrs:{label:s.remarks&&s.remarks.toUpperCase()||s.host.toUpperCase(),icon:""+(e.connectedServerInTab["subscriptionServer"][o]?" iconfont icon-dian":"")}},[e.tab===o+2?t("b-field",{attrs:{label:`${s.host.toUpperCase()}(${s.servers.length}${s.info?") (":""}${s.info})`}},[t("b-table",{attrs:{"current-page":e.currentPage[s.id],"per-page":"100",data:s.servers,"checked-rows":e.checkedRows,checkable:"","row-class":(t,s)=>t.connected&&e.runningState.running===e.$t("common.isRunning")?"is-connected-running":t.connected?"is-connected-not-running":null,"default-sort":"id"},on:{"update:currentPage":function(t){return e.$set(e.currentPage,s.id,t)},"update:current-page":function(t){return e.$set(e.currentPage,s.id,t)},"update:checkedRows":function(t){e.checkedRows=t},"update:checked-rows":function(t){e.checkedRows=t}}},[t("b-table-column",{attrs:{field:"id",label:"ID",numeric:"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}],null,!0)}),t("b-table-column",{attrs:{field:"name",label:e.$t("server.name"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!0)}),t("b-table-column",{attrs:{field:"address",label:e.$t("server.address"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.address)+" ")]}}],null,!0)}),t("b-table-column",{staticStyle:{"font-size":"0.9em"},attrs:{field:"net",label:e.$t("server.protocol"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.net)+" ")]}}],null,!0)}),t("b-table-column",{staticClass:"ping-latency",attrs:{field:"pingLatency",label:e.$t("server.latency"),sortable:"","custom-sort":e.sortping},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pingLatency)+" ")]}}],null,!0)}),t("b-table-column",{attrs:{label:e.$t("operations.name"),sortable:"","custom-sort":e.sortConnections,width:"300"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"operate-box"},[t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont "+(s.row.connected?"icon-Link_disconnect":"icon-lianjie"),outlined:!s.row.connected,type:(s.row.connected,"is-warning")},on:{click:function(t){return e.handleClickAboutConnection(s.row,o)}}},[e._v(" "+e._s(e.loadBalanceValid?s.row.connected?e.$t("operations.cancel"):e.$t("operations.select"):s.row.connected?e.$t("operations.disconnect"):e.$t("operations.connect"))+" ")]),t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-winfo-icon-chakanbaogao",outlined:!s.row.connected,type:"is-info"},on:{click:function(t){return e.handleClickViewServer(s.row,o)}}},[e._v(" "+e._s(e.$t("operations.view"))+" ")]),t("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-share",outlined:!s.row.connected,type:"is-success"},on:{click:function(t){return e.handleClickShare(s.row,o)}}},[e._v(" "+e._s(e.$t("operations.share"))+" ")])],1)]}}],null,!0)})],1)],1):e._e()],1)}))],2):e._e()],1):t("b-loading",{attrs:{"is-full-page":!0,active:!0}},[t("i",{staticClass:"iconfont icon-loading_ico-copy"})]),t("b-modal",{attrs:{active:e.showModalServer,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.showModalServer=t}}},[t("ModalServer",{attrs:{which:e.which,readonly:e.modalServerReadOnly},on:{submit:e.handleModalServerSubmit}})],1),t("b-modal",{attrs:{active:e.showModalSubscription,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.showModalSubscription=t}}},[t("ModalSubscription",{attrs:{which:e.which},on:{submit:e.handleModalSubscriptionSubmit}})],1),t("input",{staticStyle:{display:"none"},attrs:{id:"QRCodeImport",type:"file",accept:"image/*"}}),t("b-modal",{attrs:{active:e.showModalImport,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.showModalImport=t},"after-enter":e.handleModalImportShow}},[t("div",{staticClass:"modal-card",staticStyle:{width:"350px"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("operations.import")))])]),t("section",{staticClass:"modal-card-body"},[e._v(" "+e._s(e.$t("import.message"))+" "),t("b-input",{ref:"importInput",attrs:{"icon-right":" iconfont icon-camera","icon-right-clickable":""},on:{"icon-right-click":e.handleClickImportQRCode},nativeOn:{keyup:function(t){return e.handleImportEnter.apply(null,arguments)}},model:{value:e.importWhat,callback:function(t){e.importWhat=t},expression:"importWhat"}})],1),t("footer",{staticClass:"modal-card-foot"},[t("button",{staticClass:"button is-link is-light",attrs:{type:"button"},on:{click:e.handleClickImportInBatch}},[e._v(" "+e._s(e.$t("operations.inBatch"))+" ")]),t("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"-moz-available"}},[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.showModalImport=!1}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:e.handleClickImportConfirm}},[e._v(" "+e._s(e.$t("operations.confirm"))+" ")])])])])]),t("b-modal",{attrs:{active:e.showModalImportInBatch,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(t){e.showModalImportInBatch=t},close:function(t){e.showModalImport=!1}}},[t("div",{staticClass:"modal-card",staticStyle:{width:"350px"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("operations.import")))])]),t("section",{staticClass:"modal-card-body"},[e._v(" "+e._s(e.$t("import.batchMessage"))+" "),t("b-input",{ref:"importInput",attrs:{type:"textarea","custom-class":"horizon-scroll"},model:{value:e.importWhat,callback:function(t){e.importWhat=t},expression:"importWhat"}})],1),t("footer",{staticClass:"modal-card-foot"},[t("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"-moz-available"}},[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:()=>{e.showModalImport=!1,e.showModalImportInBatch=!1}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:e.handleClickImportConfirm}},[e._v(" "+e._s(e.$t("operations.confirm"))+" ")])])])])])],1)},Ge=[],Ze=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"520px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(" "+e._s(e.$tc("configureServer.title",e.readonly?2:1))+" ")])]),t("section",{ref:"section",class:{"modal-card-body":!0}},[t("b-tabs",{staticClass:"block",attrs:{position:"is-centered",type:"is-boxed is-twitter same-width-5"},model:{value:e.tabChoice,callback:function(t){e.tabChoice=t},expression:"tabChoice"}},[t("b-tab-item",{attrs:{label:"V2RAY"}},[t("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},on:{input:e.handleV2rayProtocolSwitch},model:{value:e.v2ray.protocol,callback:function(t){e.$set(e.v2ray,"protocol",t)},expression:"v2ray.protocol"}},[t("option",{attrs:{value:"vmess"}},[e._v("VMESS")]),t("option",{attrs:{value:"vless"}},[e._v("VLESS")])])],1),t("b-field",{attrs:{label:"Name","label-position":"on-border"}},[t("b-input",{ref:"v2ray_name",attrs:{placeholder:e.$t("configureServer.servername"),expanded:""},model:{value:e.v2ray.ps,callback:function(t){e.$set(e.v2ray,"ps",t)},expression:"v2ray.ps"}})],1),t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"v2ray_add",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:e.v2ray.add,callback:function(t){e.$set(e.v2ray,"add",t)},expression:"v2ray.add"}})],1),t("b-field",{attrs:{label:"Port","label-position":"on-border"}},[t("b-input",{ref:"v2ray_port",attrs:{required:"",placeholder:e.$t("configureServer.port"),type:"number",expanded:""},model:{value:e.v2ray.port,callback:function(t){e.$set(e.v2ray,"port",t)},expression:"v2ray.port"}})],1),t("b-field",{attrs:{label:"ID","label-position":"on-border"}},[t("b-input",{ref:"v2ray_id",attrs:{required:"",placeholder:"UserID",expanded:""},model:{value:e.v2ray.id,callback:function(t){e.$set(e.v2ray,"id",t)},expression:"v2ray.id"}})],1),"vmess"===e.v2ray.protocol?t("b-field",{attrs:{label:"AlterID","label-position":"on-border"}},[t("b-input",{ref:"v2ray_aid",attrs:{placeholder:"AlterID",type:"number",min:"0",max:"65535",expanded:""},model:{value:e.v2ray.aid,callback:function(t){e.$set(e.v2ray,"aid",t)},expression:"v2ray.aid"}})],1):e._e(),"vmess"===e.v2ray.protocol?t("b-field",{attrs:{label:"Security","label-position":"on-border"}},[t("b-select",{attrs:{expanded:"",required:""},model:{value:e.v2ray.scy,callback:function(t){e.$set(e.v2ray,"scy",t)},expression:"v2ray.scy"}},[t("option",{attrs:{value:"auto"}},[e._v("Auto")]),t("option",{attrs:{value:"aes-128-gcm"}},[e._v("aes-128-gcm")]),t("option",{attrs:{value:"chacha20-poly1305"}},[e._v("chacha20-poly1305")]),t("option",{attrs:{value:"none"}},[e._v("none")]),t("option",{attrs:{value:"zero"}},[e._v("zero")])])],1):e._e(),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"dtls"!==e.v2ray.type,expression:"v2ray.type !== 'dtls'"}],attrs:{label:"TLS","label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},on:{input:e.handleNetworkChange},model:{value:e.v2ray.tls,callback:function(t){e.$set(e.v2ray,"tls",t)},expression:"v2ray.tls"}},[t("option",{attrs:{value:"none"}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"tls"}},[e._v("tls")]),"xray"===e.variant()?t("option",{attrs:{value:"reality"}},[e._v("reality")]):e._e(),"xray"===e.variant()?t("option",{attrs:{value:"xtls"}},[e._v("xtls")]):e._e()])],1),"none"!==e.v2ray.tls?t("b-field",{attrs:{label:"SNI","label-position":"on-border"}},[t("b-input",{ref:"v2ray_sni",attrs:{placeholder:"SNI",expanded:""},model:{value:e.v2ray.sni,callback:function(t){e.$set(e.v2ray,"sni",t)},expression:"v2ray.sni"}})],1):e._e(),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"tls"===e.v2ray.tls||"reality"===e.v2ray.tls,expression:"v2ray.tls === 'tls' || v2ray.tls === 'reality'"}],attrs:{label:"uTLS fingerprint","label-position":"on-border"}},[t("b-input",{ref:"v2ray_fp",attrs:{placeholder:"A uTLS compatable fingerprint name",expanded:""},model:{value:e.v2ray.fp,callback:function(t){e.$set(e.v2ray,"fp",t)},expression:"v2ray.fp"}})],1),"vless"===e.v2ray.protocol&&"none"!==e.v2ray.tls?t("b-field",{ref:"v2ray_flow",attrs:{label:"Flow","label-position":"on-border"}},[t("b-input",{ref:"v2ray_flow",attrs:{placeholder:"Flow",expanded:""},model:{value:e.v2ray.flow,callback:function(t){e.$set(e.v2ray,"flow",t)},expression:"v2ray.flow"}})],1):e._e(),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"reality"===e.v2ray.tls,expression:"v2ray.tls === 'reality'"}],attrs:{label:"pbk","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"pbk",expanded:""},model:{value:e.v2ray.pbk,callback:function(t){e.$set(e.v2ray,"pbk",t)},expression:"v2ray.pbk"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"reality"===e.v2ray.tls,expression:"v2ray.tls === 'reality'"}],attrs:{label:"sid","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"sid",expanded:""},model:{value:e.v2ray.sid,callback:function(t){e.$set(e.v2ray,"sid",t)},expression:"v2ray.sid"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"reality"===e.v2ray.tls,expression:"v2ray.tls === 'reality'"}],attrs:{label:"spx","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"spx",expanded:""},model:{value:e.v2ray.spx,callback:function(t){e.$set(e.v2ray,"spx",t)},expression:"v2ray.spx"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"none"!==e.v2ray.tls,expression:"v2ray.tls !== 'none'"}],attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" AllowInsecure "),t("b-tooltip",{directives:[{name:"show",rawName:"v-show",value:"vless"===e.v2ray.protocol,expression:"v2ray.protocol === 'vless'"}],attrs:{type:"is-dark",label:e.$t("server.messages.notRecommend",{name:"VLESS"}),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{ref:"v2ray_allow_insecure",attrs:{expanded:"",required:""},model:{value:e.v2ray.allowInsecure,callback:function(t){e.$set(e.v2ray,"allowInsecure",t)},expression:"v2ray.allowInsecure"}},[t("option",{domProps:{value:!1}},[e._v(e._s(e.$t("operations.no")))]),t("option",{domProps:{value:!0}},[e._v(e._s(e.$t("operations.yes")))])])],2),t("b-field",{attrs:{label:"Network","label-position":"on-border"}},[t("b-select",{ref:"v2ray_net",attrs:{expanded:"",required:""},on:{input:e.handleNetworkChange},model:{value:e.v2ray.net,callback:function(t){e.$set(e.v2ray,"net",t)},expression:"v2ray.net"}},[t("option",{attrs:{value:"tcp"}},[e._v("TCP")]),t("option",{attrs:{value:"kcp"}},[e._v("mKCP")]),t("option",{attrs:{value:"ws"}},[e._v("WebSocket")]),t("option",{attrs:{value:"h2"}},[e._v("HTTP/2")]),t("option",{attrs:{value:"grpc"}},[e._v("gRPC")])])],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"tcp"===e.v2ray.net,expression:"v2ray.net === 'tcp'"}],attrs:{label:"Type","label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.v2ray.type,callback:function(t){e.$set(e.v2ray,"type",t)},expression:"v2ray.type"}},[t("option",{attrs:{value:"none"}},[e._v(" "+e._s(e.$t("configureServer.noObfuscation"))+" ")]),t("option",{attrs:{value:"http"}},[e._v(" "+e._s(e.$t("configureServer.httpObfuscation"))+" ")])])],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"kcp"===e.v2ray.net,expression:"v2ray.net === 'kcp'"}],attrs:{label:"Type","label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.v2ray.type,callback:function(t){e.$set(e.v2ray,"type",t)},expression:"v2ray.type"}},[t("option",{attrs:{value:"none"}},[e._v(" "+e._s(e.$t("configureServer.noObfuscation"))+" ")]),t("option",{attrs:{value:"srtp"}},[e._v(" "+e._s(e.$t("configureServer.srtpObfuscation"))+" ")]),t("option",{attrs:{value:"utp"}},[e._v(" "+e._s(e.$t("configureServer.utpObfuscation"))+" ")]),t("option",{attrs:{value:"wechat-video"}},[e._v(" "+e._s(e.$t("configureServer.wechatVideoObfuscation"))+" ")]),t("option",{attrs:{value:"dtls"}},[e._v(" "+e._s(`${e.$t("configureServer.dtlsObfuscation")}(${e.$t("configureServer.forceTLS")})`)+" ")]),t("option",{attrs:{value:"wireguard"}},[e._v(" "+e._s(e.$t("configureServer.wireguardObfuscation"))+" ")])])],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"ws"===e.v2ray.net||"h2"===e.v2ray.net||"tls"===e.v2ray.tls||"tcp"===e.v2ray.net&&"http"===e.v2ray.type,expression:"v2ray.net === 'ws' ||\n          v2ray.net === 'h2' ||\n          v2ray.tls === 'tls' ||\n          (v2ray.net === 'tcp' && v2ray.type === 'http')\n          "}],attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:e.$t("configureServer.hostObfuscation"),expanded:""},model:{value:e.v2ray.host,callback:function(t){e.$set(e.v2ray,"host",t)},expression:"v2ray.host"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"tls"===e.v2ray.tls,expression:"v2ray.tls === 'tls'"}],attrs:{label:"Alpn","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"h2,http/1.1",expanded:""},model:{value:e.v2ray.alpn,callback:function(t){e.$set(e.v2ray,"alpn",t)},expression:"v2ray.alpn"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"ws"===e.v2ray.net||"h2"===e.v2ray.net||"tcp"===e.v2ray.net&&"http"===e.v2ray.type,expression:"v2ray.net === 'ws' ||\n          v2ray.net === 'h2' ||\n          (v2ray.net === 'tcp' && v2ray.type === 'http')\n          "}],attrs:{label:"Path","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:e.$t("configureServer.pathObfuscation"),expanded:""},model:{value:e.v2ray.path,callback:function(t){e.$set(e.v2ray,"path",t)},expression:"v2ray.path"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"mkcp"===e.v2ray.net||"kcp"===e.v2ray.net,expression:"v2ray.net === 'mkcp' || v2ray.net === 'kcp'"}],attrs:{label:"Seed","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:e.$t("configureServer.seedObfuscation"),expanded:""},model:{value:e.v2ray.path,callback:function(t){e.$set(e.v2ray,"path",t)},expression:"v2ray.path"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"grpc"===e.v2ray.net,expression:"v2ray.net === 'grpc'"}],attrs:{label:"ServiceName","label-position":"on-border"}},[t("b-input",{ref:"v2ray_service_name",attrs:{type:"text",expanded:""},model:{value:e.v2ray.path,callback:function(t){e.$set(e.v2ray,"path",t)},expression:"v2ray.path"}})],1)],1),t("b-tab-item",{attrs:{label:"SS"}},[t("b-field",{attrs:{label:"Name","label-position":"on-border"}},[t("b-input",{ref:"ss_name",attrs:{placeholder:e.$t("configureServer.servername"),expanded:""},model:{value:e.ss.name,callback:function(t){e.$set(e.ss,"name",t)},expression:"ss.name"}})],1),t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"ss_server",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:e.ss.server,callback:function(t){e.$set(e.ss,"server",t)},expression:"ss.server"}})],1),t("b-field",{attrs:{label:"Port","label-position":"on-border"}},[t("b-input",{ref:"ss_port",attrs:{required:"",placeholder:e.$t("configureServer.port"),type:"number",expanded:""},model:{value:e.ss.port,callback:function(t){e.$set(e.ss,"port",t)},expression:"ss.port"}})],1),t("b-field",{attrs:{label:"Password","label-position":"on-border"}},[t("b-input",{ref:"ss_password",attrs:{required:"",placeholder:e.$t("configureServer.password"),expanded:""},model:{value:e.ss.password,callback:function(t){e.$set(e.ss,"password",t)},expression:"ss.password"}})],1),t("b-field",{attrs:{label:"Method","label-position":"on-border"}},[t("b-select",{ref:"ss_method",attrs:{expanded:"",required:""},model:{value:e.ss.method,callback:function(t){e.$set(e.ss,"method",t)},expression:"ss.method"}},[t("option",{attrs:{value:"aes-128-gcm"}},[e._v("aes-128-gcm")]),t("option",{attrs:{value:"aes-256-gcm"}},[e._v("aes-256-gcm")]),t("option",{attrs:{value:"chacha20-poly1305"}},[e._v("chacha20-poly1305")]),t("option",{attrs:{value:"chacha20-ietf-poly1305"}},[e._v(" chacha20-ietf-poly1305 ")]),t("option",{attrs:{value:"plain"}},[e._v("plain")]),t("option",{attrs:{value:"none"}},[e._v("none")])])],1),t("b-field",{attrs:{label:"Plugin","label-position":"on-border"}},[t("b-select",{ref:"ss_plugin",attrs:{expanded:""},model:{value:e.ss.plugin,callback:function(t){e.$set(e.ss,"plugin",t)},expression:"ss.plugin"}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"simple-obfs"}},[e._v("simple-obfs")]),t("option",{attrs:{value:"v2ray-plugin"}},[e._v("v2ray-plugin")])])],1),"simple-obfs"===e.ss.plugin||"v2ray-plugin"===e.ss.plugin?t("b-field",{staticClass:"with-icon-alert",attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" Impl "),t("b-tooltip",{attrs:{type:"is-dark",label:e.$t("setting.messages.ssPluginImpl"),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-samll",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{ref:"ss_plugin_impl",attrs:{expanded:""},model:{value:e.ss.impl,callback:function(t){e.$set(e.ss,"impl",t)},expression:"ss.impl"}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("setting.options.default")))]),t("option",{attrs:{value:"chained"}},[e._v("chained")]),t("option",{attrs:{value:"transport"}},[e._v("transport")])])],2):e._e(),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"simple-obfs"===e.ss.plugin,expression:"ss.plugin === 'simple-obfs'"}],attrs:{label:"Obfs","label-position":"on-border"}},[t("b-select",{ref:"ss_obfs",attrs:{expanded:""},model:{value:e.ss.obfs,callback:function(t){e.$set(e.ss,"obfs",t)},expression:"ss.obfs"}},[t("option",{attrs:{value:"http"}},[e._v("http")]),t("option",{attrs:{value:"tls"}},[e._v("tls")])])],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"v2ray-plugin"===e.ss.plugin,expression:"ss.plugin === 'v2ray-plugin'"}],attrs:{label:"Mode","label-position":"on-border"}},[t("b-select",{ref:"ss_mode",attrs:{expanded:""},model:{value:e.ss.mode,callback:function(t){e.$set(e.ss,"mode",t)},expression:"ss.mode"}},[t("option",{attrs:{value:"websocket"}},[e._v("websocket")])])],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"v2ray-plugin"===e.ss.plugin,expression:"ss.plugin === 'v2ray-plugin'"}],attrs:{label:"TLS","label-position":"on-border"}},[t("b-select",{ref:"ss_tls",attrs:{expanded:""},model:{value:e.ss.tls,callback:function(t){e.$set(e.ss,"tls",t)},expression:"ss.tls"}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("setting.options.off")))]),t("option",{attrs:{value:"tls"}},[e._v("tls")])])],1),"simple-obfs"===e.ss.plugin&&("http"===e.ss.obfs||"tls"===e.ss.obfs)||"v2ray-plugin"===e.ss.plugin?t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"ss_host",attrs:{placeholder:"(optional)",expanded:""},model:{value:e.ss.host,callback:function(t){e.$set(e.ss,"host",t)},expression:"ss.host"}})],1):e._e(),"simple-obfs"===e.ss.plugin&&"http"===e.ss.obfs||"v2ray-plugin"===e.ss.plugin?t("b-field",{attrs:{label:"Path","label-position":"on-border"}},[t("b-input",{ref:"ss_path",attrs:{placeholder:"/",expanded:""},model:{value:e.ss.path,callback:function(t){e.$set(e.ss,"path",t)},expression:"ss.path"}})],1):e._e()],1),t("b-tab-item",{attrs:{label:"SSR"}},[t("b-field",{attrs:{label:"Name","label-position":"on-border"}},[t("b-input",{ref:"ssr_name",attrs:{placeholder:e.$t("configureServer.servername"),expanded:""},model:{value:e.ssr.name,callback:function(t){e.$set(e.ssr,"name",t)},expression:"ssr.name"}})],1),t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"ssr_server",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:e.ssr.server,callback:function(t){e.$set(e.ssr,"server",t)},expression:"ssr.server"}})],1),t("b-field",{attrs:{label:"Port","label-position":"on-border"}},[t("b-input",{ref:"ssr_port",attrs:{required:"",placeholder:e.$t("configureServer.port"),type:"number",expanded:""},model:{value:e.ssr.port,callback:function(t){e.$set(e.ssr,"port",t)},expression:"ssr.port"}})],1),t("b-field",{attrs:{label:"Password","label-position":"on-border"}},[t("b-input",{ref:"ssr_password",attrs:{required:"",placeholder:e.$t("configureServer.password"),expanded:""},model:{value:e.ssr.password,callback:function(t){e.$set(e.ssr,"password",t)},expression:"ssr.password"}})],1),t("b-field",{attrs:{label:"Method","label-position":"on-border"}},[t("b-select",{ref:"ssr_method",attrs:{expanded:"",required:""},model:{value:e.ssr.method,callback:function(t){e.$set(e.ssr,"method",t)},expression:"ssr.method"}},[t("option",{attrs:{value:"aes-128-cfb"}},[e._v("aes-128-cfb")]),t("option",{attrs:{value:"aes-192-cfb"}},[e._v("aes-192-cfb")]),t("option",{attrs:{value:"aes-256-cfb"}},[e._v("aes-256-cfb")]),t("option",{attrs:{value:"aes-128-ctr"}},[e._v("aes-128-ctr")]),t("option",{attrs:{value:"aes-192-ctr"}},[e._v("aes-192-ctr")]),t("option",{attrs:{value:"aes-256-ctr"}},[e._v("aes-256-ctr")]),t("option",{attrs:{value:"aes-128-ofb"}},[e._v("aes-128-ofb")]),t("option",{attrs:{value:"aes-192-ofb"}},[e._v("aes-192-ofb")]),t("option",{attrs:{value:"aes-256-ofb"}},[e._v("aes-256-ofb")]),t("option",{attrs:{value:"des-cfb"}},[e._v("des-cfb")]),t("option",{attrs:{value:"bf-cfb"}},[e._v("bf-cfb")]),t("option",{attrs:{value:"cast5-cfb"}},[e._v("cast5-cfb")]),t("option",{attrs:{value:"rc4-md5"}},[e._v("rc4-md5")]),t("option",{attrs:{value:"chacha20"}},[e._v("chacha20")]),t("option",{attrs:{value:"chacha20-ietf"}},[e._v("chacha20-ietf")]),t("option",{attrs:{value:"salsa20"}},[e._v("salsa20")]),t("option",{attrs:{value:"camellia-128-cfb"}},[e._v("camellia-128-cfb")]),t("option",{attrs:{value:"camellia-192-cfb"}},[e._v("camellia-192-cfb")]),t("option",{attrs:{value:"camellia-256-cfb"}},[e._v("camellia-256-cfb")]),t("option",{attrs:{value:"idea-cfb"}},[e._v("idea-cfb")]),t("option",{attrs:{value:"rc2-cfb"}},[e._v("rc2-cfb")]),t("option",{attrs:{value:"seed-cfb"}},[e._v("seed-cfb")]),t("option",{attrs:{value:"none"}},[e._v("none")])])],1),t("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[t("b-select",{ref:"ssr_proto",attrs:{expanded:"",required:""},model:{value:e.ssr.proto,callback:function(t){e.$set(e.ssr,"proto",t)},expression:"ssr.proto"}},[t("option",{attrs:{value:"origin"}},[e._v("origin")]),t("option",{attrs:{value:"verify_sha1"}},[e._v("verify_sha1")]),t("option",{attrs:{value:"auth_sha1_v4"}},[e._v("auth_sha1_v4")]),t("option",{attrs:{value:"auth_aes128_md5"}},[e._v("auth_aes128_md5")]),t("option",{attrs:{value:"auth_aes128_sha1"}},[e._v("auth_aes128_sha1")]),t("option",{attrs:{value:"auth_chain_a"}},[e._v("auth_chain_a")]),t("option",{attrs:{value:"auth_chain_b"}},[e._v("auth_chain_b")])])],1),"origin"!==e.ssr.proto?t("b-field",{attrs:{label:"Protocol Param","label-position":"on-border"}},[t("b-input",{ref:"ssr_protoParam",attrs:{placeholder:"(optional)",expanded:""},model:{value:e.ssr.protoParam,callback:function(t){e.$set(e.ssr,"protoParam",t)},expression:"ssr.protoParam"}})],1):e._e(),t("b-field",{attrs:{label:"Obfs","label-position":"on-border"}},[t("b-select",{ref:"ssr_obfs",attrs:{expanded:"",required:""},model:{value:e.ssr.obfs,callback:function(t){e.$set(e.ssr,"obfs",t)},expression:"ssr.obfs"}},[t("option",{attrs:{value:"plain"}},[e._v("plain")]),t("option",{attrs:{value:"http_simple"}},[e._v("http_simple")]),t("option",{attrs:{value:"http_post"}},[e._v("http_post")]),t("option",{attrs:{value:"random_head"}},[e._v("random_head")]),t("option",{attrs:{value:"tls1.2_ticket_auth"}},[e._v("tls1.2_ticket_auth")])])],1),"plain"!==e.ssr.obfs?t("b-field",{attrs:{label:"Obfs Param","label-position":"on-border"}},[t("b-input",{ref:"ssr_obfsParam",attrs:{placeholder:"(optional)",expanded:""},model:{value:e.ssr.obfsParam,callback:function(t){e.$set(e.ssr,"obfsParam",t)},expression:"ssr.obfsParam"}})],1):e._e()],1),t("b-tab-item",{attrs:{label:"Trojan"}},[t("b-field",{attrs:{label:"Name","label-position":"on-border"}},[t("b-input",{ref:"trojan_name",attrs:{placeholder:e.$t("configureServer.servername"),expanded:""},model:{value:e.trojan.name,callback:function(t){e.$set(e.trojan,"name",t)},expression:"trojan.name"}})],1),t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"trojan_server",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:e.trojan.server,callback:function(t){e.$set(e.trojan,"server",t)},expression:"trojan.server"}})],1),t("b-field",{attrs:{label:"Port","label-position":"on-border"}},[t("b-input",{ref:"trojan_port",attrs:{required:"",placeholder:e.$t("configureServer.port"),type:"number",expanded:""},model:{value:e.trojan.port,callback:function(t){e.$set(e.trojan,"port",t)},expression:"trojan.port"}})],1),t("b-field",{attrs:{label:"Password","label-position":"on-border"}},[t("b-input",{ref:"trojan_password",attrs:{required:"",placeholder:e.$t("configureServer.password"),expanded:""},model:{value:e.trojan.password,callback:function(t){e.$set(e.trojan,"password",t)},expression:"trojan.password"}})],1),t("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[t("b-select",{ref:"trojan_method",attrs:{expanded:"",required:""},model:{value:e.trojan.method,callback:function(t){e.$set(e.trojan,"method",t)},expression:"trojan.method"}},[t("option",{attrs:{value:"origin"}},[e._v(e._s(e.$t("configureServer.origin")))]),t("option",{attrs:{value:"shadowsocks"}},[e._v("shadowsocks")])])],1),"shadowsocks"===e.trojan.method?t("b-field",{attrs:{label:"Shadowsocks Cipher","label-position":"on-border"}},[t("b-select",{ref:"trojan_ss_cipher",attrs:{expanded:"",required:""},model:{value:e.trojan.ssCipher,callback:function(t){e.$set(e.trojan,"ssCipher",t)},expression:"trojan.ssCipher"}},[t("option",{attrs:{value:"aes-128-gcm"}},[e._v("aes-128-gcm")]),t("option",{attrs:{value:"aes-256-gcm"}},[e._v("aes-256-gcm")]),t("option",{attrs:{value:"chacha20-poly1305"}},[e._v("chacha20-poly1305")]),t("option",{attrs:{value:"chacha20-ietf-poly1305"}},[e._v(" chacha20-ietf-poly1305 ")])])],1):e._e(),"shadowsocks"===e.trojan.method?t("b-field",{attrs:{label:"Shadowsocks Password","label-position":"on-border"}},[t("b-input",{ref:"trojan_ss_password",attrs:{required:"",placeholder:`shadowsocks${e.$t("configureServer.password")}`,expanded:""},model:{value:e.trojan.ssPassword,callback:function(t){e.$set(e.trojan,"ssPassword",t)},expression:"trojan.ssPassword"}})],1):e._e(),t("b-field",{attrs:{"label-position":"on-border"}},[t("template",{slot:"label"},[e._v(" AllowInsecure "),t("b-tooltip",{directives:[{name:"show",rawName:"v-show",value:"origin"!==e.trojan.method||"none"!==e.trojan.obfs,expression:"trojan.method !== 'origin' || trojan.obfs !== 'none'"}],attrs:{type:"is-dark",label:e.$t("server.messages.notAllowInsecure",{name:"Trojan-Go"}),multilined:"",position:"is-right"}},[t("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),t("b-select",{ref:"trojan_allow_insecure",attrs:{expanded:"",required:""},model:{value:e.trojan.allowInsecure,callback:function(t){e.$set(e.trojan,"allowInsecure",t)},expression:"trojan.allowInsecure"}},[t("option",{domProps:{value:!1}},[e._v(e._s(e.$t("operations.no")))]),t("option",{attrs:{disabled:"origin"!==e.trojan.method||"none"!==e.trojan.obfs},domProps:{value:!0}},[e._v(" "+e._s(e.$t("operations.yes"))+" ")])])],2),t("b-field",{attrs:{label:"SNI(Peer)","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"SNI(Peer)",expanded:""},model:{value:e.trojan.peer,callback:function(t){e.$set(e.trojan,"peer",t)},expression:"trojan.peer"}})],1),t("b-field",{attrs:{label:"Obfs","label-position":"on-border"}},[t("b-select",{ref:"trojan_obfs",attrs:{expanded:"",required:""},model:{value:e.trojan.obfs,callback:function(t){e.$set(e.trojan,"obfs",t)},expression:"trojan.obfs"}},[t("option",{attrs:{value:"none"}},[e._v(" "+e._s(e.$t("configureServer.noObfuscation"))+" ")]),t("option",{attrs:{value:"websocket"}},[e._v("websocket")])])],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"websocket"===e.trojan.obfs,expression:"trojan.obfs === 'websocket'"}],attrs:{label:"Websocket Host","label-position":"on-border"}},[t("b-input",{attrs:{expanded:""},model:{value:e.trojan.host,callback:function(t){e.$set(e.trojan,"host",t)},expression:"trojan.host"}})],1),t("b-field",{directives:[{name:"show",rawName:"v-show",value:"websocket"===e.trojan.obfs,expression:"trojan.obfs === 'websocket'"}],attrs:{label:"Websocket Path","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"/",expanded:""},model:{value:e.trojan.path,callback:function(t){e.$set(e.trojan,"path",t)},expression:"trojan.path"}})],1)],1),t("b-tab-item",{attrs:{label:"HTTP"}},[t("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.http.protocol,callback:function(t){e.$set(e.http,"protocol",t)},expression:"http.protocol"}},[t("option",{attrs:{value:"http"}},[e._v("HTTP")]),t("option",{attrs:{value:"https"}},[e._v("HTTPS")])])],1),t("b-field",{attrs:{label:"Name","label-position":"on-border"}},[t("b-input",{ref:"http_name",attrs:{placeholder:e.$t("configureServer.servername"),expanded:""},model:{value:e.http.name,callback:function(t){e.$set(e.http,"name",t)},expression:"http.name"}})],1),t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"http_host",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:e.http.host,callback:function(t){e.$set(e.http,"host",t)},expression:"http.host"}})],1),t("b-field",{attrs:{label:"Port","label-position":"on-border"}},[t("b-input",{ref:"http_port",attrs:{required:"",placeholder:e.$t("configureServer.port"),type:"number",expanded:""},model:{value:e.http.port,callback:function(t){e.$set(e.http,"port",t)},expression:"http.port"}})],1),t("b-field",{attrs:{label:"Username","label-position":"on-border"}},[t("b-input",{ref:"http_username",attrs:{placeholder:e.$t("configureServer.username"),expanded:""},model:{value:e.http.username,callback:function(t){e.$set(e.http,"username",t)},expression:"http.username"}})],1),t("b-field",{attrs:{label:"Password","label-position":"on-border"}},[t("b-input",{ref:"http_password",attrs:{placeholder:e.$t("configureServer.password"),expanded:""},model:{value:e.http.password,callback:function(t){e.$set(e.http,"password",t)},expression:"http.password"}})],1)],1),t("b-tab-item",{attrs:{label:"SOCKS5"}},[t("b-field",{attrs:{label:"Name","label-position":"on-border"}},[t("b-input",{ref:"socks5_name",attrs:{placeholder:e.$t("configureServer.servername"),expanded:""},model:{value:e.socks5.name,callback:function(t){e.$set(e.socks5,"name",t)},expression:"socks5.name"}})],1),t("b-field",{attrs:{label:"Host","label-position":"on-border"}},[t("b-input",{ref:"socks5_host",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:e.socks5.host,callback:function(t){e.$set(e.socks5,"host",t)},expression:"socks5.host"}})],1),t("b-field",{attrs:{label:"Port","label-position":"on-border"}},[t("b-input",{ref:"socks5_port",attrs:{required:"",placeholder:e.$t("configureServer.port"),type:"number",expanded:""},model:{value:e.socks5.port,callback:function(t){e.$set(e.socks5,"port",t)},expression:"socks5.port"}})],1),t("b-field",{attrs:{label:"Username","label-position":"on-border"}},[t("b-input",{ref:"socks5_username",attrs:{placeholder:e.$t("configureServer.username"),expanded:""},model:{value:e.socks5.username,callback:function(t){e.$set(e.socks5,"username",t)},expression:"socks5.username"}})],1),t("b-field",{attrs:{label:"Password","label-position":"on-border"}},[t("b-input",{ref:"socks5_password",attrs:{placeholder:e.$t("configureServer.password"),expanded:""},model:{value:e.socks5.password,callback:function(t){e.$set(e.socks5,"password",t)},expression:"socks5.password"}})],1)],1)],1)],1),e.readonly?e._e():t("footer",{staticClass:"modal-card-foot flex-end"},[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.saveApply"))+" ")])])])},Qe=[],Ke={name:"ModalServer",props:{which:{type:Object,default(){return null}},readonly:{type:Boolean,default:!1}},data:()=>({vlessVersion:0,v2ray:{ps:"",add:"",port:"",id:"",flow:"",aid:"",net:"tcp",type:"none",host:"",path:"",tls:"none",fp:"",pbk:"",sid:"",spx:"",alpn:"",scy:"auto",v:"",allowInsecure:!1,protocol:"vmess"},ss:{method:"aes-128-gcm",plugin:"",obfs:"http",tls:"",path:"/",mode:"websocket",host:"",password:"",server:"",port:"",name:"",protocol:"ss",impl:""},ssr:{method:"aes-128-cfb",password:"",server:"",port:"",name:"",proto:"origin",protoParam:"",obfs:"plain",obfsParam:"",protocol:"ssr"},trojan:{name:"",server:"",peer:"",host:"",path:"",allowInsecure:!1,port:"",password:"",method:"origin",ssCipher:"aes-128-gcm",ssPassword:"",obfs:"none",protocol:"trojan"},http:{username:"",password:"",host:"",port:"",protocol:"http",name:""},socks5:{username:"",password:"",host:"",port:"",protocol:"socks5",name:""},tabChoice:0}),mounted(){null!==this.which&&this.$axios({url:`${localStorage["backendAddress"]}/api/sharingAddress`,method:"get",params:{touch:this.which}}).then((e=>{v(e,this,(()=>{e.data.data.sharingAddress.toLowerCase().startsWith("vmess://")||e.data.data.sharingAddress.toLowerCase().startsWith("vless://")?(this.v2ray=this.resolveURL(e.data.data.sharingAddress),this.tabChoice=0):e.data.data.sharingAddress.toLowerCase().startsWith("ss://")?(this.ss=this.resolveURL(e.data.data.sharingAddress),this.tabChoice=1):e.data.data.sharingAddress.toLowerCase().startsWith("ssr://")?(this.ssr=this.resolveURL(e.data.data.sharingAddress),this.tabChoice=2):e.data.data.sharingAddress.toLowerCase().startsWith("trojan://")||e.data.data.sharingAddress.toLowerCase().startsWith("trojan-go://")?(this.trojan=this.resolveURL(e.data.data.sharingAddress),this.tabChoice=3):e.data.data.sharingAddress.toLowerCase().startsWith("http://")||e.data.data.sharingAddress.toLowerCase().startsWith("https://")?(this.http=this.resolveURL(e.data.data.sharingAddress),this.tabChoice=4):e.data.data.sharingAddress.toLowerCase().startsWith("socks5://")&&(this.socks5=this.resolveURL(e.data.data.sharingAddress),this.tabChoice=5),this.$nextTick((()=>{this.readonly&&(this.$refs.section.querySelectorAll("input, textarea").forEach((e=>e.readOnly="readOnly")),this.$refs.section.querySelectorAll("select").forEach((e=>{const t=e.querySelector(`option[value="${e.value}"]`).textContent;console.log(e.value,t),e.outerHTML=`<input type="text" class="input" readonly="readonly" value="${t}">`})))}))}))}))},methods:{variant(){return localStorage["variant"]?.toLowerCase()||"v2ray"},handleV2rayProtocolSwitch(){},resolveURL(e){if(e.toLowerCase().startsWith("vmess://")){let t=JSON.parse(E.Base64.decode(e.substring(e.indexOf("://")+3)));return t.ps=decodeURIComponent(t.ps),t.tls=t.tls||"none",t.type=t.type||"none",t.scy=t.scy||"auto",t.protocol=t.protocol||"vmess",t}if(e.toLowerCase().startsWith("vless://")){let t=g(e);const s={ps:decodeURIComponent(t.hash),add:t.host,port:t.port,id:decodeURIComponent(t.username),flow:t.params.flow||"",net:t.params.type||"tcp",type:t.params.headerType||"none",host:t.params.host||"",path:t.params.path||t.params.serviceName||"",alpn:t.params.alpn||"",sni:t.params.sni||"",tls:t.params.security||"none",fp:t.params.fp||"",pbk:t.params.pbk||"",sid:t.params.sid||"",spx:t.params.spx||"",allowInsecure:t.params.allowInsecure||!1,protocol:"vless"};return""!==s.alpn&&(s.alpn=decodeURIComponent(s.alpn)),"mkcp"!==s.net&&"kcp"!==s.net||(s.path=t.params.seed),console.log(s),s}if(e.toLowerCase().startsWith("ss://")){let s,o=g(e);if(o.password)s=[o.username,o.password];else try{o.username=E.Base64.decode(decodeURIComponent(o.username)),s=o.username.split(":"),s.length>2&&(s[1]=s.slice(1).join(":"),s=s.slice(0,2))}catch(t){}console.log(s),o.hash=decodeURIComponent(o.hash);let a={method:s[0],password:s[1],server:o.host,port:o.port,name:o.hash,obfs:"http",plugin:"",protocol:"ss",impl:""};if(o.params.plugin){o.params.plugin=decodeURIComponent(o.params.plugin);const e=o.params.plugin.split(";");switch(a.plugin=e[0],a.plugin){case"obfs-local":case"simpleobfs":a.plugin="simple-obfs";break;case"v2ray-plugin":a.tls="",a.mode="websocket";break}for(let t=1;t<e.length;t++){const s=e[t].split("=");switch(s[0]){case"obfs":a.obfs=s[1];break;case"host":case"obfs-host":a.host=s[1];break;case"path":case"obfs-path":a.path=s[1];break;case"mode":a.mode=s[1];break;case"tls":a.tls="tls";break;case"impl":a.impl=s[1]}}}return a}if(e.toLowerCase().startsWith("ssr://")){e=E.Base64.decode(e.substr(6));let t=e.split("/?"),s=t[1].split("&"),o={};for(let e of s){let[t,s]=e.split("=",2);s=E.Base64.decode(s),o[t]=s}let a=t[0].split(":");return a.length>6&&(a[a.length-6]=a.slice(0,a.length-5).join(":"),a=a.slice(a.length-6)),a[5]=E.Base64.decode(a[5]),{method:a[3],password:a[5],server:a[0],port:a[1],name:o["remarks"],proto:a[2],protoParam:o["protoparam"],obfs:a[4],obfsParam:o["obfsparam"],protocol:"ssr"}}if(e.toLowerCase().startsWith("trojan://")||e.toLowerCase().startsWith("trojan-go://")){let t=g(e);const s={password:decodeURIComponent(t.username),server:t.host,port:t.port,name:decodeURIComponent(t.hash),peer:t.params.peer||t.params.sni||"",allowInsecure:!0===t.params.allowInsecure||"1"===t.params.allowInsecure,method:"origin",obfs:"none",ssCipher:"aes-128-gcm",protocol:"trojan"};if(e.toLowerCase().startsWith("")){if(console.log(t.params.encryption),t.params.encryption?.startsWith("ss;")){s.method="shadowsocks";const e=t.params.encryption.split(";");s.ssCipher=e[1],s.ssPassword=e[2]}const e={original:"none","":"none",ws:"websocket"};s.obfs=e[t.params.type||""],"ws"===s.obfs&&(s.obfs="websocket"),"websocket"===s.obfs&&(s.host=t.params.host||"",s.path=t.params.path||"/")}return s}if(e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")){let t=g(e);return{username:decodeURIComponent(t.username),password:decodeURIComponent(t.password),host:t.host,port:t.port,protocol:t.protocol,name:decodeURIComponent(t.hash)}}if(e.toLowerCase().startsWith("socks5://")){let t=g(e);return{username:decodeURIComponent(t.username),password:decodeURIComponent(t.password),host:t.host,port:t.port,protocol:t.protocol,name:decodeURIComponent(t.hash)}}return null},generateURL(e){let t,s={},o={};switch(e.protocol){case"vless":return o={type:e.net,flow:e.flow,security:e.tls,fp:e.fp,path:e.path,host:e.host,headerType:e.type,sni:e.sni,allowInsecure:e.allowInsecure},""!==e.alpn&&(o.alpn=e.alpn),"grpc"===e.net&&(o.serviceName=e.path),"mkcp"!==e.net&&"kcp"!==e.net||(o.seed=e.path),"reality"==o.security&&(o.pbk=e.pbk,o.sid=e.sid,o.spx=e.spx),y({protocol:"vless",username:e.id,host:e.add,port:e.port,hash:e.ps,params:o});case"vmess":switch(s=Object.assign({},e),s.net){case"kcp":case"tcp":case"quic":break;default:s.type=""}switch(s.net){case"ws":case"h2":case"http":case"quic":case"grpc":case"kcp":case"mkcp":break;default:if("tcp"===s.net&&"http"===s.type)break;s.path=""}return"vmess://"+E.Base64.encode(JSON.stringify(s));case"ss":if(t=`ss://${E.Base64.encode(`${e.method}:${e.password}`)}@${e.server}:${e.port}/`,e.plugin){const s=[e.plugin];"v2ray-plugin"===e.plugin?(e.tls&&s.push("tls"),"websocket"!==e.mode&&s.push("mode="+e.mode),e.host&&s.push("host="+e.host),e.path&&(e.path.startsWith("/")||(e.path="/"+e.path),s.push("path="+e.path)),e.impl&&s.push("impl="+e.impl)):(s.push("obfs="+e.obfs),s.push("obfs-host="+e.host),"http"===e.obfs&&s.push("obfs-path="+e.path),e.impl&&s.push("impl="+e.impl)),t+=`?plugin=${encodeURIComponent(s.join(";"))}`}return t+=e.name.length?`#${encodeURIComponent(e.name)}`:"",t;case"ssr":return`ssr://${E.Base64.encode(`${e.server}:${e.port}:${e.proto}:${e.method}:${e.obfs}:${E.Base64.encodeURI(e.password)}/?remarks=${E.Base64.encodeURI(e.name)}&protoparam=${E.Base64.encodeURI(e.protoParam)}&obfsparam=${E.Base64.encodeURI(e.obfsParam)}`)}`;case"trojan":return o={allowInsecure:e.allowInsecure},""!==e.peer&&(o.sni=e.peer),t="trojan","origin"===e.method&&"none"===e.obfs||(t="trojan-go",o.type="none"===e.obfs?"original":"ws","shadowsocks"===e.method&&(o.encryption=`ss;${e.ssCipher};${e.ssPassword}`),"ws"===o.type&&(o.host=e.host||"",o.path=e.path||"/"),delete o.allowInsecure),y({protocol:t,username:e.password,host:e.server,port:e.port,hash:e.name,params:o});case"http":case"https":return t={protocol:e.protocol+"-proxy",host:e.host,port:e.port,hash:e.name},e.username&&e.password&&Object.assign(t,{username:e.username,password:e.password}),y(t);case"socks5":return t={protocol:"socks5",host:e.host,port:e.port,hash:e.name},e.username&&e.password&&Object.assign(t,{username:e.username,password:e.password}),y(t)}return null},handleNetworkChange(){this.v2ray.type="none","none"===this.v2ray.tls&&"grpc"===this.v2ray.net&&(this.$buefy.toast.open({message:this.$t("setting.messages.grpcShouldWithTls"),type:"is-warning",position:"is-top",queue:!1,duration:5e3}),this.$nextTick((()=>{this.v2ray.tls="tls"})))},async handleClickSubmit(){let e=!0;for(let s in this.$refs){if(!this.$refs.hasOwnProperty(s))continue;if(0===this.tabChoice&&!s.startsWith("v2ray_"))continue;if(1===this.tabChoice&&!s.startsWith("ss_"))continue;if(2===this.tabChoice&&!s.startsWith("ssr_"))continue;if(3===this.tabChoice&&!s.startsWith("trojan_"))continue;if(4===this.tabChoice&&!s.startsWith("http_"))continue;if(5===this.tabChoice&&!s.startsWith("socks5_"))continue;let t=this.$refs[s];t&&(t.$el.offsetParent&&t.hasOwnProperty("checkHtml5Validity")&&"function"===typeof t.checkHtml5Validity&&!t.checkHtml5Validity()&&(console.error("validate failed",t),e=!1))}if(!e)return;let t="";if(0===this.tabChoice){if(!0===this.v2ray.allowInsecure||"true"===this.v2ray.allowInsecure){const{result:e}=await this.$buefy.dialog.confirm({title:this.$t("InSecureConfirm.title"),message:this.$t("InSecureConfirm.message"),confirmText:this.$t("InSecureConfirm.confirm"),cancelText:this.$t("InSecureConfirm.cancel"),type:"is-danger",hasIcon:!0,onConfirm:()=>!0,onCancel:()=>!1});if(!e)return}t=this.generateURL(this.v2ray)}else 1===this.tabChoice?t=this.generateURL(this.ss):2===this.tabChoice?t=this.generateURL(this.ssr):3===this.tabChoice?t=this.generateURL(this.trojan):4===this.tabChoice?t=this.generateURL(this.http):5===this.tabChoice&&(t=this.generateURL(this.socks5));this.$emit("submit",t)}}},Ye=Ke,Je=(0,L.Z)(Ye,Ze,Qe,!1,null,null,null),Xe=Je.exports,et=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"400px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("configureSubscription.title")))])]),t("section",{staticClass:"modal-card-body"},[t("b-field",{attrs:{label:"REMARKS"}},[t("b-input",{attrs:{placeholder:e.$t("subscription.remarks")},model:{value:e.which.remarks,callback:function(t){e.$set(e.which,"remarks",t)},expression:"which.remarks"}})],1)],1),t("footer",{staticClass:"modal-card-foot flex-end"},[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.saveApply"))+" ")])])])},tt=[],st={name:"ModalSubscription",props:{which:{type:Object,default(){return null}}},methods:{handleClickSubmit(){this.$emit("submit",this.which)}}},ot=st,at=(0,L.Z)(ot,et,tt,!1,null,null,null),nt=at.exports,rt={name:"Node",components:{ModalSubscription:nt,ModalServer:Xe},filters:{unix2datetime(e){e=ce.unix(e);let t=ce();return"zh"===localStorage["_lang"]?t=t.locale("zh-cn"):"en"===localStorage["_lang"]&&(t=t.locale("en")),t.to(e)}},props:{outbound:{type:String,default:"proxy"},observatory:{type:Object,default(){return null}}},data(){return{enterReducedSidebar:!1,showSidebar:!1,importWhat:"",showModalImport:!1,showModalImportInBatch:!1,currentPage:{servers:1,subscriptions:1},tableData:{servers:[],subscriptions:[],connectedServer:[]},checkedRows:[],ready:!1,tab:0,runningState:{running:this.$t("common.checkRunning"),connectedServer:null,outboundToServerName:{}},showModalServer:!1,which:null,modalServerReadOnly:!1,showModalSubscription:!1,connectedServerInTab:{subscriptionServer:Array(100),server:!1},connectedServerInfo:[],overHeight:!1,clipboard:null}},computed:{loadBalanceValid(){return"true"===localStorage["loadBalanceValid"]}},watch:{"runningState.running"(){this.updateConnectView()},outbound(){this.updateConnectView()},tableData(e){for(const t of e.subscriptions)t.status=ce(t.status).tz(ce.tz.guess()).format("YYYY-MM-DD HH:mm:ss")},observatory(e){for(const o of e.body.outboundStatus)this.connectedServerInfo.some((e=>{if(o.which._type===e.which._type&&o.which.id===e.which.id&&o.which.sub===e.which.sub){for(const t in o)"which"!==t&&o.hasOwnProperty(t)&&(e.info[t]=o[t]);return!0}return!1}));let t=99999,s=-1;this.connectedServerInfo.forEach(((e,o)=>{e.selected=!1,e.info.delay&&e.info.delay<t&&(t=e.info.delay,s=o)})),s>=0&&(this.connectedServerInfo[s].selected=!0)}},created(){this.$axios({url:`${localStorage["backendAddress"]}/api/touch`}).then((e=>{this.refreshTableData(e.data.data.touch,e.data.data.running),this.locateTabToConnected(),this.ready=!0}))},beforeDestroy(){this.clipboard.destroy()},mounted(){document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1),this.clipboard=new(F())(".sharingAddressTag"),this.clipboard.on("success",(e=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",queue:!1}),e.clearSelection()})),this.clipboard.on("error",(e=>{this.$buefy.toast.open({message:this.$t("common.fail")+", error:"+e.toLocaleString(),type:"is-warning",position:"is-top",queue:!1})}));const e=this;let t=null;window.addEventListener("scroll",(s=>{clearTimeout(t),setTimeout((()=>{t=null,e.overHeight=s.target.scrollingElement.scrollTop>50}),100)}))},methods:{refreshTableData(e,t){e.servers.forEach((e=>{e.connected=!1})),e.subscriptions.forEach((e=>{e.servers.forEach((e=>{e.connected=!1}))})),this.tableData=e,void 0!==t&&Object.assign(this.runningState,{running:t?this.$t("common.isRunning"):this.$t("common.notRunning"),connectedServer:e.connectedServer})},handleClickConnectedServer(e){const t=this;this.locateTabToConnected(e);let s=-1;s="server"===e._type?1:2+e.sub;let o=0;const a=5,n=500;function r(){if(document.querySelector(`.main-tabs > .tabs > ul > li:nth-child(${1+s})`).classList.contains("is-active"))console.log("ok"),t.$nextTick((()=>{let o=document.querySelectorAll(".main-tabs .b-table");"subscriptionServer"===e._type&&(s=2),o=o[s].querySelectorAll("table > tbody > tr");const a=Array.from(o).find((t=>parseInt(t.querySelector('td[data-label="ID"]')?.textContent)===e.id));if(!a)return void console.warn("node not found");a.scrollIntoView({block:"center",inline:"center"});let n="highlight-row-connected";t.runningState.running!==t.$t("common.isRunning")&&(n="highlight-row-disconnected"),a.classList.add(n),setTimeout((()=>{a.classList.remove(n),setTimeout((()=>{a.classList.add(n),setTimeout((()=>{a.classList.remove(n)}),200)}),50)}),200)}));else{if(o++,o>a)return;setTimeout(r,n)}}r()},handleClickImportInBatch(){this.showModalImportInBatch=!0},handleModalImportShow(){this.$refs.importInput.focus()},handleImportEnter(e){13===e.keyCode&&this.handleClickImportConfirm()},handleFileChange(e){const t=this,s=e.target.files[0];let o=document.querySelector("#QRCodeImport");if(o.outerHTML=o.outerHTML,this.$nextTick((()=>{document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1)})),!s.type.match(/image\/.*/))return void this.$buefy.toast.open({message:this.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1});const a=new FileReader;a.onload=function(e){const s=e.target.result,o=new j.h;o.scan(s).then((e=>{console.log(e),t.handleClickImportConfirm(e.data)})).catch((e=>{console.error(e),t.$buefy.toast.open({message:t.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1})}))},a.readAsDataURL(s)},sortNumberServers(e,t,s){return s?e.servers.length>t.servers.length?1:-1:e.servers.length<t.servers.length?1:-1},sortping(e,t,s){return isNaN(parseInt(e.pingLatency))?1:isNaN(parseInt(t.pingLatency))?-1:s?parseInt(e.pingLatency)>parseInt(t.pingLatency)?1:-1:parseInt(e.pingLatency)<parseInt(t.pingLatency)?1:-1},sortConnections(e,t,s){return e.connected&&!t.connected?-1:!e.connected&&t.connected?1:s?isNaN(parseInt(e.pingLatency))?1:isNaN(parseInt(t.pingLatency))?-1:parseInt(e.pingLatency)>parseInt(t.pingLatency)?1:-1:isNaN(parseInt(e.pingLatency))?-1:isNaN(parseInt(t.pingLatency))||parseInt(e.pingLatency)<parseInt(t.pingLatency)?1:-1},filterConnectedServer(e,t=this.outbound){const s=[];if(e instanceof Array){for(let o of e)o.outbound===t&&s.push(o);return s.length?s:null}return e},updateConnectView(){let e=this.runningState.connectedServer;if(this.runningState.outboundToServerName={},this.runningState.connectedServer?.forEach((e=>{const t=f(this.tableData,e);this.runningState.outboundToServerName[e.outbound]&&"number"!==typeof this.runningState.outboundToServerName[e.outbound]&&(this.runningState.outboundToServerName[e.outbound]=1),"number"===typeof this.runningState.outboundToServerName[e.outbound]?this.runningState.outboundToServerName[e.outbound]++:this.runningState.outboundToServerName[e.outbound]=t.name})),e=this.filterConnectedServer(e),this.tableData.servers.forEach((e=>{e.connected&&(e.connected=!1)})),this.tableData.subscriptions.forEach((e=>{e.servers.forEach((e=>{e.connected&&(e.connected=!1)}))})),e){let t=f(this.tableData,e);if(t instanceof Array)for(const e of t)e.connected=!0;else t.connected=!0,t=[t];this.connectedServerInfo=[];for(const s in t){let o=null;"subscriptionServer"===e[s]._type&&(o=this.tableData.subscriptions[e[s].sub].host.toUpperCase()),this.connectedServerInfo.push({info:{...t[s],subscription_name:o,alive:null,delay:null,outbound_tag:null,last_seen_time:null,last_error_reason:null,last_try_time:null},which:e[s],showContent:!0,selected:!1})}}else this.connectedServerInfo=[];this.connectedServerInfo.sort(((e,t)=>e.info.name>t.info.name)),this.connectedServerInTab.server=!1;for(const t in this.connectedServerInTab.subscriptionServer)this.connectedServerInTab.subscriptionServer[t]=!1;if(e){let t=e;e instanceof Array||(t=[e]);for(const e of t)"server"===e._type?this.connectedServerInTab.server=!0:"subscriptionServer"===e._type&&(this.connectedServerInTab.subscriptionServer[e.sub]=!0)}this.$emit("input",this.runningState)},locateTabToConnected(e){let t=e;if(t||(t=this.runningState.connectedServer),!t)return;if(t=this.filterConnectedServer(t),!t)return;t instanceof Array&&(t=t[0]);let s=t.sub,o=2,a=1;t._type===h.SubscriptionServerType?this.tab=s+o:t._type===h.ServerType&&(this.tab=a)},handleClickImportQRCode(){document.querySelector("#QRCodeImport").click()},handleClickImport(){this.showModalImport=!0},handleClickImportConfirm(e){return"string"!=typeof e&&(e=null),this.$axios({url:`${localStorage["backendAddress"]}/api/import`,method:"post",data:{url:e||this.importWhat}}).then((e=>{"SUCCESS"===e.data.code?(this.refreshTableData(e.data.data.touch,e.data.data.running),this.updateConnectView(),this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",queue:!1}),this.showModalImport=!1,this.showModalImportInBatch=!1,this.importWhat=""):this.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",queue:!1})}))},deleteSelectedServers(){this.$axios({url:`${localStorage["backendAddress"]}/api/touch`,method:"delete",data:{touches:this.checkedRows.map((e=>({id:e.id,_type:e._type})))}}).then((e=>{"SUCCESS"===e.data.code?(this.refreshTableData(e.data.data.touch,e.data.data.running),this.checkedRows=[],this.updateConnectView()):this.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",duration:5e3,queue:!1})}))},handleClickDelete(){this.$buefy.dialog.confirm({title:this.$t("delete.title"),message:this.$t("delete.message"),confirmText:this.$t("operations.delete"),cancelText:this.$t("operations.cancel"),type:"is-danger",hasIcon:!0,icon:" iconfont icon-alert",onConfirm:()=>this.deleteSelectedServers()})},handleClickAboutConnection(e,t){let s;e.connected?this.$axios({url:`${localStorage["backendAddress"]}/api/connection`,method:"delete",data:{id:e.id,_type:e._type,sub:t,outbound:this.outbound}}).then((t=>{"SUCCESS"===t.data.code?(e.connected=!1,Object.assign(this.runningState,{running:t.data.data.running?this.$t("common.isRunning"):this.$t("common.notRunning"),connectedServer:t.data.data.touch.connectedServer}),this.updateConnectView()):this.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",duration:5e3,queue:!1})})):je(this.$axios({url:`${localStorage["backendAddress"]}/api/connection`,method:"post",data:{id:e.id,_type:e._type,sub:t,outbound:this.outbound},cancelToken:new se.CancelToken((function(e){s=e}))}).then((e=>{"SUCCESS"===e.data.code?(Object.assign(this.runningState,{running:e.data.data.running?this.$t("common.isRunning"):this.$t("common.notRunning"),connectedServer:e.data.data.touch.connectedServer}),this.$nextTick((()=>{this.updateConnectView()}))):(this.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",duration:5e3,queue:!1}),this.deleteSelectedServers())})),3e3,s)},handleClickLatency(e){let t=JSON.stringify(this.checkedRows.map((e=>{let t=this.tableData.subscriptions.findIndex((t=>t.servers.some((t=>e===t))));return{id:e.id,_type:e._type,sub:-1===t?null:t}})));this.checkedRows.forEach((e=>e.pingLatency="testing..."));let s=setTimeout((()=>{this.$buefy.toast.open({message:this.$t("latency.message"),type:"is-primary",position:"is-top",duration:5e3,queue:!1})}),12e3);this.$axios({url:`${localStorage["backendAddress"]}/api`+(e?"/pingLatency":"/httpLatency"),params:{whiches:t},timeout:0}).then((e=>{v(e,this,(()=>{e.data.data.whiches.forEach((e=>{let t=f(this.tableData,e);t.pingLatency=e.pingLatency})),this.updateConnectView()}),(()=>{this.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",queue:!1,duration:5e3}),this.checkedRows.forEach((e=>e.pingLatency=""))}))})).finally((()=>{clearTimeout(s)}))},handleTabsChange(e){this.checkedRows=[]},isCheckedRowsDeletable(){return this.checkedRows.length>0&&this.checkedRows.every((e=>e._type!==h.SubscriptionServerType))},isCheckedRowsPingable(){return this.checkedRows.length>0&&this.checkedRows.some((e=>e._type===h.ServerType||e._type===h.SubscriptionServerType))},handleClickShare(e,t){const s={[h.SubscriptionServerType]:"SERVER",[h.ServerType]:"SERVER",[h.SubscriptionType]:"SUBSCRIPTION"};this.$axios({url:`${localStorage["backendAddress"]}/api/sharingAddress`,method:"get",params:{touch:{id:e.id,_type:e._type,sub:t}}}).then((t=>{v(t,this,(()=>{this.$buefy.modal.open({width:500,component:Z,props:{title:s[e._type],sharingAddress:t.data.data.sharingAddress,shortDesc:e.name||e.host||e.address,type:e._type}})}))}))},handleClickUpdateSubscription(e){this.$axios({url:`${localStorage["backendAddress"]}/api/subscription`,method:"put",data:{id:e.id,_type:e._type}}).then((e=>{v(e,this,(()=>{this.refreshTableData(e.data.data.touch,e.data.data.running),this.updateConnectView(),this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",duration:5e3,queue:!1})}))}))},handleClickCreate(){this.modalServerReadOnly=!1,this.which=null,this.showModalServer=!0},handleClickModifyServer(e){this.modalServerReadOnly=!1,this.which=Object.assign({},e),this.which.servers=[],this.showModalServer=!0},handleClickViewServer(e,t){this.modalServerReadOnly=!0,this.which={...e,sub:t},this.showModalServer=!0},handleModalServerSubmit(e){this.$axios({url:`${localStorage["backendAddress"]}/api/import`,method:"post",data:{url:e,which:this.which},timeout:0}).then((e=>{v(e,this,(()=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",duration:3e3,queue:!1}),this.showModalServer=!1,this.refreshTableData(e.data.data.touch,e.data.data.running),this.updateConnectView()}))}))},handleClickModifySubscription(e){this.which=Object.assign({},e),this.which.servers=[],this.showModalSubscription=!0},handleModalSubscriptionSubmit(e){this.$axios({url:`${localStorage["backendAddress"]}/api/subscription`,method:"patch",data:{subscription:e}}).then((e=>{v(e,this,(()=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",duration:3e3,queue:!1}),this.showModalSubscription=!1,this.refreshTableData(e.data.data.touch,e.data.data.running),this.updateConnectView()}))}))}}},it=rt,lt=(0,L.Z)(it,Be,Ge,!1,null,"c7449e42",null),ct=lt.exports,dt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(" "+e._s(e.outbound)+" - "+e._s(e.$t("common.outboundSetting"))+" ")])]),t("section",{staticClass:"modal-card-body"},[t("b-field",{attrs:{label:"ProbeURL","label-position":"on-border"}},[t("b-input",{ref:"probe_url",attrs:{required:"",expanded:""},model:{value:e.setting.probeURL,callback:function(t){e.$set(e.setting,"probeURL",t)},expression:"setting.probeURL"}})],1),t("b-field",{attrs:{label:"ProbeInterval","label-position":"on-border"}},[t("b-input",{ref:"probe_interval",attrs:{required:"",expanded:""},model:{value:e.setting.probeInterval,callback:function(t){e.$set(e.setting,"probeInterval",t)},expression:"setting.probeInterval"}})],1),t("b-field",{attrs:{label:"Type","label-position":"on-border"}},[t("b-select",{attrs:{expanded:""},model:{value:e.setting.type,callback:function(t){e.$set(e.setting,"type",t)},expression:"setting.type"}},[t("option",{attrs:{value:"leastping"}},[e._v(" "+e._s(e.$t("setting.options.leastPing"))+" ")])])],1)],1),t("footer",{staticClass:"modal-card-foot flex-end"},[t("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:e.handleClickDelete}},[e._v(" "+e._s(e.$t("operations.delete"))+" ")]),t("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"-moz-available"}},[t("button",{staticClass:"button",on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("operations.cancel"))+" ")]),t("button",{staticClass:"button is-primary",on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$t("operations.confirm"))+" ")])])])])},pt=[],ut={name:"ModalOutboundSetting",i18n:T,props:{outbound:{type:String,required:!0}},data:()=>({setting:{probeURL:"",probeInterval:"",type:""},backendReady:!1}),created(){this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,params:{outbound:this.outbound}}).then((e=>{v(e,this,(()=>{Object.assign(this.setting,e.data.data.setting)}))}))},methods:{handleClickDelete(){const e=this;this.$buefy.dialog.confirm({title:e.$t("delete.title"),message:e.$t("outbound.deleteMessage",{outboundName:e.outbound}),confirmText:e.$t("operations.delete"),cancelText:e.$t("operations.cancel"),type:"is-danger",hasIcon:!0,icon:" iconfont icon-alert",onConfirm:()=>{e.$emit("delete"),e.$parent.close()}})},handleClickSubmit(){let e=!0;for(let t in this.$refs){if(!this.$refs.hasOwnProperty(t))continue;let s=this.$refs[t];s&&(s.$el.offsetParent&&s.hasOwnProperty("checkHtml5Validity")&&"function"===typeof s.checkHtml5Validity&&!s.checkHtml5Validity()&&(console.error("validate failed",s),e=!1))}if(!e)return;this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,method:"put",data:{outbound:this.outbound,setting:this.setting}}).then((e=>{v(e,this,(()=>{this.$buefy.toast.open({message:e.data.code,type:"is-primary",position:"is-top",queue:!1}),this.$parent.close()})),"SUCCESS"!==e.data.code&&e.data.message.indexOf("invalid config")>=0&&(this.$parent.$parent.runningState.running=this.$t("common.notRunning"))}))}}},ht=ut,mt=(0,L.Z)(ht,dt,pt,!1,null,null,null),bt=mt.exports,ft=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card",staticStyle:{width:"65rem"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(" "+e._s(e.$tc("log.logModalTitle"))+" ")])]),t("section",{ref:"section",class:{"modal-card-body":!0}},[t("b-field",{attrs:{label:e.$tc("log.refreshInterval")}},[t("b-select",{on:{input:e.changeInterval},model:{value:e.intervalTime,callback:function(t){e.intervalTime=t},expression:"intervalTime"}},e._l(e.intervalCandidate,(function(s){return t("option",{key:s,domProps:{value:s}},[e._v(" "+e._s(`${s} ${e.$tc("log.seconds")}`)+" ")])})),0)],1),t("b-field",{staticStyle:{"margin-bottom":"2rem"},attrs:{label:"Logs"}},[t("RecycleScroller",{ref:"logScroller",staticClass:"log-scroller",attrs:{items:e.items,"item-size":e.itemSize,"grid-items":1,buffer:1e3},scopedSlots:e._u([{key:"default",fn:function({item:e}){return[t("hightlight-log",{staticClass:"text",attrs:{text:e.text}})]}}])})],1),t("b-field",[t("b-switch",{on:{input:e.changeScoll},model:{value:e.autoScoll,callback:function(t){e.autoScoll=t},expression:"autoScoll"}},[e._v(" "+e._s(e.$tc("log.autoScoll"))+" ")])],1)],1)])},vt=[],gt=s(837),yt=(s(3249),s(9034));gt.Z.registerLanguage("accesslog",yt.Z);var wt,St,kt={name:"HightlightLog",props:{text:{type:String,default:""}},render(e){return e("div",{class:"log language-accesslog",domProps:{innerHTML:gt.Z.highlight(this.text,{language:"accesslog",ignoreIllegals:!0}).value}})}},_t=kt,xt=(0,L.Z)(_t,wt,St,!1,null,"7c02a99b",null),$t=xt.exports,Ct={components:{HightlightLog:$t},data(){return{items:[],endOfLine:!0,currentSkip:0,intervalId:0,intervalTime:5,intervalCandidate:[2,5,10,15],itemSize:28,autoScoll:!0}},created(){this.autoScoll=!("false"===localStorage.getItem("log.autoScoll")),this.$axios({url:`${localStorage["backendAddress"]}/api/logger`}).then(this.updateLog)},mounted(){this.intervalId=setInterval((()=>{this.$axios({url:`${localStorage["backendAddress"]}/api/logger`,params:{skip:this.currentSkip}}).then(this.updateLog)}),1e3*this.intervalTime)},destroyed(){clearInterval(this.intervalId)},methods:{updateLog(e){if(e.data.length&&0!==e.data.length){const t=this.items.length,s=e.data.split("\n").map(((e,s)=>({text:e,id:t+s})));this.endOfLine?this.items=this.items.concat(s):(this.items[this.items.length-1].text+=s[0].text,this.items=this.items.concat(s.slice(1))),this.endOfLine=s[s.length-1].text.endsWith("\n"),this.currentSkip+=new Blob([e.data]).size,this.autoScoll&&this.$refs.logScroller.scrollToItem(this.items.length-1)}},changeInterval(e){this.intervalTime=e,clearInterval(this.intervalId),this.intervalId=setInterval((()=>{this.$axios({url:`${localStorage["backendAddress"]}/api/logger`,params:{skip:this.currentSkip}}).then(this.updateLog)}),1e3*this.intervalTime)},changeScoll(e){localStorage.setItem("log.autoScoll",e)}}},Pt=Ct,At=(0,L.Z)(Pt,ft,vt,!1,null,"b936132c",null),Tt=At.exports,Rt={components:{ModalCustomAddress:J,node:ct},data(){return{ws:null,observatory:null,showSidebar:!0,statusMap:{[this.$t("common.checkRunning")]:"is-light",[this.$t("common.notRunning")]:"is-danger",[this.$t("common.isRunning")]:"is-success"},coverStatusText:"",runningState:{running:this.$t("common.checkRunning"),connectedServer:null,outboundToServerName:{}},showCustomPorts:!1,langs:[{flag:"zh",alt:"简体中文"},{flag:"en",alt:"English"},{flag:"fa",alt:"فارسی"}],outboundName:"proxy",outbounds:["proxy"],outboundDropdownHover:{},updateOutboundDropdown:!0}},computed:{username(){let e=localStorage["token"];if(!e)return this.$t("common.notLogin");let t=JSON.parse(E.Base64.decode(e.split(".")[1]));return t["uname"]},isMobile(){return window.screen.width<800}},mounted(){console.log("app created");let e=localStorage.getItem("backendAddress");if(e){let t=g(e);document.title=`v2rayA - ${t.host}:${t.port}`}this.$axios({url:`${localStorage["backendAddress"]}/api/version`}).then((e=>{if("SUCCESS"===e.data.code){let t={message:this.$t(e.data.data.dockerMode?"welcome.docker":"welcome.default",{version:e.data.data.version}),type:"is-dark",position:"is-top",duration:3e3,queue:!1};e.data.data.foundNew&&(t.duration=5e3,t.message+=". "+this.$t("welcome.newVersion",{version:e.data.data.remoteVersion}),t.type="is-success"),this.$buefy.toast.open(t),localStorage["docker"]=e.data.data.dockerMode,localStorage["version"]=e.data.data.version,!1===e.data.data.serviceValid?this.$buefy.toast.open({message:this.$t("version.v2rayInvalid"),type:"is-danger",position:"is-top",queue:!1,duration:1e4}):e.data.data.v5||this.$buefy.toast.open({message:this.$t("version.v2rayNotV5"),type:"is-danger",position:"is-top",queue:!1,duration:1e4}),localStorage["lite"]=e.data.data.lite,localStorage["loadBalanceValid"]=e.data.data.loadBalanceValid,localStorage["variant"]=e.data.data.variant}})),this.$axios({url:`${localStorage["backendAddress"]}/api/outbounds`}).then((e=>{"SUCCESS"===e.data.code&&(this.outbounds=e.data.data.outbounds)})),this.connectWsMessage()},beforeDestroy(){this.ws&&this.ws.close()},methods:{connectWsMessage(){const e=this;let t=`${localStorage["backendAddress"]}/api`;t.trim()&&!t.startsWith("/")||(t=location.protocol+"//"+location.host+t);let s="ws",o=g(t);"https"===o.protocol&&(s="wss"),t=`${s}://${o.host}:${o.port}/api/message?Authorization=${encodeURIComponent(localStorage["token"])}`,this.ws&&this.ws.close();const a=new WebSocket(t);a.onopen=()=>{},a.onmessage=t=>{t.data&&e.handleMessage(JSON.parse(t.data))},a.onclose=()=>{a.onmessage=null,e.ws=null,setTimeout((()=>{null===e.ws&&e.connectWsMessage()}),3e3)},this.ws=a},handleMessage(e){"observatory"===e.type&&e.body.outboundName===this.outboundName&&(this.observatory=e)},handleOutboundDropdownActiveChange(e){e&&(this.updateOutboundDropdown=!1,this.updateOutboundDropdown=!0)},outboundNameDecorator(e){return this.runningState.outboundToServerName[e]?"number"===typeof this.runningState.outboundToServerName[e]?`${e} - ${this.$t("common.loadBalance")} (${this.runningState.outboundToServerName[e]})`:`${e} - ${this.runningState.outboundToServerName[e]}`:e},handleAddOutbound(){this.$buefy.dialog.prompt({message:this.$t("outbound.addMessage"),inputAttrs:{maxlength:10},trapFocus:!0,onConfirm:e=>{let t;je(this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,method:"post",data:{outbound:e},cancelToken:new se.CancelToken((function(e){t=e}))}).then((e=>{"SUCCESS"===e.data.code?(this.$buefy.toast.open({message:this.$t("common.success"),type:"is-success",duration:2e3,position:"is-top",queue:!1}),this.outbounds=e.data.data.outbounds):this.$buefy.toast.open({message:e.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})})),3e3,t)}})},handleDeleteOutbound(e){let t;je(this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,method:"delete",data:{outbound:e},cancelToken:new se.CancelToken((function(e){t=e}))}).then((t=>{"SUCCESS"===t.data.code?(this.$buefy.toast.open({message:this.$t("common.success"),type:"is-success",duration:2e3,position:"is-top",queue:!1}),this.outbounds=t.data.data.outbounds,this.outboundName===e&&(this.outboundName="proxy"),e in this.runningState.outboundToServerName&&(this.runningState.connectedServer=this.runningState.connectedServer.filter((t=>t.outbound!==e)))):this.$buefy.toast.open({message:t.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})})),3e3,t)},handleClickOutboundSetting(e,t){e.stopPropagation();const s=this;this.$buefy.modal.open({parent:this,component:bt,hasModalCard:!0,canCancel:!0,props:{outbound:t},events:{delete(){s.handleDeleteOutbound(t)}}})},handleClickLang(e){localStorage["_lang"]=e,location.reload()},handleOnOutboundMouseEnter(e){this.outboundDropdownHover={[e]:!0}},handleOnOutboundMouseLeave(){this.outboundDropdownHover={}},handleOnStatusMouseEnter(){this.runningState.running===this.$t("common.isRunning")?this.coverStatusText=this.$t("v2ray.stop"):this.runningState.running===this.$t("common.notRunning")&&(this.coverStatusText=this.$t("v2ray.start"))},handleOnStatusMouseLeave(){this.coverStatusText=""},handleClickSetting(){const e=this;this.$buefy.modal.open({parent:this,component:ze,hasModalCard:!0,canCancel:!0,events:{clickPorts(){e.showCustomPorts=!0}}})},handleClickAbout(){this.$buefy.modal.open({width:640,content:`\n<div class="modal-card" style="margin:auto">\n                    <header class="modal-card-head">\n                        <p class="modal-card-title">mzz2017 / v2rayA</p>\n                    </header>\n                    <section class="modal-card-body lazy">\n                        ${this.$t("about")}\n                    </section>\n                    <footer class="modal-card-foot">\n                        <a class="is-link" href="https://github.com/v2rayA/v2rayA" target="_blank">\n                          <img class="leave-right" src="https://img.shields.io/github/stars/mzz2017/v2rayA.svg?style=social" alt="stars">\n                          <img class="leave-right" src="https://img.shields.io/github/forks/mzz2017/v2rayA.svg?style=social" alt="forks">\n                          <img class="leave-right" src="https://img.shields.io/github/watchers/mzz2017/v2rayA.svg?style=social" alt="watchers">\n                        </a>\n                    </footer>\n                </div>\n`})},handleClickStatus(){if(this.runningState.running===this.$t("common.notRunning")){let e;je(this.$axios({url:`${localStorage["backendAddress"]}/api/v2ray`,method:"post",cancelToken:new se.CancelToken((function(t){e=t}))}).then((e=>{"SUCCESS"===e.data.code?Object.assign(this.runningState,{running:this.$t("common.isRunning"),connectedServer:e.data.data.touch.connectedServer}):this.$buefy.toast.open({message:e.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})})),3e3,e)}else this.runningState.running===this.$t("common.isRunning")&&this.$axios({url:`${localStorage["backendAddress"]}/api/v2ray`,method:"delete"}).then((e=>{"SUCCESS"===e.data.code?Object.assign(this.runningState,{running:this.$t("common.notRunning"),connectedServer:e.data.data.touch.connectedServer}):this.$buefy.toast.open({message:e.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})}))},handleClickLogout(){localStorage.removeItem("token"),this.$remount()},handleClickLogs(){this.$buefy.modal.open({parent:this,component:Tt,hasModalCard:!0,canCancel:!0})}}},It=Rt,Lt=(0,L.Z)(It,ne,re,!1,null,"beb9ba3a",null),Mt=Lt.exports;let Dt=null;o.ZP.prototype.$remount=()=>{function e(t){if(t)if("function"!=typeof t.close){if("$children"in t)for(let s in t.$children)e(t.$children[s])}else t.close()}e(Dt),Dt=new o.ZP({i18n:T,store:ae,render:e=>e(Mt)}).$mount("#app")},o.ZP.prototype.$remount();var Ot=s(4110),Ut=s.n(Ot),Nt=s(9387),Vt=s.n(Nt),Wt=s(178),Ht=s.n(Wt);s(3852),s(5054);de().extend(Ut()),de().extend(Ht()),de().extend(Vt()),o.ZP.prototype.$dayjs=de();var jt=s(4801);o.ZP.use(jt.ZP);s(4685);o.ZP.config.productionTip=!1},5904:function(){console.log("backendPort");let e=localStorage.getItem("backendAddress");null==e&&localStorage.setItem("backendAddress","")},5640:function(e,t,s){var o={"./flag_en.svg":867,"./flag_fa.svg":3376,"./flag_zh.svg":6022};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=n,e.exports=a,a.id=5640},867:function(e,t,s){"use strict";e.exports=s.p+"img/flag_en.a4c6b245.svg"},3376:function(e,t,s){"use strict";e.exports=s.p+"img/flag_fa.ea490a86.svg"},6022:function(e,t,s){"use strict";e.exports=s.p+"img/flag_zh.2f2bda24.svg"},39:function(e,t,s){"use strict";e.exports=s.p+"img/switch-menu.740f7d73.svg"},1823:function(e,t,s){"use strict";e.exports=s.p+"img/logo2.ee4eeb96.png"}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,n){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],n=e[d][2];for(var i=!0,l=0;l<o.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="static/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(l)var d=l(s)}for(t&&t(o);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},o=self["webpackChunkv2raya"]=self["webpackChunkv2raya"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(5505)}));o=s.O(o)})();