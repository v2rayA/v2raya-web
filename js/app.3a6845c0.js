(function(){var t={6021:function(t,e,s){"use strict";var o=s(538),a=s(2882),n=s(30);o.ZP.use(a.ZP),n.Z.setOptions({defaultProgrammaticPromise:!0});var i=s(9669),r=s.n(i),l=s(1258),c=s(2724),d=s(7033),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(" "+t._s(t.first?t.$t("register.title"):`${t.$t("login.title")} - v2rayA`)+" ")])]),e("section",{staticClass:"modal-card-body"},[t._m(0),e("b-field",{attrs:{label:t.$t("login.username"),type:"is-success"}},[e("b-input",{ref:"username",nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleEnter.apply(null,arguments)}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("b-field",{attrs:{label:t.$t("login.password"),type:"is-success"}},[e("b-input",{attrs:{type:"password",maxlength:t.first?"32":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleEnter.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.first?e("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-info"}},[e("p",[t._v(t._s(t.$t("register.messages.0")))]),e("p",[t._v(t._s(t.$t("register.messages.1")))]),e("p",[t._v(t._s(t.$t("register.messages.2")))])]):t._e()],1),e("footer",{staticClass:"modal-card-foot flex-end"},[e("b-button",{class:{"is-primary":!t.first,"is-twitter":t.first},on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.first?t.$t("operations.create"):t.$t("operations.login"))+" ")])],1)])},p=[function(){var t=this,e=t._self._c;return e("p",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:s(1823),alt:"v2rayA"}})])}],h=(s(7658),{SubscriptionType:"subscription",ServerType:"server",SubscriptionServerType:"subscriptionServer"});const m=s(4998);function b(t,e){let s=e.id-1,o=e.sub;return e._type===h.ServerType?t.servers[s]:e._type===h.SubscriptionServerType?t.subscriptions[o].servers[s]:null}function f(t,e){if(e instanceof Array){const s=[];for(const o of e){const e=b(t,o);e&&s.push(e)}return s}return b(t,e)}function v(t,e,s,o,a){t.data?"SUCCESS"===t.data.code?s.apply(e):o&&o instanceof Function?o.apply(e):a&&a instanceof Function?a.apply(e):e.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",queue:!1,duration:5e3}):o&&o instanceof Function&&o.apply(e)}function g(t){let e=t,s="",o=!1;if(-1===e.indexOf("://"))e="http://"+e;else switch(s=e.substr(0,e.indexOf("://")),s){case"http":case"https":case"ws":case"wss":break;default:e="http"+e.substr(e.indexOf("://")),o=!0}const a=document.createElement("a");a.href=e;const n={source:t,username:a.username,password:a.password,protocol:o?s:a.protocol.replace(":",""),host:a.hostname,port:a.port?parseInt(a.port):"https"===s||"wss"===s?443:80,query:a.search,params:function(){for(var t,e={},s=a.search.replace(/^\?/,"").split("&"),o=s.length,n=0;n<o;n++)s[n]&&(t=s[n].split("="),e[t[0]]=decodeURIComponent(t[1]));return e}(),file:(a.pathname.match(/\/([^/?#]+)$/i)||[null,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^/])/,"/$1"),relative:(a.href.match(/tps?:\/\/[^/]+(.+)/)||[null,""])[1],segments:a.pathname.replace(/^\//,"").split("/")};return a.remove(),n}function y({username:t,password:e,protocol:s,host:o,port:a,params:n,hash:i,path:r}){const l=m().protocol(s||"http").username(t||"").password(e||"").host(o||"").port(a||80).path(r||"").query(n||{}).hash(i||""),c=l.toString();return c}function w(t){return"string"===typeof t||"number"===typeof t?parseInt(t):"boolean"===typeof t?t?1:0:t}var S=s(7152),k={common:{outboundSetting:"出站设置",setting:"设置",about:"关于",loggedAs:"正在以 <b>{username}</b> 的身份登录",v2rayCoreStatus:"v2ray-core状态",checkRunning:"检测中",isRunning:"正在运行",notRunning:"就绪",notLogin:"未登录",latest:"最新",local:"本地",success:"成功",fail:"失败",message:"提示",none:"无",optional:"可选",loadBalance:"负载均衡",log:"日志"},welcome:{title:"初来乍到，请多关照",docker:"v2rayA服务端正在运行于Docker环境中，Version: {version}",default:"v2rayA服务端正在运行，Version: {version}",newVersion:"检测到新版本: {version}",messages:["我们发现你还没有创建或导入任何节点、订阅。","我们支持以节点地址或者订阅地址的方式导入，也支持手动创建节点，快来试试吧！"]},v2ray:{start:"启动",stop:"关闭"},server:{name:"节点名",address:"节点地址",protocol:"协议",latency:"时延",lastSeenTime:"上次存活时间",lastTryTime:"上次测试时间",messages:{notAllowInsecure:"根据 {name} 的官方文档，如果你使用 {name}，将不允许 AllowInsecure",notRecommend:"根据 {name} 的官方文档，如果你使用 {name}，不推荐开启 AllowInsecure"}},InSecureConfirm:{title:"检测到不安全的配置",message:"即将保存的配置中<b>AllowInsecure</b>被设置为true，除非你知道你在做什么，否则贸然开启可能导致数据泄漏！是否继续？",confirm:"我知道我在做什么",cancel:"取消"},subscription:{host:"域名",remarks:"别名",timeLastUpdate:"上次更新时间",numberServers:"节点数"},operations:{name:"操作",update:"更新",modify:"修改",share:"分享",view:"查看",delete:"删除",create:"创建",import:"导入",inBatch:"批量",connect:"连接",disconnect:"断开",select:"选择",login:"登录",logout:"注销",configure:"配置",cancel:"取消",confirm:"确定",confirm2:"确认无误",saveApply:"保存并应用",save:"保存",copyLink:"复制链接",helpManual:"查看帮助",yes:"是",no:"否",switchSite:"切换至备用站点",addOutbound:"新增一个出站 (outbound)"},register:{title:"初来乍到，创建一个管理员账号",messages:["请记住您创建的管理员账号，用于登录该管理页面。","账号信息位于本地，我们不会上传任何信息到服务器。","如不慎忘记密码，使用 v2raya --reset-password 重置。"]},login:{title:"登录",username:"用户名",password:"密码"},setting:{transparentProxy:"透明代理/系统代理",transparentType:"透明代理/系统代理实现方式",pacMode:"规则端口的分流模式",preventDnsSpoofing:"防止DNS污染",specialMode:"特殊模式",mux:"多路复用",autoUpdateSub:"自动更新订阅",autoUpdateGfwlist:"自动更新GFWList",preferModeWhenUpdate:"解析订阅链接/更新时优先使用",ipForwardOn:"开启IP转发",portSharingOn:"开启端口分享",concurrency:"最大并发数",options:{global:"不进行分流",direct:"直连模式",pac:"跟随规则端口",whitelistCn:"大陆白名单模式",gfwlist:"GFWList模式",sameAsPacMode:"分流规则与规则端口所选模式一致",customRouting:"自定义路由规则",antiDnsHijack:"仅防止DNS劫持(快速)",forwardDnsRequest:"转发DNS请求",doh:"DoH(DNS-over-HTTPS)",default:"保持系统默认",on:"启用",off:"关闭",updateSubWhenStart:"服务端启动时更新订阅",updateSubAtIntervals:"每隔一段时间更新订阅（单位：小时）",updateGfwlistWhenStart:"服务端启动时更新GFWList",updateGfwlistAtIntervals:"每隔一段时间更新GFWList（单位：小时）",dependTransparentMode:"跟随透明代理/系统代理",closed:"关闭",advanced:"自定义高级设置",leastPing:"最小时延优先"},messages:{gfwlist:"该时间是指本地文件最后修改时间，因此可能会领先最新版本",transparentProxy:"全局代理开启后，无需经过额外设置，任何TCP流量均会经过V2RayA。另外，如需作为网关使得连接本机的其他主机或docker也享受代理，请勾选“开启局域网共享”。",transparentType:"★tproxy: 支持udp，不支持docker。★redirect: docker友好，不支持udp，需要占用本地53端口以应对dns污染。",pacMode:"该选项设置规则分流端口所使用的路由模式。默认情况下规则分流端口为20172，HTTP协议。",preventDnsSpoofing:"★转发DNS查询: 通过代理服务器转发DNS请求。★DoH(v2ray-core: 4.22.0+): DNS over HTTPS。",specialMode:"★supervisor：监控dns污染，提前拦截，利用v2ray-core的sniffing解决污染。★fakedns：使用fakedns策略加速解析。",tcpFastOpen:"简化TCP握手流程以加速建立连接，可能会增加封包的特征。若系统不支持可能会导致无法正常连接。",mux:"复用TCP连接以减少握手次数，但会影响吞吐量大的使用场景，如观看视频、下载、测速。当前仅支持vmess节点。可能会增加特征造成断流。",confirmEgressPorts:"<p>您正在对不同子网下的机器设置透明代理，请确认不走代理的出方向端口。</p>\n                          <p>当前设置的端口白名单为：</p>\n                          <p>TCP: {tcpPorts}</p>\n                          <p>UDP: {udpPorts}</p>",grpcShouldWithTls:"gRPC必须启用TLS",ssPluginImpl:"★默认：使用 simple-obfs 时为等效传输层，v2ray-plugin 时为链式。★链式：shadowsocks 流量会被转发至独立的插件。★等效传输层：直接由 v2ray/xray 核心的传输层处理。"}},customAddressPort:{title:"地址与端口",serviceAddress:"服务端地址",portSocks5:"socks5端口",portHttp:"http端口",portSocks5WithPac:"socks5端口(带分流规则)",portHttpWithPac:"http端口(带分流规则)",portVmess:"VMess端口(带分流规则)",portVmessLink:"VMess端口链接",messages:["如需修改后端运行地址(默认0.0.0.0:2017)，可添加环境变量<code>V2RAYA_ADDRESS</code>或添加启动参数<code>--address</code>。","docker模式下如果未使用<code>--privileged --network host</code>参数启动容器，可通过修改端口映射修改socks5、http端口。","docker模式下不能正确判断端口占用，请确保输入的端口未被其他程序占用。","如将端口设为0则表示关闭该端口。"]},customRouting:{title:"自定义路由规则",defaultRoutingRule:"默认路由规则",sameAsDefaultRule:"与默认规则相同",appendRule:"追加规则",direct:"直连",proxy:"代理",block:"拦截",rule:"规则",domainFile:"域名文件",typeRule:"规则类型",messages:{0:"将SiteDat文件放于 <b>{V2RayLocationAsset}</b> 目录下，V2rayA将自动进行识别",1:'制作SiteDat文件：<a href="https://github.com/ToutyRater/V2Ray-SiteDAT">ToutyRater/V2Ray-SiteDAT</a>',2:"在选择Tags时，可按Ctrl等多选键进行多选。",noSiteDatFileFound:"未在{V2RayLocationAsset}中发现siteDat文件",emptyRuleNotPermitted:"不能存在tags为空的规则，请检查"}},doh:{title:"配置DoH服务器",dohPriorityList:"DoH服务优先级列表",messages:["DoH即DNS over HTTPS，能够有效避免DNS污染，一些国内的DoH提供商自己本身也有被污染的可能，另外，一些DoH提供商的DoH服务可能被墙，请自行选择非代理条件下直连速度较快且效果较好的DoH提供商","大陆较好的DoH服务有阿里dns, geekdns, rubyfish等","台湾有quad101: dns.twnic.tw等","美国有cloudflare: 1.0.0.1等",'清单：<a href="https://dnscrypt.info/public-servers" target="_blank">public-servers</a>','另外，您可以在自己的国内服务器上自架DoH服务，以纵享丝滑 <a href="https://github.com/facebookexperimental/doh-proxy" target="_blank">doh-proxy</a>。在这种情况下，建议同时运行服务端(doh-proxy/doh-httpproxy, 提供对外服务)和客户端(doh-stub, 连接至doh.opendns.com)并将他们串联，因为通常情况下在普遍受到污染的地区找到一个完全不受污染的服务器是很困难的。',"建议上述列表1-2行即可，留空保存可恢复默认"]},dns:{title:"配置DNS服务器",internalQueryServers:"域名查询服务器",externalQueryServers:"国外域名查询服务器",messages:["“@:(dns.internalQueryServers)” 用于查询国内域名，而 “@:(dns.externalQueryServers)” 用于查询国外域名。","如果将 “@:(dns.externalQueryServers)” 留空，“@:(dns.internalQueryServers)” 将会负责查询所有域名。"]},egressPortWhitelist:{title:"出方向端口白名单",tcpPortWhitelist:"TCP端口白名单",udpPortWhitelist:"UDP端口白名单",messages:["如果你将v2rayA架设在对外提供服务的服务器A上，连接了代理服务器B，那么你需要注意：","透明代理会使得所有TCP、UDP流量走代理，通过走代理的流量其源IP地址会被替换为代理服务器B的IP地址，那么如果有客户向你的服务器A发出请求，他却将得到从你代理服务器B发出的回答，该回答在客户看来无疑是不合法的，从而导致连接被拒绝。","因此，需要将服务器提供的对外服务端口包含在白名单中，使其不走代理。如ssh(22)、v2raya({v2rayaPort})。","如不对外提供服务或仅对局域网内主机提供服务，则可不设置白名单。","格式：22表示端口22，20170:20172表示20170到20172三个端口。"]},configureServer:{title:"配置节点 | 节点",servername:"节点名称",port:"端口号",forceTLS:"强制开启TLS",noObfuscation:"不伪装",httpObfuscation:"伪装为HTTP",srtpObfuscation:"伪装视频通话(SRTP)",utpObfuscation:"伪装为BT下载(uTP)",wechatVideoObfuscation:"伪装为微信视频通话",dtlsObfuscation:"伪装为DTLS1.2数据包",wireguardObfuscation:"伪装为WireGuard数据包",hostObfuscation:"域名(host)",pathObfuscation:"路径(path)",seedObfuscation:"混淆种子",username:"用户名",password:"密码",origin:"原版"},configureSubscription:{title:"订阅配置"},import:{message:"填入节点链接或订阅地址：",batchMessage:"一行一个节点链接:",qrcodeError:"找不到有效的二维码，请重新尝试"},delete:{title:"确认删除",message:"确定要<b>删除</b>这些节点/订阅吗？注意，该操作是不可逆的。"},latency:{message:"时延测试往往需要花费较长时间，请耐心等待"},version:{higherVersionNeeded:"该操作需要 v2rayA 的版本高于{version}",v2rayInvalid:"检测到 geosite.dat, geoip.dat 文件或 v2ray-core 可能未正确安装，请检查",v2rayNotV5:"检测到 v2ray-core 的版本并非 v5，请使用 v5 版本或将 v2rayA 降级至 v1.5"},about:'<p>v2rayA 是 V2Ray 的一个 Web 客户端。</p>\n          <p class="about-small">默认端口：</p>\n          <p class="about-small">2017: v2rayA后端端口</p>\n          <p class="about-small">20170: SOCKS协议</p>\n          <p class="about-small">20171: HTTP协议</p>\n          <p class="about-small">20172: 带分流规则的HTTP协议</p>\n          <p class="about-small">其他端口：</p>\n          <p class="about-small">32345: tproxy，透明代理所需 </p>\n          <p>在使用中如果发现任何问题，欢迎<a href="https://github.com/v2rayA/v2rayA/issues">提出issue</a>.</p>\n          <p>文档：<a href="https://v2raya.org">https://v2raya.org</a>.</p>',axios:{messages:{optimizeBackend:"您是否需要调整服务端地址？",noBackendFound:"未在 {url} 检测到v2rayA服务端，请确定v2rayA正常运行",cannotCommunicate:["无法通信。如果您的服务端已正常运行，且端口正常开放，原因可能是当前浏览器不允许https站点访问http资源，您可以尝试切换为http备用站点。","无法通信。火狐浏览器不允许https站点访问http资源，您可以换用Chrome浏览器或切换为http备用站点。"]},urls:{usage:"https://v2raya.org/"}},routingA:{messages:["点击“查看帮助”按钮以获取帮助"]},outbound:{addMessage:"请输入你想要添加的出站(outbound)名称：",deleteMessage:'确定要<b>删除</b>出站 "{outboundName}" 吗？注意，该操作是不可逆的。'},driver:{welcome:["首先导入节点服务器","初次使用，还没有任何节点服务器，在这里导入或创建节点服务器。"],tabs:["订阅与节点服务器","导入订阅、节点服务器后，在这里切换和管理你的订阅、普通节点以及订阅节点。"]},log:{logModalTitle:"查看日志",refreshInterval:"刷新间隔",seconds:"秒",autoScoll:"自动滚动"}},_={common:{outboundSetting:"Outbound Setting",setting:"Setting",about:"About",loggedAs:"Logged as <b>{username}</b>",v2rayCoreStatus:"Status of v2ray-core",checkRunning:"Checking",isRunning:"Running",notRunning:"Ready",notLogin:"Login please",latest:"Latest",local:"Local",success:"SUCCESS",fail:"FAIL",message:"Message",none:"none",optional:"optional",loadBalance:"Load Balance",log:"Logs"},welcome:{title:"Welcome",docker:"v2rayA service is running in Docker. Version: {version}",default:"v2rayA service is running. Version: {version}",newVersion:"Detected new version: {version}",messages:["There is no server.","You can create/import a server or import a subscription."]},v2ray:{start:"Start",stop:"Stop"},server:{name:"Server Name",address:"Server Address",protocol:"Protocol",latency:"Latency",lastSeenTime:"Last seen time",lastTryTime:"Last try time",messages:{notAllowInsecure:"According to the docs of {name}, if you use {name}, AllowInsecure will be forbidden.",notRecommend:"According to the docs of {name}, if you use {name}, AllowInsecure is not recommend."}},InSecureConfirm:{title:"Dangerous configuration detected",message:"The configuration has set the <b>AllowInsecure</b> to true. This may cause security risks. Are you sure to continue?",confirm:"I know what I'm doing",cancel:"cancel"},subscription:{host:"Host",remarks:"Remarks",timeLastUpdate:"Datetime of Last Update",numberServers:"Number of Servers"},operations:{name:"Operations",update:"Update",modify:"Modify",share:"Share",view:"View",delete:"Delete",create:"Create",import:"Import",inBatch:"In batch",connect:"Connect",disconnect:"Disconnect",select:"Select",login:"Login",logout:"Logout",configure:"Configure",cancel:"Cancel",saveApply:"Save and Apply",confirm:"Confirm",confirm2:"Carefully confirmed",save:"Save",copyLink:"COPY LINK",helpManual:"Help & Manual",yes:"Yes",no:"No",switchSite:"Switch to alternate site",addOutbound:"Add an outbound"},register:{title:"Create an admin account first",messages:["Remember your admin account which is importantly used to login.","Account information is stored in local. We never send information to any server.","Once password was forgot, you could use v2raya --reset-password to reset."]},login:{title:"Login",username:"Username",password:"Password"},setting:{transparentProxy:"Transparent Proxy/System Proxy",transparentType:"Transparent Proxy/System Proxy Implementation",pacMode:"Traffic Splitting Mode of Rule Port",preventDnsSpoofing:"Prevent DNS Spoofing",specialMode:"Special Mode",mux:"Multiplex",autoUpdateSub:"Automatically Update Subscriptions",autoUpdateGfwlist:"Automatically Update GFWList",preferModeWhenUpdate:"Mode when Update Subscriptions and GFWList",ipForwardOn:"IP Forward",portSharingOn:"Port Sharing",concurrency:"Concurrency",options:{global:"Do not Split Traffic",direct:"Direct",pac:"Depend on Rule Port",whitelistCn:"Proxy except CN Sites",gfwlist:"Proxy only GFWList",sameAsPacMode:"Traffic Splitting Mode is the Same as the Rule Port",customRouting:"Customized Routing",antiDnsHijack:"Prevent DNS Hijack Only (fast)",forwardDnsRequest:"Forward DNS Request",doh:"DoH(dns-over-https)",default:"Keep Default",on:"On",off:"Off",updateSubWhenStart:"Update Subscriptions When Service Starts",updateSubAtIntervals:"Update Subscriptions Regularly (Unit: hour)",updateGfwlistWhenStart:"Update GFWList When Service Starts",updateGfwlistAtIntervals:"Update GFWList Regularly (Unit: hour)",dependTransparentMode:"Follows Transparent Proxy/System Proxy",closed:"Off",advanced:"Advanced Setting",leastPing:"Least Latency First"},messages:{gfwlist:"Based on modified time of file which sometimes is after latest version online.",transparentProxy:"If transparent proxy on, no extra configure needed and all TCP traffic will pass through the v2rayA. Providing proxy service to other computers and docker as the gateway should make option 'Share in LAN' on.",transparentType:"★tproxy: support UDP, but not support docker. ★redirect: friendly for docker, but does not support UDP and need to occupy local port 53 for dns anti-pollution.",pacMode:'Here you can set the splitting traffic rule of the rule port. By default, "Rule of Splitting Traffic" port is 20172 and HTTP protocol.',preventDnsSpoofing:"★Forward DNS Request: DNS requests will be forwarded by proxy server.★DoH(dns-over-https, v2ray-core: 4.22.0+): DNS over HTTPS.",specialMode:"★supervisor：Monitor dns pollution, intercept in advance, use the sniffing mechanism of v2ray-core to prevent pollution. ★fakedns：Use the fakens strategy to speed up the resolving.",tcpFastOpen:"Simplify TCP handshake process to speed up connection establishment. Risk of emphasizing characteristics of packets exists. It may cause failed to connect if your system does not support it.",mux:"Multiplexing TCP connections to reduce the number of handshake, but it will affect the use cases with high throughput, such as watching videos, downloading, and test speed. Risk of emphasizing characteristics of packets exists. Support vmess only now.",confirmEgressPorts:"<p>You are setting up transparent proxy across LANs, confirm egress port whitelist.</p>\n                          <p>Whitelist:</p>\n                          <p>TCP: {tcpPorts}</p>\n                          <p>UDP: {udpPorts}</p>",grpcShouldWithTls:"gRPC must be with TLS",ssPluginImpl:"★default: 'transport' for simple-obfs, 'chained' for v2ray-plugin.★chained: shadowsocks traffic will be redirect to standalone plugin.★transport: processed by the transport layer of v2ray/xray core directly."}},customAddressPort:{title:"Address and Ports",serviceAddress:"Address of Service",portSocks5:"Port of SOCKS5",portHttp:"Port of HTTP",portSocks5WithPac:"Port of SOCKS5(with Rule)",portHttpWithPac:"Port of HTTP(with Rule)",portVmess:"Port of VMess(with Rule)",portVmessLink:"Link of VMess port",messages:["Service address default as 0.0.0.0:2017 can be changed by setting environment variable <code>V2RAYA_ADDRESS</code> and command argument<code>--address</code>.","If you start v2raya docker container with port mapping instead of <code>--network host</code>, you can remapping ports in this way.","We cannot judge port occupations in docker mode. Confirm it by yourself.","Zero means to close this port."]},customRouting:{title:"Customize Routing Rule",defaultRoutingRule:"Default Routing Rule",sameAsDefaultRule:"the same as default rule",appendRule:"Append Rule",direct:"Direct",proxy:"Proxy",block:"Block",rule:"Rule",domainFile:"Domain File",typeRule:"Type of Rule",messages:{0:"v2rayA will recognize all SiteDat file in <b>{V2RayLocationAsset}</b>",1:'To make a SiteDat file by yourself: <a href="https://github.com/ToutyRater/V2Ray-SiteDAT">ToutyRater/V2Ray-SiteDAT</a>',2:"Multi-select is supported.",noSiteDatFileFound:"No siteDat file found in {V2RayLocationAsset}",emptyRuleNotPermitted:"Empty rule is not permitted"}},doh:{title:"Configure DoH Server",dohPriorityList:"Priority list of DoH Servers",messages:["DoH (DNS over HTTPS) can effectively avoid DNS pollution. But some native DoH providers may themselves be contaminated sometimes. In addition, some DoH services may be blocked by local network providers. Please choose the fastest and stablest DoH server.","Awesome public DoH servers in Mainland China include alidns, geekdns, rubyfish, etc","In taiwan area include quad101, etc","USA: cloudflare, dns.google, etc",'Checklist：<a href="https://dnscrypt.info/public-servers" target="_blank">public-servers</a>','Besides, setting up DoH service at your own native server is suggested and well-behaved in most cases <a href="https://github.com/facebookexperimental/doh-proxy" target="_blank">doh-proxy</a>. In this case, it is recommended to run the server(doh-proxy/doh-httpproxy) providing service and client(doh-stub) connecting to doh.opendns.com at the same time and connect them in series, because you can hardly find a server that is not polluted in a generally contaminated region.',"Optimally, place one or two lines above. The list will restore to default after saving with empty content."]},dns:{title:"Configure DNS Server",internalQueryServers:"Domain Query Servers",externalQueryServers:"External Domain Query Servers",messages:['"@:(dns.internalQueryServers)" are designed to be used to look up domain names in China, while "@:(dns.externalQueryServers)" be used to look up others.','"@:(dns.internalQueryServers)" will be used to look up all domain names if "@:(dns.externalQueryServers)" is empty.']},egressPortWhitelist:{title:"Egress Port Whitelist",tcpPortWhitelist:"TCP Port Whitelist",udpPortWhitelist:"UDP Port Whitelist",messages:["If v2rayA is setup on a server A which connected with a proxy server B, pay attention:","Transparent proxy will force all TCP and UDP traffic to pass through proxy server B, where source IP address will be replaced with proxy B's. Moreover, if some clients send requests to server A that provides service, they will received responses from your proxy B's IP address weirdly, which is illegal.","To resolve it, we need to add those service ports to whitelist so that not pass through proxy.For examples, ssh(22)、v2raya({v2rayaPort}).","Obviously, if the server does not provide any service, you can skip configuring.","Formatting：22 means port 22，20170:20172 means three ports 20170 to 20172."]},configureServer:{title:"Configure Server | Server",servername:"Servername",port:"Port",forceTLS:"forcibly TLS on",noObfuscation:"No obfuscation",httpObfuscation:"Obfuscated as HTTP",srtpObfuscation:"Obfuscated as Video Calls (SRTP)",utpObfuscation:"Obfuscated as Bittorrent (uTP)",wechatVideoObfuscation:"Obfuscated as Wechat Video Calls",dtlsObfuscation:"Obfuscated as DTLS1.2 Packets",wireguardObfuscation:"Obfuscated as WireGuard Packets",hostObfuscation:"Host",pathObfuscation:"Path",seedObfuscation:"Seed",username:"Username",password:"Password",origin:"origin"},configureSubscription:{title:"Configure Subscription"},import:{message:"Input a server link or subscription address:",batchMessage:"One server link per line:",qrcodeError:"Failed to find a valid QRCode, please try again"},delete:{title:"Confirm to DELETE",message:"Be sure to <b>DELETE</b> those servers/subscriptions? It is not reversible."},latency:{message:"Latency tests used to cost one or several minutes. Wait patiently please."},version:{higherVersionNeeded:"This operation need higher version of v2rayA than {version}",v2rayInvalid:"geosite.dat, geoip.dat or v2ray-core may not be installed correctly",v2rayNotV5:"The version of v2ray-core is not v5. Use v5 or downgrade v2rayA to v1.5"},about:'<p>v2rayA is a web GUI client of V2Ray.</p>\n          <p class="about-small">Default ports:</p>\n          <p class="about-small">2017: v2rayA service port</p>\n          <p class="about-small">20170: SOCKS protocol</p>\n          <p class="about-small">20171: HTTP protocol</p>\n          <p class="about-small">20172: HTTP protocol with "Rule of Splitting Traffic"</p>\n          <p class="about-small">Other ports：</p>\n          <p class="about-small">32345: tproxy, needed by transparent proxy </p>\n          <p>All data is stored in local instead of in the cloud. </p>\n          <p>Problems found during use can be reported at <a href="https://github.com/v2rayA/v2rayA/issues">issues</a>.</p>\n          <p>Documentation: <a href="https://v2raya.org">https://v2raya.org</a></p>',axios:{messages:{optimizeBackend:"Adjust v2rayA service address？",noBackendFound:"Cannot find v2rayA at {url}. Make sure v2rayA is running at this address.",cannotCommunicate:["Cannot communicate. If your service is running and ports open correctly, the reason may be that current browser does not allow https sites to access http resources, you can try using Chrome or switching to alternate http site.","Cannot communicate. Firefox does not allow https sites to access http resources, you can try switching to alternate http sites."]},urls:{usage:"https://github.com/v2rayA/v2rayA/wiki/Usage"}},routingA:{messages:["click the button 'Help&Manual' for help"]},outbound:{addMessage:"Please input the outbound name you want to add:",deleteMessage:'Be sure to <b>DELETE</b> the outbound "{outboundName}"? It is not reversible.'},log:{logModalTitle:"View logs",refreshInterval:"Refresh Interval",seconds:"seconds",autoScoll:"Auto Scroll"}},$={zh:k,en:_};o.ZP.use(S.Z);let x="en",C=localStorage["_lang"];if(C)x=C;else for(let je of window.navigator.languages)if(je=je.split("-")[0],je in $){x=je;break}const A=new S.Z({locale:x,messages:$,fallbackLocale:"en"});var P=A,T={i18n:P,name:"ModalLogin",props:{first:{type:Boolean,default:!1}},data:()=>({username:"",password:""}),mounted(){this.$refs.username.focus()},methods:{handleClickSubmit(){this.first?this.$axios({url:`${localStorage["backendAddress"]}/api/account`,method:"post",data:{username:this.username,password:this.password}}).then((t=>{v(t,this,(()=>{localStorage["token"]=t.data.data.token,this.$emit("close"),this.$remount()}))})):this.$axios({url:`${localStorage["backendAddress"]}/api/login`,method:"post",data:{username:this.username,password:this.password}}).then((t=>{v(t,this,(()=>{localStorage["token"]=t.data.data.token,this.$emit("close"),this.$remount()}))}))},handleEnter(){this.handleClickSubmit()}}},I=T,R=s(1001),M=(0,R.Z)(I,u,p,!1,null,"3bd9bd39",null),L=M.exports,O={versions:function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1===t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1===t.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(" "+t._s(t.$t("customAddressPort.title"))+" ")])]),e("section",{staticClass:"modal-card-body"},[e("b-field",{attrs:{label:t.$t("customAddressPort.serviceAddress"),"label-position":"on-border"}},[e("b-input",{ref:"backendAddress",attrs:{placeholder:"http://localhost:2017",pattern:"https?://.+(:\\d+)?"},model:{value:t.table.backendAddress,callback:function(e){t.$set(t.table,"backendAddress",e)},expression:"table.backendAddress"}},[t._v(" > ")])],1),t.backendReady&&!1===t.dockerMode&&!t.addressChanged?[e("b-field",{attrs:{label:t.$t("customAddressPort.portSocks5"),"label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"20170",type:"number",min:"0",required:""},model:{value:t.table.socks5,callback:function(e){t.$set(t.table,"socks5",e)},expression:"table.socks5"}})],1),e("b-field",{attrs:{label:t.$t("customAddressPort.portHttp"),"label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"20171",type:"number",min:"0",required:""},model:{value:t.table.http,callback:function(e){t.$set(t.table,"http",e)},expression:"table.http"}})],1),e("b-field",{attrs:{label:t.$t("customAddressPort.portSocks5WithPac"),"label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"0",type:"number",min:"0",required:""},model:{value:t.table.socks5WithPac,callback:function(e){t.$set(t.table,"socks5WithPac",e)},expression:"table.socks5WithPac"}})],1),e("b-field",{attrs:{label:t.$t("customAddressPort.portHttpWithPac"),"label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"20172",type:"number",min:"0",required:""},model:{value:t.table.httpWithPac,callback:function(e){t.$set(t.table,"httpWithPac",e)},expression:"table.httpWithPac"}})],1),e("b-field",{attrs:{label:t.$t("customAddressPort.portVmess"),"label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"0",type:"number",min:"0",required:""},model:{value:t.table.vmess,callback:function(e){t.$set(t.table,"vmess",e)},expression:"table.vmess"}})],1),t.table.vmess>0&&t.table.vmessLink?e("b-message",{staticClass:"after-line-dot5",staticStyle:{"font-size":"13px"},attrs:{type:"is-info"}},[e("b-button",{attrs:{type:"is-link is-info is-outlined"},on:{click:t.handleClickShowVmessLink}},[t._v(" "+t._s(t.$t("customAddressPort.portVmessLink"))+" ")])],1):t._e(),e("b-message",{staticClass:"after-line-dot5",staticStyle:{"font-size":"13px"},attrs:{type:"is-info"}},[e("p",{directives:[{name:"show",rawName:"v-show",value:!t.dockerMode,expression:"!dockerMode"}],domProps:{innerHTML:t._s(t.$t("customAddressPort.messages.0"))}}),e("p",{directives:[{name:"show",rawName:"v-show",value:t.dockerMode,expression:"dockerMode"}],domProps:{innerHTML:t._s(t.$t("customAddressPort.messages.1"))}}),e("p",{directives:[{name:"show",rawName:"v-show",value:t.dockerMode,expression:"dockerMode"}],domProps:{innerHTML:t._s(t.$t("customAddressPort.messages.2"))}}),e("p",{domProps:{innerHTML:t._s(t.$t("customAddressPort.messages.3"))}})])]:t._e()],2),e("footer",{staticClass:"modal-card-foot flex-end"},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.confirm"))+" ")])])])},U=[],N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"500px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title has-text-centered"},[t._v(t._s(t.title))])]),e("section",{staticClass:"modal-card-body lazy",staticStyle:{"text-align":"center"}},[t._m(0),e("div",{staticClass:"tags has-addons is-centered",staticStyle:{position:"relative"}},[e("span",{staticClass:"tag is-rounded is-dark sharingAddressTag",staticStyle:{position:"relative"},attrs:{"data-clipboard-text":t.sharingAddress}},[e("div",{staticClass:"tag-cover tag is-rounded",staticStyle:{display:"none"}}),e("span",{staticClass:"has-ellipsis",staticStyle:{"max-width":"10em"}},[t._v(" "+t._s(t.shortDesc)+" ")])]),e("div",{attrs:{id:"tag-cover-text"}},[t._v(t._s(t.$t("operations.copyLink")))]),e("span",{staticClass:"tag is-rounded is-primary sharingAddressTag",staticStyle:{position:"relative"},attrs:{"data-clipboard-text":t.sharingAddress}},[e("span",{staticClass:"has-ellipsis",staticStyle:{"max-width":"25em"}},[t._v(" "+t._s(t.sharingAddress)+" ")]),e("div",{staticClass:"tag-cover tag is-rounded",staticStyle:{display:"none"}})])])]),t._m(1)])},V=[function(){var t=this,e=t._self._c;return e("div",[e("canvas",{staticClass:"qrcode",attrs:{id:"canvas"}})])},function(){var t=this,e=t._self._c;return e("footer",{staticClass:"modal-card-foot",staticStyle:{"justify-content":"center"}},[e("a",{staticClass:"is-link",attrs:{href:"https://github.com/v2rayA/v2rayA",target:"_blank"}},[e("img",{staticClass:"leave-right",attrs:{src:"https://img.shields.io/github/stars/mzz2017/v2rayA.svg?style=social",alt:"stars"}}),e("img",{staticClass:"leave-right",attrs:{src:"https://img.shields.io/github/forks/mzz2017/v2rayA.svg?style=social",alt:"forks"}}),e("img",{staticClass:"leave-right",attrs:{src:"https://img.shields.io/github/watchers/mzz2017/v2rayA.svg?style=social",alt:"watchers"}})])])}],W=s(2592),H=s(1265),j=s(2152),q=s.n(j),E=s(9575),F={name:"ModalSharing",i18n:P,props:{title:{type:String,required:!0},sharingAddress:{type:String,required:!0},shortDesc:{type:String,required:!0},type:{type:String,required:!0}},beforeDestroy(){this.clipboard.destroy()},mounted(){document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1),this.clipboard=new(q())(".sharingAddressTag"),this.clipboard.on("success",(t=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",queue:!1}),t.clearSelection()})),this.clipboard.on("error",(t=>{this.$buefy.toast.open({message:this.$t("common.fail")+", error:"+t.toLocaleString(),type:"is-warning",position:"is-top",queue:!1})}));let t=this.sharingAddress;this._type===h.SubscriptionType&&(t="sub://"+E.Base64.encode(t));let e=document.getElementById("canvas");W.toCanvas(e,t,{errorCorrectionLevel:"H"},(function(t){t&&console.error(t)}));let s=document.querySelectorAll(".sharingAddressTag"),o=document.querySelectorAll(".tag-cover"),a=document.querySelector("#tag-cover-text"),n=()=>{o.forEach((t=>t.style.display="unset")),a.style.display="flex"},i=()=>{o.forEach((t=>t.style.display="none")),a.style.display="none"};s.forEach((t=>t.addEventListener("mouseenter",n))),s.forEach((t=>t.addEventListener("mouseleave",i)))},methods:{handleFileChange(t){const e=this,s=t.target.files[0];let o=document.querySelector("#QRCodeImport");if(o.outerHTML=o.outerHTML,this.$nextTick((()=>{document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1)})),!s.type.match(/image\/.*/))return void this.$buefy.toast.open({message:this.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1});const a=new FileReader;a.onload=function(t){const s=t.target.result,o=new H.h;o.scan(s).then((t=>{console.log(t),e.handleClickImportConfirm(t.data)})).catch((t=>{console.error(t),e.$buefy.toast.open({message:e.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1})}))},a.readAsDataURL(s)}}},z=F,B=(0,R.Z)(z,N,V,!1,null,"35348597",null),Z=B.exports,G={name:"ModalCustomPorts",i18n:P,data:()=>({table:{backendAddress:"http://localhost:2017",socks5:"20170",http:"20171",socks5WithPac:"0",httpWithPac:"20172",vmess:"0",vmessLink:""},backendReady:!1}),computed:{dockerMode(){return"true"===window.localStorage["docker"]},addressChanged(){let t=this.table.backendAddress;return t.endsWith("/")&&(t=t.substr(0,t.length-1)),t+"/api"!==`${localStorage["backendAddress"]}/api`}},created(){this.table.backendAddress=localStorage["backendAddress"],this.$axios({url:`${localStorage["backendAddress"]}/api/ports`}).then((t=>{v(t,this,(()=>{this.backendReady=!0,Object.assign(this.table,t.data.data)}))}))},methods:{handleClickShowVmessLink(){this.table.vmessLink?(this.$parent.close(),this.$buefy.modal.open({width:500,component:Z,props:{title:this.$t("customAddressPort.portVmessLink"),sharingAddress:this.table.vmessLink,shortDesc:"VMess | v2rayA",type:h.ServerType}})):this.$buefy.toast.open({message:"no vmessLink found",type:"is-warning",position:"is-top",queue:!1,duration:5e3})},handleClickSubmit(){if(!this.$refs.backendAddress.checkHtml5Validity())return;let t=this.table.backendAddress;t.endsWith("/")&&(t=t.substr(0,t.length-1)),this.backendReady&&!this.addressChanged?this.$axios({url:t+"/api/ports",method:"put",data:{socks5:parseInt(this.table.socks5),http:parseInt(this.table.http),socks5WithPac:parseInt(this.table.socks5WithPac),httpWithPac:parseInt(this.table.httpWithPac),vmess:parseInt(this.table.vmess)}}).then((e=>{v(e,this,(()=>{e.data.data?.vmessLink&&this.$buefy.modal.open({width:500,component:Z,props:{title:this.$t("customAddressPort.portVmessLink"),sharingAddress:e.data.data.vmessLink,shortDesc:"VMess | v2rayA",type:h.ServerType}}),localStorage["backendAddress"]=t,this.$emit("close")}))})):this.$axios({url:t+"/api/version"}).then((()=>{localStorage["backendAddress"]=t,this.$emit("close"),this.$remount()}))}}},Q=G,K=(0,R.Z)(Q,D,U,!1,null,null,null),Y=K.exports,J=s(3416);o.ZP.prototype.$axios=r(),r().defaults.timeout=6e4,r().interceptors.request.use((t=>(localStorage.hasOwnProperty("token")&&(t.headers.Authorization=`${localStorage["token"]}`,t.headers["X-V2raya-Request-Id"]=(0,J.x0)()),t)),(t=>(console.log("!",t.name,t.message),l.V.open({message:t.message,type:"is-warning",position:"is-top",duration:5e3}),Promise.reject(t))));let X="";function tt(t=localStorage["backendAddress"]){X!==t&&(X=t,c.GU.open({message:P.t("axios.messages.optimizeBackend"),type:"is-primary",queue:!1,duration:1e4,position:"is-top",actionText:P.t("operations.yes"),onAction:()=>{d.NK.open({component:Y,hasModalCard:!0,customClass:"modal-custom-ports"})}}),c.GU.open({message:P.t("axios.messages.noBackendFound",{url:t}),type:"is-warning",queue:!1,position:"is-top",duration:1e4,actionText:P.t("operations.helpManual"),onAction:()=>{window.open(P.t("axios.urls.usage"),"_blank")}}))}r().interceptors.response.use((function(t){return t}),(function(t){if(console.log("!!",t.name,t.message),console.log(Object.assign({},t)),"ECONNABORTED"===t.code&&t.isAxiosError)return Promise.reject(t);let e,s;if(t.config&&(e=g(t.config.url),s=e.host),t.response&&401===t.response.status)new o.ZP({components:{Modal:d.ZP,ModalLogin:L},data:()=>({show:!0}),render(){const e=arguments[0];let s=t.response.data&&t.response.data.data&&!0===t.response.data.data.first;return e("b-modal",{attrs:{active:this.show,"trap-focus":!0,"has-modal-card":!0,"aria-role":"dialog","aria-modal":!0,"full-screen":!1,id:"login"},style:"z-index:1000",class:"modal-login"},[e(L,{attrs:{first:s},on:{close:()=>{this.show=!1}}})])}}).$mount("#login");else if("https"===location.protocol.substr(0,5)&&"http"===e.protocol){let t=P.t("axios.messages.cannotCommunicate.0");if("localhost"===s||"local"===s||"127.0.0.1"===s){if(O.versions.webKit)return void tt(e.source.replace(e.relative,""));O.versions.gecko&&(t=P.t("axios.messages.cannotCommunicate.1"))}c.GU.open({message:t,type:"is-warning",position:"is-top",queue:!1,duration:1e4,actionText:P.t("operations.switchSite"),onAction:()=>{window.open("http://v.v2raya.org","_self")}}),c.GU.open({message:P.t("axios.messages.optimizeBackend"),type:"is-primary",queue:!1,duration:1e4,position:"is-top",actionText:P.t("operations.yes"),onAction:()=>{d.NK.open({component:Y,hasModalCard:!0,customClass:"modal-custom-ports"})}})}else if(t.message&&"Network Error"===t.message||t.config&&"/api/version"===t.config.url)tt(e.source.replace(e.relative,""));else{if(!t.message||t.message&&t.message.indexOf("404")>=0||t.response&&404===t.response.status)return Promise.reject(t);console.log("!other"),l.V.open({message:t,type:"is-warning",position:"is-top",queue:!1,duration:5e3})}return Promise.reject(t)}));var et=r(),st=(s(5904),s(629));o.ZP.use(st.ZP);var ot=new st.ZP.Store({state:{nav:"",running:P.t("common.checkRunning"),connectedServer:{}},mutations:{NAV(t,e){t.nav=e},RUNNING(t,e){t.running=e},CONNECTED_SERVER(t,e){t.connectedServer=e}},actions:{},modules:{}}),at=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("b-navbar",{ref:"navs",attrs:{"fixed-top":"",shadow:"",type:"is-light"}},[e("template",{slot:"brand"},[e("b-navbar-item",{attrs:{href:"/"}},[e("img",{staticClass:"logo no-select",attrs:{src:s(1823),alt:"v2rayA"}})]),e("b-navbar-item",{attrs:{tag:"div"}},[e("b-tag",{staticClass:"pointerTag",attrs:{id:"statusTag",type:t.statusMap[t.runningState.running]},nativeOn:{mouseenter:function(e){return t.handleOnStatusMouseEnter.apply(null,arguments)},mouseleave:function(e){return t.handleOnStatusMouseLeave.apply(null,arguments)},click:function(e){return t.handleClickStatus.apply(null,arguments)}}},[t._v(t._s(t.coverStatusText?t.coverStatusText:t.runningState.running)+" ")])],1),e("b-navbar-item",{attrs:{tag:"div"}},[t.updateOutboundDropdown?e("b-dropdown",{attrs:{triggers:t.isMobile?["click"]:["click","hover"],"aria-role":"list","close-on-click":!1},on:{"active-change":t.handleOutboundDropdownActiveChange},nativeOn:{mouseenter:function(e){return t.handleOutboundDropdownActiveChange.apply(null,arguments)}},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("b-tag",{staticClass:"pointerTag",attrs:{type:"is-info","icon-right":"menu-down"}},[t._v(t._s(t.outboundName.toUpperCase())+" ")])]},proxy:!0}],null,!1,1647434248)},[t._l(t.outbounds,(function(s){return e("b-dropdown-item",{key:s,staticClass:"is-flex padding-right-1rem justify-content-space-between outbound-dropdown",attrs:{"aria-role":"listitem"},on:{click:function(e){t.outboundName=s}},nativeOn:{mouseenter:function(e){return t.handleOnOutboundMouseEnter(s)},mouseleave:function(e){return t.handleOnOutboundMouseLeave.apply(null,arguments)}}},[e("p",{staticClass:"is-relative is-fullwidth"},[e("span",[t._v(t._s(t.outboundNameDecorator(s)))]),e("span",[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isMobile||t.outboundDropdownHover[s],expression:"isMobile || outboundDropdownHover[outbound]"}],staticClass:"iconfont icon-setting outbound-setting",on:{click:function(e){return t.handleClickOutboundSetting(e,s)}}})])])])})),e("b-dropdown-item",{staticClass:"is-flex padding-right-1rem",attrs:{"aria-role":"listitem",separator:""}}),e("b-dropdown-item",{staticClass:"is-flex padding-right-1rem",attrs:{"aria-role":"listitem"},on:{click:t.handleAddOutbound}},[t._v(t._s(t.$t("operations.addOutbound"))+" ")])],2):t._e()],1)],1),e("template",{slot:"start"}),e("template",{slot:"end"},[e("b-navbar-item",{attrs:{tag:"a"},nativeOn:{click:function(e){return t.handleClickSetting.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-setting",staticStyle:{"font-size":"1.25em"}}),t._v(" "+t._s(t.$t("common.setting"))+" ")]),e("b-navbar-item",{attrs:{tag:"a"},nativeOn:{click:function(e){return t.handleClickAbout.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-heart",staticStyle:{"font-size":"1.25em"}}),t._v(" "+t._s(t.$t("common.about"))+" ")]),e("b-navbar-item",{attrs:{tag:"a"},nativeOn:{click:function(e){return t.handleClickLogs.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-info",staticStyle:{"font-size":"1.25em"}}),t._v(" "+t._s(t.$t("common.log"))+" ")]),e("b-dropdown",{staticClass:"menudropdown",staticStyle:{"margin-right":"10px"},attrs:{position:"is-bottom-left","aria-role":"menu"}},[e("a",{staticClass:"navbar-item",attrs:{slot:"trigger",role:"button"},slot:"trigger"},[e("span",{staticClass:"no-select"},[t._v(t._s(t.username))]),e("i",{staticClass:"iconfont icon-caret-down",staticStyle:{position:"relative",top:"1px",left:"2px"}})]),e("b-dropdown-item",{attrs:{custom:"","aria-role":"menuitem"},domProps:{innerHTML:t._s(t.$t("common.loggedAs",{username:t.username}))}}),e("b-dropdown-item",{staticClass:"is-flex",staticStyle:{"box-sizing":"content-box",height:"16px",width:"60px","justify-content":"space-between"},attrs:{custom:"","aria-role":"menuitem"}},t._l(t.langs,(function(o){return e("img",{key:o.flag,staticStyle:{height:"100%","flex-shrink":"0",cursor:"pointer"},attrs:{src:s(5640)(`./flag_${o.flag}.svg`),alt:o.alt},on:{click:function(e){return t.handleClickLang(o.flag)}}})})),0),e("hr",{staticClass:"dropdown-divider"}),e("b-dropdown-item",{staticClass:"no-select",attrs:{value:"logout","aria-role":"menuitem"},on:{click:t.handleClickLogout}},[e("i",{staticClass:"iconfont icon-logout",staticStyle:{position:"relative",top:"1px"}}),t._v(" "+t._s(t.$t("operations.logout"))+" ")])],1)],1)],2),e("node",{attrs:{outbound:t.outboundName,observatory:t.observatory},model:{value:t.runningState,callback:function(e){t.runningState=e},expression:"runningState"}}),e("b-modal",{staticClass:"modal-custom-ports",attrs:{active:t.showCustomPorts,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.showCustomPorts=e}}},[e("ModalCustomAddress",{on:{close:function(e){t.showCustomPorts=!1}}})],1),e("div",{attrs:{id:"login"}})],1)},nt=[],it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card modal-setting",staticStyle:{"max-width":"800px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("common.setting")))])]),e("section",{staticClass:"modal-card-body rules"},[e("b-field",{staticStyle:{position:"relative"},attrs:{label:"GFWList",horizontal:"","custom-class":"modal-setting-label"}},[e("span",[t._v(t._s(t.$t("common.latest"))+":")]),e("a",{staticClass:"is-link",attrs:{href:"https://github.com/v2rayA/dist-v2ray-rules-dat/releases",target:"_blank"}},[t._v(t._s(t.remoteGFWListVersion))]),e("span",[t._v(t._s(t.$t("common.local"))+":")]),t.dayjs(t.localGFWListVersion).isAfter(t.dayjs(t.remoteGFWListVersion))?e("b-tooltip",{attrs:{label:t.$t("setting.messages.gfwlist"),position:"is-bottom",type:"is-danger",dashed:"",multilined:"",animated:""}},[t._v(" "+t._s(t.localGFWListVersion?t.localGFWListVersion:t.$t("none"))+" ")]):e("span",[t._v(t._s(t.localGFWListVersion?t.localGFWListVersion:t.$t("none")))]),e("b-button",{staticStyle:{position:"relative",top:"-2px","text-decoration":"none","font-weight":"bold"},attrs:{size:"is-small",type:"is-text"},on:{click:t.handleClickUpdateGFWList}},[t._v(t._s(t.$t("operations.update"))+" ")])],1),e("hr",{staticClass:"dropdown-divider",staticStyle:{margin:"1.25rem 0 1.25rem"}}),e("b-field",{staticClass:"with-icon-alert",attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" "+t._s(t.$t("setting.transparentProxy"))+" "),e("b-tooltip",{attrs:{type:"is-dark",label:t.$t("setting.messages.transparentProxy"),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{attrs:{expanded:""},model:{value:t.transparent,callback:function(e){t.transparent=e},expression:"transparent"}},[e("option",{attrs:{value:"close"}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"proxy"}},[t._v(" "+t._s(t.$t("setting.options.on"))+": "+t._s(t.$t("setting.options.global"))+" ")]),e("option",{attrs:{value:"whitelist"}},[t._v(" "+t._s(t.$t("setting.options.on"))+": "+t._s(t.$t("setting.options.whitelistCn"))+" ")]),e("option",{attrs:{value:"gfwlist"}},[t._v(" "+t._s(t.$t("setting.options.on"))+": "+t._s(t.$t("setting.options.gfwlist"))+" ")]),e("option",{attrs:{value:"pac"}},[t._v(" "+t._s(t.$t("setting.options.on"))+": "+t._s(t.$t("setting.options.sameAsPacMode"))+" ")])]),e("b-checkbox-button",{directives:[{name:"show",rawName:"v-show",value:!t.lite,expression:"!lite"}],staticStyle:{position:"relative",left:"-1px"},attrs:{"native-value":!0},model:{value:t.ipforward,callback:function(e){t.ipforward=e},expression:"ipforward"}},[t._v(t._s(t.$t("setting.ipForwardOn"))+" ")]),e("b-checkbox-button",{staticStyle:{position:"relative",left:"-1px"},attrs:{"native-value":!0},model:{value:t.portSharing,callback:function(e){t.portSharing=e},expression:"portSharing"}},[t._v(t._s(t.$t("setting.portSharingOn"))+" ")])],2),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"close"!==t.transparent,expression:"transparent !== 'close'"}],attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" "+t._s(t.$t("setting.transparentType"))+" "),e("b-tooltip",{attrs:{type:"is-dark",multilined:"",label:t.$t("setting.messages.transparentType"),position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{staticClass:"left-border",attrs:{expanded:""},model:{value:t.transparentType,callback:function(e){t.transparentType=e},expression:"transparentType"}},[e("option",{directives:[{name:"show",rawName:"v-show",value:!t.lite,expression:"!lite"}],attrs:{value:"redirect"}},[t._v("redirect")]),e("option",{directives:[{name:"show",rawName:"v-show",value:!t.lite,expression:"!lite"}],attrs:{value:"tproxy"}},[t._v("tproxy")]),e("option",{attrs:{value:"system_proxy"}},[t._v("system proxy")])])],2),e("b-field",{attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" "+t._s(t.$t("setting.pacMode"))+" "),e("b-tooltip",{attrs:{type:"is-dark",label:t.$t("setting.messages.pacMode"),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{staticStyle:{"flex-shrink":"0"},attrs:{expanded:""},model:{value:t.pacMode,callback:function(e){t.pacMode=e},expression:"pacMode"}},[e("option",{attrs:{value:"whitelist"}},[t._v(" "+t._s(t.$t("setting.options.whitelistCn"))+" ")]),e("option",{attrs:{value:"gfwlist"}},[t._v(t._s(t.$t("setting.options.gfwlist")))]),e("option",{attrs:{value:"routingA"}},[t._v("RoutingA")])]),"custom"===t.pacMode?[e("b-button",{staticStyle:{"margin-left":"0","border-bottom-left-radius":"0","border-top-left-radius":"0",color:"rgba(0, 0, 0, 0.75)"},attrs:{type:"is-primary",outlined:""},on:{click:t.handleClickConfigurePac}},[t._v(t._s(t.$t("operations.configure"))+" ")])]:t._e(),"routingA"===t.pacMode?[e("b-button",{staticStyle:{"margin-left":"0","border-bottom-left-radius":"0","border-top-left-radius":"0",color:"rgba(0, 0, 0, 0.75)"},attrs:{outlined:""},on:{click:t.handleClickConfigureRoutingA}},[t._v(t._s(t.$t("operations.configure"))+" ")])]:t._e(),e("p")],2),e("b-field",{attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" "+t._s(t.$t("setting.preventDnsSpoofing"))+" "),e("b-tooltip",{attrs:{type:"is-dark",label:t.$t("setting.messages.preventDnsSpoofing"),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{staticClass:"left-border",attrs:{expanded:""},model:{value:t.antipollution,callback:function(e){t.antipollution=e},expression:"antipollution"}},[e("option",{attrs:{value:"closed"}},[t._v(t._s(t.$t("setting.options.closed")))]),e("option",{attrs:{value:"none"}},[t._v(" "+t._s(t.$t("setting.options.antiDnsHijack"))+" ")]),e("option",{attrs:{value:"dnsforward"}},[t._v(" "+t._s(t.$t("setting.options.forwardDnsRequest"))+" ")]),e("option",{attrs:{value:"doh"}},[t._v(t._s(t.$t("setting.options.doh")))]),e("option",{attrs:{value:"advanced"}},[t._v(t._s(t.$t("setting.options.advanced")))])]),"advanced"===t.antipollution?e("b-button",{class:{"right-extra-button":"closed"===t.antipollution,"no-border-radius":"closed"!==t.antipollution},on:{click:t.handleClickDnsSetting}},[t._v(" "+t._s(t.$t("operations.configure"))+" ")]):t._e(),e("p")],2),e("b-field",{directives:[{name:"show",rawName:"v-show",value:t.showSpecialMode,expression:"showSpecialMode"}],attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" "+t._s(t.$t("setting.specialMode"))+" "),e("b-tooltip",{attrs:{type:"is-dark",multilined:"",label:t.$t("setting.messages.specialMode"),position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{staticClass:"left-border",attrs:{expanded:""},model:{value:t.specialMode,callback:function(e){t.specialMode=e},expression:"specialMode"}},[e("option",{attrs:{value:"none"}},[t._v(t._s(t.$t("setting.options.closed")))]),e("option",{attrs:{value:"supervisor"}},[t._v("supervisor")]),e("option",{directives:[{name:"show",rawName:"v-show",value:"closed"!==t.antipollution,expression:"antipollution !== 'closed'"}],attrs:{value:"fakedns"}},[t._v(" fakedns ")])])],2),e("b-field",{attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" TCPFastOpen "),e("b-tooltip",{attrs:{type:"is-dark",label:t.$t("setting.messages.tcpFastOpen"),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{attrs:{expanded:""},model:{value:t.tcpFastOpen,callback:function(e){t.tcpFastOpen=e},expression:"tcpFastOpen"}},[e("option",{attrs:{value:"default"}},[t._v(t._s(t.$t("setting.options.default")))]),e("option",{attrs:{value:"yes"}},[t._v(t._s(t.$t("setting.options.on")))]),e("option",{attrs:{value:"no"}},[t._v(t._s(t.$t("setting.options.off")))])])],2),e("b-field",{staticClass:"with-icon-alert",attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" "+t._s(t.$t("setting.mux"))+" "),e("b-tooltip",{attrs:{type:"is-dark",label:t.$t("setting.messages.mux"),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{staticStyle:{flex:"1"},attrs:{expanded:""},model:{value:t.muxOn,callback:function(e){t.muxOn=e},expression:"muxOn"}},[e("option",{attrs:{value:"no"}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"yes"}},[t._v(t._s(t.$t("setting.options.on")))])]),"yes"===t.muxOn?e("cus-b-input",{ref:"muxinput",staticStyle:{flex:"1"},attrs:{placeholder:t.$t("setting.concurrency"),"custom-class":"no-shadow",type:"number",min:"1",max:"1024","validation-icon":" iconfont icon-alert"},model:{value:t.mux,callback:function(e){t.mux=e},expression:"mux"}}):t._e()],2),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"gfwlist"===t.pacMode||"gfwlist"===t.transparent,expression:"pacMode === 'gfwlist' || transparent === 'gfwlist'"}],attrs:{label:t.$t("setting.autoUpdateGfwlist"),"label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.pacAutoUpdateMode,callback:function(e){t.pacAutoUpdateMode=e},expression:"pacAutoUpdateMode"}},[e("option",{attrs:{value:"none"}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"auto_update"}},[t._v(" "+t._s(t.$t("setting.options.updateGfwlistWhenStart"))+" ")]),e("option",{attrs:{value:"auto_update_at_intervals"}},[t._v(" "+t._s(t.$t("setting.options.updateGfwlistAtIntervals"))+" ")])]),"auto_update_at_intervals"===t.pacAutoUpdateMode?e("cus-b-input",{ref:"autoUpdatePacInput",staticStyle:{flex:"1"},attrs:{"custom-class":"no-shadow",type:"number",min:"1","validation-icon":" iconfont icon-alert"},model:{value:t.pacAutoUpdateIntervalHour,callback:function(e){t.pacAutoUpdateIntervalHour=e},expression:"pacAutoUpdateIntervalHour"}}):t._e()],1),e("b-field",{attrs:{label:t.$t("setting.autoUpdateSub"),"label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.subscriptionAutoUpdateMode,callback:function(e){t.subscriptionAutoUpdateMode=e},expression:"subscriptionAutoUpdateMode"}},[e("option",{attrs:{value:"none"}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"auto_update"}},[t._v(" "+t._s(t.$t("setting.options.updateSubWhenStart"))+" ")]),e("option",{attrs:{value:"auto_update_at_intervals"}},[t._v(" "+t._s(t.$t("setting.options.updateSubAtIntervals"))+" ")])]),"auto_update_at_intervals"===t.subscriptionAutoUpdateMode?e("cus-b-input",{ref:"autoUpdateSubInput",staticStyle:{flex:"1"},attrs:{"custom-class":"no-shadow",type:"number",min:"1","validation-icon":" iconfont icon-alert"},model:{value:t.subscriptionAutoUpdateIntervalHour,callback:function(e){t.subscriptionAutoUpdateIntervalHour=e},expression:"subscriptionAutoUpdateIntervalHour"}}):t._e()],1),e("b-field",{attrs:{label:t.$t("setting.preferModeWhenUpdate"),"label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.proxyModeWhenSubscribe,callback:function(e){t.proxyModeWhenSubscribe=e},expression:"proxyModeWhenSubscribe"}},[e("option",{attrs:{value:"direct"}},[t._v(" "+t._s("close"===t.transparent||t.lite?t.$t("setting.options.direct"):t.$t("setting.options.dependTransparentMode"))+" ")]),e("option",{attrs:{value:"proxy"}},[t._v(t._s(t.$t("setting.options.global")))]),e("option",{attrs:{value:"pac"}},[t._v(t._s(t.$t("setting.options.pac")))])])],1)],1),e("footer",{staticClass:"modal-card-foot flex-end"},[e("button",{staticClass:"button footer-absolute-left",attrs:{type:"button"},on:{click:function(e){return t.$emit("clickPorts")}}},[t._v(" "+t._s(t.$t("customAddressPort.title"))+" ")]),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.saveApply"))+" ")])])])},rt=[],lt=s(7484),ct=s.n(lt),dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card modal-configure-pac",staticStyle:{"max-width":"550px",height:"700px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("customRouting.title")))])]),e("section",{staticClass:"modal-card-body rules"},[e("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-info"}},[e("p",{domProps:{innerHTML:t._s(t.$t("customRouting.messages.0",{V2RayLocationAsset:t.V2RayLocationAsset}))}}),e("p",{domProps:{innerHTML:t._s(t.$t("customRouting.messages.1",{V2RayLocationAsset:t.V2RayLocationAsset}))}})]),e("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-success"}},[e("p",[t._v(t._s(t.$t("customRouting.messages.2")))])]),e("b-collapse",{staticClass:"card",scopedSlots:t._u([{key:"trigger",fn:function(s){return e("div",{staticClass:"card-header",attrs:{role:"button"}},[e("p",{staticClass:"card-header-title"},[t._v(" "+t._s(t.$t("customRouting.defaultRoutingRule"))+" ")]),e("a",{staticClass:"card-header-icon"},[e("b-icon",{attrs:{icon:s.open?"menu-down":"menu-up"}})],1)])}}])},[e("div",{staticClass:"card-content"},[e("b-field",{attrs:{label:t.$t("customRouting.defaultRoutingRule"),"label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.customPac.defaultProxyMode,callback:function(e){t.$set(t.customPac,"defaultProxyMode",e)},expression:"customPac.defaultProxyMode"}},[e("option",{attrs:{value:"direct"}},[t._v(t._s(t.$t("customRouting.direct")))]),e("option",{attrs:{value:"proxy"}},[t._v(t._s(t.$t("customRouting.proxy")))]),e("option",{attrs:{value:"block"}},[t._v(t._s(t.$t("customRouting.block")))])])],1)],1)]),t._l(t.customPac.routingRules,(function(s,o){return e("b-collapse",{key:s.value,staticClass:"card",scopedSlots:t._u([{key:"trigger",fn:function(s){return e("div",{staticClass:"card-header",attrs:{role:"button"}},[e("p",{staticClass:"card-header-title",staticStyle:{position:"relative"}},[e("span",[t._v(t._s(`${t.$t("customRouting.rule")}${o+1}`))]),e("b-button",{staticStyle:{position:"absolute",right:"0"},attrs:{type:"is-text",size:"is-small"},on:{click:function(e){return t.handleClickDeleteRule(...arguments,o)}}},[t._v(t._s(t.$t("operations.delete")))])],1),e("a",{staticClass:"card-header-icon"},[e("b-icon",{attrs:{icon:s.open?" iconfont icon-caret-down":" iconfont icon-caret-up"}})],1)])}}],null,!0)},[e("div",{staticClass:"card-content"},[e("b-field",{attrs:{label:t.$t("customRouting.domainFile"),"label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:s.filename,callback:function(e){t.$set(s,"filename",e)},expression:"rule.filename"}},t._l(t.siteDatFiles,(function(s){return e("option",{key:s.filename,domProps:{value:s.filename}},[t._v(" "+t._s(s.filename)+" ")])})),0)],1),e("b-field",{attrs:{label:"Tags","label-position":"on-border"}},[e("b-select",{attrs:{multiple:"","native-size":t.siteDatFiles[s.filename].tags.length>16?16:t.siteDatFiles[s.filename].tags.length,size:"is-small",expanded:""},model:{value:s.tags,callback:function(e){t.$set(s,"tags",e)},expression:"rule.tags"}},t._l(t.siteDatFiles[s.filename].tags,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(s)+" ")])})),0)],1),e("p",{staticClass:"content",staticStyle:{"font-size":"0.8em","margin-left":"0.5em"}},[t._v(" tags: "+t._s(s.tags)+" ")]),e("b-field",{attrs:{label:t.$t("customRouting.typeRule"),"label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:s.ruleType,callback:function(e){t.$set(s,"ruleType",e)},expression:"rule.ruleType"}},[e("option",{attrs:{value:"direct"}},[t._v(" "+t._s(t.$t("customRouting.direct")+("direct"===t.customPac.defaultProxyMode?`(${t.$t("customRouting.sameAsDefaultRule")})`:""))+" ")]),e("option",{attrs:{value:"proxy"}},[t._v(" "+t._s(t.$t("customRouting.proxy")+("proxy"===t.customPac.defaultProxyMode?`(${t.$t("customRouting.sameAsDefaultRule")})`:""))+" ")]),e("option",{attrs:{value:"block"}},[t._v(" "+t._s(t.$t("customRouting.block")+("block"===t.customPac.defaultProxyMode?`(${t.$t("customRouting.sameAsDefaultRule")})`:""))+" ")])])],1)],1)])}))],2),e("footer",{staticClass:"modal-card-foot"},[e("div",{staticStyle:{position:"relative",display:"flex","justify-content":"flex-end",width:"100%"}},[e("button",{staticClass:"button btn-new",attrs:{type:"button"},on:{click:t.handleNew}},[t._v(" "+t._s(t.$t("customRouting.appendRule"))+" ")]),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.save"))+" ")])])])])},ut=[],pt={name:"ModalCustomRouting",data:()=>({customPac:{defaultProxyMode:"",routingRules:[]},siteDatFiles:[],firstSiteDatFilename:"",V2RayLocationAsset:""}),mounted(){(async()=>{let t=this.customPac;await this.$axios({url:`${localStorage["backendAddress"]}/api/customPac`}).then((e=>{v(e,this,(()=>{t=e.data.data.customPac,this.V2RayLocationAsset=e.data.data.V2RayLocationAsset}))}));let e=!1;await this.$axios({url:`${localStorage["backendAddress"]}/api/siteDatFiles`}).then((t=>{v(t,this,(()=>{t.data.data.siteDatFiles&&t.data.data.siteDatFiles.length>0?(this.siteDatFiles={},t.data.data.siteDatFiles.forEach((t=>{this.siteDatFiles[t.filename]=t,t.tags.sort()})),this.firstSiteDatFilename=t.data.data.siteDatFiles[0].filename):(this.$buefy.toast.open({message:this.$t("customRouting.messages.noSiteDatFileFound",{V2RayLocationAsset:this.V2RayLocationAsset}),type:"is-warning",position:"is-top",queue:!1,duration:5e3}),e=!0)}))})),this.customPac=t,e&&this.$parent.close()})()},methods:{handleNew(){this.customPac.routingRules.push({filename:this.firstSiteDatFilename,tags:[],matchType:"domain",ruleType:"direct"===this.customPac.defaultProxyMode?"proxy":"direct"});let t=document.querySelector(".modal-configure-pac .rules");this.$nextTick((()=>{t.scrollTop=t.scrollHeight-t.clientHeight}))},handleClickDeleteRule(t,e){t.stopImmediatePropagation(),this.customPac.routingRules.splice(e,1)},handleClickSubmit(){this.customPac.routingRules.some((t=>t.tags.length<=0))?this.$buefy.toast.open({message:this.$t("customRouting.messages.emptyRuleNotPermitted"),type:"is-warning",position:"is-top",queue:!1,duration:3e3}):this.$axios({url:`${localStorage["backendAddress"]}/api/customPac`,method:"put",data:{customPac:this.customPac}}).then((t=>{v(t,this,(()=>{this.$parent.close()}))}))}}},ht=pt,mt=(0,R.Z)(ht,dt,ut,!1,null,"e8f8ad4e",null),bt=mt.exports,ft=function(){var t=this,e=t._self._c;return e("div",{ref:"modal",staticClass:"modal-card modal-routinga",staticStyle:{width:"100%",height:"2000px",margin:"auto"}},[t._m(0),e("section",{staticClass:"modal-card-body rules"},[e("b-input",{staticClass:"full-min-height",attrs:{type:"textarea","custom-class":"full-min-height horizon-scroll code-font",placeholder:t.$t("routingA.messages.0"),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},model:{value:t.routingA,callback:function(e){t.routingA=e},expression:"routingA"}})],1),e("footer",{staticClass:"modal-card-foot"},[e("div",{staticStyle:{position:"relative",display:"flex","justify-content":"flex-end",width:"100%"}},[e("button",{staticClass:"button btn-left",on:{click:t.handleClickManual}},[t._v(" "+t._s(t.$t("operations.helpManual"))+" ")]),e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.save"))+" ")])])])])},vt=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("RoutingA")])])}],gt={name:"ModalCustomRoutingA",data:()=>({routingA:""}),mounted(){this.$axios({url:`${localStorage["backendAddress"]}/api/routingA`}).then((t=>{v(t,this,(()=>{this.routingA=t.data.data.routingA}),(()=>{this.$parent.close()}))})).catch((()=>{this.$parent.close()})),this.initRoutingAAnimationContentStyle()},methods:{initRoutingAAnimationContentStyle(){let t=this.$refs.modal;while(t&&!/\banimation-content\b/.test(t.className))t=t.parentElement;t&&(t.className=t.className.replace("animation-content","routinga-animation-content"))},handleClickManual(){window.open("https://github.com/v2rayA/v2rayA/wiki/RoutingA","_blank")},handleClickSubmit(){this.$axios({url:`${localStorage["backendAddress"]}/api/routingA`,method:"put",data:{routingA:this.routingA}}).then((t=>{v(t,this,(()=>{this.$parent.close()}))}))}}},yt=gt,wt=(0,R.Z)(yt,ft,vt,!1,null,"999c7226",null),St=wt.exports,kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"control",class:t.rootClasses},["textarea"!==t.type?e("input",t._b({ref:"input",staticClass:"input",class:[t.inputClasses,t.customClass],attrs:{type:t.newType,autocomplete:t.newAutocomplete,maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,blur:t.onBlur,focus:t.onFocus}},"input",t.$attrs,!1)):e("textarea",t._b({ref:"textarea",staticClass:"textarea",class:[t.inputClasses,t.customClass],attrs:{maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,blur:t.onBlur,focus:t.onFocus}},"textarea",t.$attrs,!1)),t.icon?e("b-icon",{staticClass:"is-left",attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize}}):t._e(),t.loading||!t.passwordReveal&&!t.statusTypeIcon?t._e():e("b-icon",{staticClass:"is-right",class:{"is-clickable":t.passwordReveal},attrs:{icon:t.passwordReveal?t.passwordVisibleIcon:t.statusTypeIcon,pack:t.iconPack,size:t.iconSize,type:t.passwordReveal?"is-primary":t.statusType,both:""},nativeOn:{click:function(e){return t.togglePasswordVisibility.apply(null,arguments)}}}),t.maxlength&&t.hasCounter&&"number"!==t.type?e("small",{staticClass:"help counter",class:{"is-invisible":!t.isFocused}},[t._v(" "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+" ")]):t._e()],1)},_t=[],$t=s(5926),xt=s(6805),Ct=s(9753),At={name:"CusBInput",components:{[$t.Z.name]:$t.Z},mixins:[Ct.Z],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},passwordReveal:Boolean,hasCounter:{type:Boolean,default:()=>xt.ZP.defaultInputHasCounter},customClass:{type:String,default:""}},data(){return{newValue:this.value,newType:this.type,newAutocomplete:this.autocomplete||xt.ZP.defaultInputAutocomplete,isPasswordVisible:!1,_elementRef:"textarea"===this.type?"textarea":"input"}},computed:{computedValue:{get(){return this.newValue},set(t){this.newValue=t,this.$emit("input",t),!this.isValid&&this.checkHtml5Validity()}},rootClasses(){return[this.iconPosition,this.size,{"is-expanded":this.expanded,"is-loading":this.loading,"is-clearfix":!this.hasMessage}]},inputClasses(){return[this.statusType,this.size,{"is-rounded":this.rounded}]},hasIconRight(){return this.passwordReveal||this.loading||this.statusTypeIcon},iconPosition(){return this.icon&&this.hasIconRight?"has-icons-left has-icons-right":!this.icon&&this.hasIconRight?"has-icons-right":this.icon?"has-icons-left":void 0},statusTypeIcon(){switch(this.statusType){case"is-success":return"check";case"is-danger":return" iconfont icon-alert";case"is-info":return"information";case"is-warning":return"alert"}},hasMessage(){return!!this.statusMessage},passwordVisibleIcon(){return this.isPasswordVisible?"eye-off":"eye"},valueLength(){return"string"===typeof this.computedValue?this.computedValue.length:"number"===typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value(t){this.newValue=t}},methods:{togglePasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible,this.newType=this.isPasswordVisible?"text":"password",this.$nextTick((()=>{this.$refs.input.focus()}))},onInput(t){this.$nextTick((()=>{t.target&&(this.computedValue=t.target.value)}))}}},Pt=At,Tt=(0,R.Z)(Pt,kt,_t,!1,null,null,null),It=Tt.exports,Rt=s(4505),Mt=s(4472),Lt=s(6365),Ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(" "+t._s(t.$t("dns.title"))+" ")])]),e("section",{staticClass:"modal-card-body"},[e("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-info"}},[e("p",[t._v(t._s(t.$t("dns.messages.0")))])]),e("b-field",{attrs:{label:t.$t("dns.internalQueryServers")}},[e("b-input",{attrs:{type:"textarea","custom-class":"full-min-height horizon-scroll code-font"},model:{value:t.internal,callback:function(e){t.internal=e},expression:"internal"}})],1),e("b-field",{attrs:{label:t.$t("dns.externalQueryServers")}},[e("b-input",{attrs:{type:"textarea","custom-class":"full-min-height horizon-scroll code-font",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},model:{value:t.external,callback:function(e){t.external=e},expression:"external"}})],1),e("b-message",{staticClass:"after-line-dot5",attrs:{type:"is-danger"}},[e("p",[t._v(t._s(t.$t("dns.messages.1")))])])],1),e("footer",{staticClass:"modal-card-foot flex-end"},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.save"))+" ")])])])},Dt=[],Ut={name:"ModalDnsSetting",data:()=>({internal:"",external:""}),created(){this.$axios({url:`${localStorage["backendAddress"]}/api/dnsList`}).then((t=>{v(t,this,(()=>{if(t.data.data.internal){let e=t.data.data.internal,s=t.data.data.external;console.log(t.data.data),e.length&&(this.internal=e.join("\n")),s.length&&(this.external=s.join("\n"))}}))}))},methods:{handleClickSubmit(){this.$axios({url:`${localStorage["backendAddress"]}/api/dnsList`,method:"put",data:{internal:this.internal,external:this.external}}).then((t=>{v(t,this,(()=>{this.$emit("close")}))}))},beforeAdding(t){return/^\d+$/.test(t)||/^\d+:\d+$/.test(t)}}},Nt=Ut,Vt=(0,R.Z)(Nt,Ot,Dt,!1,null,"0fc0bac8",null),Wt=Vt.exports;function Ht(t,e,s,a){let n=setInterval((()=>{et({url:`${localStorage["backendAddress"]}/api/touch`,timeout:e}).then((t=>{v(t,null,(()=>{t.data.data.running&&t.data.data.touch.connectedServer&&(clearInterval(n),s&&s(),o.ZP.prototype.$remount())}),(()=>{"the last request is being processed"!==t.data.message&&this.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",queue:!1,duration:5e3})}))})).catch((t=>{401===t.response.status&&(clearInterval(n),s&&s())}))}),e);t.then((()=>{Promise.race([t,new Promise((t=>{setTimeout(t,a||3e4)}))]).finally((()=>{clearInterval(n)}))}))}var jt={name:"ModalSetting",components:{BCheckboxButton:Lt.Z,BSelect:Mt.Z,BButton:Rt.Z,CusBInput:It},data:()=>({proxyModeWhenSubscribe:"direct",tcpFastOpen:"default",muxOn:"no",mux:"8",transparent:"close",transparentType:"redirect",ipforward:!1,portSharing:!1,dnsForceMode:!1,dnsforward:"no",antipollution:"none",specialMode:"none",pacAutoUpdateMode:"none",pacAutoUpdateIntervalHour:0,subscriptionAutoUpdateMode:"none",subscriptionAutoUpdateIntervalHour:0,customSiteDAT:{},pacMode:"whitelist",showClockPicker:!0,serverListMode:"noSubscription",remoteGFWListVersion:"checking...",localGFWListVersion:"checking...",showSpecialMode:!0}),computed:{lite(){return window.localStorage["lite"]&&parseInt(window.localStorage["lite"])>0},dockerMode(){return"true"===window.localStorage["docker"]},v2rayaPort(){let t=g(`${localStorage["backendAddress"]}/api`),e=t.port;return e||(e="http"===t.protocol?"80":"https"===t.protocol?"443":""),w(e)}},watch:{antipollution(t){"closed"===t&&"fakedns"===this.specialMode&&(this.specialMode="none")}},created(){this.$axios({url:`${localStorage["backendAddress"]}/api/remoteGFWListVersion`}).then((t=>{v(t,this,(()=>{this.remoteGFWListVersion=t.data.data.remoteGFWListVersion}))})),this.$axios({url:`${localStorage["backendAddress"]}/api/setting`}).then((t=>{v(t,this,(()=>{Object.assign(this,t.data.data.setting),delete t.data.data["setting"],Object.assign(this,t.data.data),this.subscriptionAutoUpdateTime=new Date(this.subscriptionAutoUpdateTime),this.pacAutoUpdateTime=new Date(this.pacAutoUpdateTime),this.lite&&(this.transparentType="system_proxy",this.showSpecialMode=!1)}))}))},methods:{dayjs(){return ct().apply(this,arguments)},handleClickUpdateGFWList(){this.$axios({url:`${localStorage["backendAddress"]}/api/gfwList`,method:"put",timeout:0}).then((t=>{v(t,this,(()=>{this.localGFWListVersion=t.data.data.localGFWListVersion,this.$buefy.toast.open({message:this.$t("common.success"),type:"is-warning",position:"is-top",duration:5e3,queue:!1})}))}))},requestUpdateSetting(){let t;Ht(this.$axios({url:`${localStorage["backendAddress"]}/api/setting`,method:"put",data:{proxyModeWhenSubscribe:this.proxyModeWhenSubscribe,pacAutoUpdateMode:this.pacAutoUpdateMode,pacAutoUpdateIntervalHour:parseInt(this.pacAutoUpdateIntervalHour),subscriptionAutoUpdateMode:this.subscriptionAutoUpdateMode,subscriptionAutoUpdateIntervalHour:parseInt(this.subscriptionAutoUpdateIntervalHour),pacMode:this.pacMode,tcpFastOpen:this.tcpFastOpen,muxOn:this.muxOn,mux:parseInt(this.mux),transparent:this.transparent,transparentType:this.transparentType,ipforward:this.ipforward,portSharing:this.portSharing,dnsforward:"dnsforward"===this.antipollution?"yes":"no",antipollution:this.antipollution,specialMode:this.specialMode},cancelToken:new et.CancelToken((function(e){t=e}))}).then((t=>{v(t,this,(()=>{this.$buefy.toast.open({message:t.data.code,type:"is-primary",position:"is-top",queue:!1}),this.$parent.close()})),"SUCCESS"!==t.data.code&&t.data.message.indexOf("invalid config")>=0&&(this.$parent.$parent.runningState.running=this.$t("common.notRunning"))})),3e3,t)},handleClickSubmit(){("yes"!==this.muxOn||this.$refs.muxinput.checkHtml5Validity())&&("auto_update_at_intervals"!==this.subscriptionAutoUpdateMode||this.$refs.autoUpdateSubInput.checkHtml5Validity())&&("auto_update_at_intervals"!==this.pacAutoUpdateMode||this.$refs.autoUpdatePacInput.checkHtml5Validity())&&(console.log(`${localStorage["backendAddress"]}/api`),this.requestUpdateSetting())},handleClickConfigurePac(){this.$buefy.modal.open({parent:this,component:bt,hasModalCard:!0,canCancel:!0})},handleClickConfigureRoutingA(){this.$buefy.modal.open({parent:this,component:St,hasModalCard:!0,canCancel:!0})},handleClickDnsSetting(){this.$buefy.modal.open({parent:this,component:Wt,hasModalCard:!0,canCancel:!0})}}},qt=jt,Et=(0,R.Z)(qt,it,rt,!1,null,null,null),Ft=Et.exports,zt=function(){var t=this,e=t._self._c;return e("section",{staticClass:"node-section container hero",attrs:{id:"node-section"}},[e("b-sidebar",{directives:[{name:"show",rawName:"v-show",value:t.connectedServerInfo.length,expression:"connectedServerInfo.length"}],staticClass:"node-status-sidebar-reduced",attrs:{open:!0,"can-cancel":!1},nativeOn:{mouseenter:function(e){t.showSidebar=!0},click:function(e){t.showSidebar=!0}}},[e("img",{attrs:{src:s(39),width:"36px"}})]),e("b-sidebar",{staticClass:"node-status-sidebar",attrs:{open:t.showSidebar,type:"is-light",fullheight:!1,fullwidth:!1,overlay:!1,right:!1,"can-cancel":["outside"]},on:{close:function(e){t.showSidebar=!1}},nativeOn:{mouseleave:function(e){t.showSidebar=!1}}},t._l(t.connectedServerInfo,(function(s){return e("b-message",{key:s.value,attrs:{title:`${s.info.name}${s.info.subscription_name?` [${s.info.subscription_name}]`:""}`,closable:!1,size:"is-small",type:s.info.alive?s.selected?"is-primary":"is-success":null===s.info.alive?"is-light":"is-danger"},nativeOn:{click:function(e){return t.handleClickConnectedServer(s.which)}}},[s.showContent?e("div",[e("p",[t._v(t._s(t.$t("server.protocol"))+": "+t._s(s.info.net))]),s.info.delay&&s.info.delay<99999?e("p",[t._v(" "+t._s(t.$t("server.latency"))+": "+t._s(s.info.delay)+"ms ")]):t._e(),!s.info.alive&&s.info.last_seen_time?e("p",[t._v(" "+t._s(t.$t("server.lastSeenTime"))+": "+t._s(t._f("unix2datetime")(s.info.last_seen_time))+" ")]):t._e(),s.info.last_try_time?e("p",[t._v(" "+t._s(t.$t("server.lastTryTime"))+": "+t._s(t._f("unix2datetime")(s.info.last_try_time))+" ")]):t._e()]):t._e()])})),1),t.ready?e("div",{staticClass:"hero-body"},[e("b-field",{class:{"float-toolbar":t.overHeight},style:{background:t.overHeight?t.isCheckedRowsPingable()||t.isCheckedRowsDeletable()?"rgba(0, 0, 0, 0.1)":"rgba(0, 0, 0, 0.05)":"transparent"},attrs:{id:"toolbar",grouped:"","group-multiline":""}},[e("div",{staticStyle:{"max-width":"60%"}},[e("button",{class:{button:!0,field:!0,"is-info":!0,"mobile-small":!0,"not-display":!t.overHeight&&!t.isCheckedRowsPingable()},attrs:{disabled:!t.isCheckedRowsPingable()},on:{click:function(e){return t.handleClickLatency(!0)}}},[e("i",{staticClass:"iconfont icon-wave"}),e("span",[t._v("PING")])]),e("button",{class:{button:!0,field:!0,"is-info":!0,"mobile-small":!0,"not-display":!t.overHeight&&!t.isCheckedRowsPingable()},attrs:{disabled:!t.isCheckedRowsPingable()},on:{click:function(e){return t.handleClickLatency(!1)}}},[e("i",{staticClass:"iconfont icon-wave"}),e("span",[t._v("HTTP")])]),e("button",{class:{button:!0,field:!0,"is-delete":!0,"mobile-small":!0,"not-display":!t.overHeight&&!t.isCheckedRowsDeletable()},attrs:{disabled:!t.isCheckedRowsDeletable()},on:{click:t.handleClickDelete}},[e("i",{staticClass:"iconfont icon-delete"}),e("span",[t._v(t._s(t.$t("operations.delete")))])]),e("button",{class:{button:!0,field:!0,"is-delete":!0,"mobile-small":!0,"not-show":!0}},[e("i",{staticClass:"iconfont icon-delete"}),e("span",[t._v("placeholder")])]),e("span",{staticClass:"field not-show mobile-small"},[t._v("placeholder")])]),e("div",{staticClass:"right"},[e("b-button",{staticClass:"field mobile-small",attrs:{type:"is-primary"},on:{click:t.handleClickCreate}},[e("i",{staticClass:"iconfont icon-chuangjiangongdan1"}),e("span",[t._v(t._s(t.$t("operations.create")))])]),e("b-button",{staticClass:"field mobile-small",attrs:{type:"is-primary"},on:{click:t.handleClickImport}},[e("i",{staticClass:"iconfont icon-daoruzupu-xianxing"}),e("span",[t._v(t._s(t.$t("operations.import")))])])],1)]),t.tableData.subscriptions.length||t.tableData.servers.length?t._e():e("b-collapse",{staticClass:"card welcome-driver",attrs:{"aria-id":"contentIdForA11y3"},scopedSlots:t._u([{key:"trigger",fn:function(s){return e("div",{staticClass:"card-header",attrs:{role:"button","aria-controls":"contentIdForA11y3"}},[e("p",{staticClass:"card-header-title"},[t._v(" "+t._s(t.$t("welcome.title"))+" ")]),e("a",{staticClass:"card-header-icon"},[e("b-icon",{attrs:{icon:s.open?"menu-down":"menu-up"}})],1)])}}],null,!1,611003742)},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("p",[t._v(t._s(t.$t("welcome.messages.0")))]),e("p",[t._v(t._s(t.$t("welcome.messages.1")))])])]),e("footer",{staticClass:"card-footer"},[e("a",{staticClass:"card-footer-item",on:{click:t.handleClickCreate}},[t._v(t._s(t.$t("operations.create")))]),e("a",{staticClass:"card-footer-item",on:{click:t.handleClickImport}},[t._v(t._s(t.$t("operations.import")))])])]),t.tableData.subscriptions.length||t.tableData.servers.length?e("b-tabs",{staticClass:"main-tabs",attrs:{position:"is-centered",type:"is-toggle-rounded"},on:{input:t.handleTabsChange},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("b-tab-item",{attrs:{label:"SUBSCRIPTION"}},[e("b-field",{attrs:{label:`SUBSCRIPTION(${t.tableData.subscriptions.length})`}},[e("b-table",{attrs:{data:t.tableData.subscriptions,"checked-rows":t.checkedRows,"row-class":(e,s)=>e.connected&&t.runningState.running===t.$t("common.isRunning")?"is-connected-running":e.connected?"is-connected-not-running":null,"default-sort":"id",checkable:""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}}},[e("b-table-column",{attrs:{field:"id",label:"ID",numeric:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}],null,!1,2188296272)}),e("b-table-column",{attrs:{field:"host",label:t.$t("subscription.host"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.host)+" ")]}}],null,!1,3926748541)}),e("b-table-column",{attrs:{field:"remarks",label:t.$t("subscription.remarks"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.remarks)+" ")]}}],null,!1,309477996)}),e("b-table-column",{attrs:{field:"status",label:t.$t("subscription.timeLastUpdate"),width:"260",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.status)+" ")]}}],null,!1,2454658857)}),e("b-table-column",{attrs:{label:t.$t("subscription.numberServers"),centered:"",numeric:"",sortable:"","custom-sort":t.sortNumberServers},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.servers.length)+" ")]}}],null,!1,464684985)}),e("b-table-column",{attrs:{label:t.$t("operations.name"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"operate-box"},[e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-sync",outlined:"",type:"is-warning"},on:{click:function(e){return t.handleClickUpdateSubscription(s.row)}}},[t._v(" "+t._s(t.$t("operations.update"))+" ")]),e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-wendangxiugai",outlined:"",type:"is-info"},on:{click:function(e){return t.handleClickModifySubscription(s.row)}}},[t._v(" "+t._s(t.$t("operations.modify"))+" ")]),e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-share",outlined:"",type:"is-success"},on:{click:function(e){return t.handleClickShare(s.row)}}},[t._v(" "+t._s(t.$t("operations.share"))+" ")])],1)]}}],null,!1,2199245895)})],1)],1)],1),e("b-tab-item",{attrs:{label:"SERVER",icon:""+(t.connectedServerInTab["server"]?" iconfont icon-dian":"")}},[e("b-field",{attrs:{label:`SERVER(${t.tableData.servers.length})`}},[e("b-table",{attrs:{"per-page":"100","current-page":t.currentPage.servers,data:t.tableData.servers,"checked-rows":t.checkedRows,checkable:"","row-class":(e,s)=>e.connected&&t.runningState.running===t.$t("common.isRunning")?"is-connected-running":e.connected?"is-connected-not-running":null,"default-sort":"id"},on:{"update:currentPage":function(e){return t.$set(t.currentPage,"servers",e)},"update:current-page":function(e){return t.$set(t.currentPage,"servers",e)},"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}}},[e("b-table-column",{attrs:{field:"id",label:"ID",numeric:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}],null,!1,2188296272)}),e("b-table-column",{attrs:{field:"name",label:t.$t("server.name"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}],null,!1,2982927002)}),e("b-table-column",{attrs:{field:"address",label:t.$t("server.address"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.address)+" ")]}}],null,!1,2722900651)}),e("b-table-column",{attrs:{field:"net",label:t.$t("server.protocol"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.net)+" ")]}}],null,!1,4003663010)}),e("b-table-column",{staticClass:"ping-latency",attrs:{field:"pingLatency",label:t.$t("server.latency"),sortable:"","custom-sort":t.sortping},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.pingLatency)+" ")]}}],null,!1,692449221)}),e("b-table-column",{attrs:{label:t.$t("operations.name"),sortable:"","custom-sort":t.sortConnections,width:"300"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"operate-box"},[e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont "+(s.row.connected?"icon-Link_disconnect":"icon-lianjie"),outlined:!s.row.connected,type:(s.row.connected,"is-warning")},on:{click:function(e){return t.handleClickAboutConnection(s.row)}}},[t._v(" "+t._s(t.loadBalanceValid?s.row.connected?t.$t("operations.cancel"):t.$t("operations.select"):s.row.connected?t.$t("operations.disconnect"):t.$t("operations.connect"))+" ")]),e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-wendangxiugai",outlined:!s.row.connected,type:"is-info"},on:{click:function(e){return t.handleClickModifyServer(s.row)}}},[t._v(" "+t._s(t.$t("operations.modify"))+" ")]),e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-share",outlined:!s.row.connected,type:"is-success"},on:{click:function(e){return t.handleClickShare(s.row)}}},[t._v(" "+t._s(t.$t("operations.share"))+" ")])],1)]}}],null,!1,3776941652)})],1)],1)],1),t._l(t.tableData.subscriptions,(function(s,o){return e("b-tab-item",{key:s.id,attrs:{label:s.remarks&&s.remarks.toUpperCase()||s.host.toUpperCase(),icon:""+(t.connectedServerInTab["subscriptionServer"][o]?" iconfont icon-dian":"")}},[t.tab===o+2?e("b-field",{attrs:{label:`${s.host.toUpperCase()}(${s.servers.length}${s.info?") (":""}${s.info})`}},[e("b-table",{attrs:{"current-page":t.currentPage[s.id],"per-page":"100",data:s.servers,"checked-rows":t.checkedRows,checkable:"","row-class":(e,s)=>e.connected&&t.runningState.running===t.$t("common.isRunning")?"is-connected-running":e.connected?"is-connected-not-running":null,"default-sort":"id"},on:{"update:currentPage":function(e){return t.$set(t.currentPage,s.id,e)},"update:current-page":function(e){return t.$set(t.currentPage,s.id,e)},"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}}},[e("b-table-column",{attrs:{field:"id",label:"ID",numeric:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}],null,!0)}),e("b-table-column",{attrs:{field:"name",label:t.$t("server.name"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}],null,!0)}),e("b-table-column",{attrs:{field:"address",label:t.$t("server.address"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.address)+" ")]}}],null,!0)}),e("b-table-column",{staticStyle:{"font-size":"0.9em"},attrs:{field:"net",label:t.$t("server.protocol"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.net)+" ")]}}],null,!0)}),e("b-table-column",{staticClass:"ping-latency",attrs:{field:"pingLatency",label:t.$t("server.latency"),sortable:"","custom-sort":t.sortping},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.pingLatency)+" ")]}}],null,!0)}),e("b-table-column",{attrs:{label:t.$t("operations.name"),sortable:"","custom-sort":t.sortConnections,width:"300"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"operate-box"},[e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont "+(s.row.connected?"icon-Link_disconnect":"icon-lianjie"),outlined:!s.row.connected,type:(s.row.connected,"is-warning")},on:{click:function(e){return t.handleClickAboutConnection(s.row,o)}}},[t._v(" "+t._s(t.loadBalanceValid?s.row.connected?t.$t("operations.cancel"):t.$t("operations.select"):s.row.connected?t.$t("operations.disconnect"):t.$t("operations.connect"))+" ")]),e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-winfo-icon-chakanbaogao",outlined:!s.row.connected,type:"is-info"},on:{click:function(e){return t.handleClickViewServer(s.row,o)}}},[t._v(" "+t._s(t.$t("operations.view"))+" ")]),e("b-button",{attrs:{size:"is-small","icon-left":" github-circle iconfont icon-share",outlined:!s.row.connected,type:"is-success"},on:{click:function(e){return t.handleClickShare(s.row,o)}}},[t._v(" "+t._s(t.$t("operations.share"))+" ")])],1)]}}],null,!0)})],1)],1):t._e()],1)}))],2):t._e()],1):e("b-loading",{attrs:{"is-full-page":!0,active:!0}},[e("i",{staticClass:"iconfont icon-loading_ico-copy"})]),e("b-modal",{attrs:{active:t.showModalServer,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.showModalServer=e}}},[e("ModalServer",{attrs:{which:t.which,readonly:t.modalServerReadOnly},on:{submit:t.handleModalServerSubmit}})],1),e("b-modal",{attrs:{active:t.showModalSubscription,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.showModalSubscription=e}}},[e("ModalSubscription",{attrs:{which:t.which},on:{submit:t.handleModalSubscriptionSubmit}})],1),e("input",{staticStyle:{display:"none"},attrs:{id:"QRCodeImport",type:"file",accept:"image/*"}}),e("b-modal",{attrs:{active:t.showModalImport,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.showModalImport=e},"after-enter":t.handleModalImportShow}},[e("div",{staticClass:"modal-card",staticStyle:{width:"350px"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("operations.import")))])]),e("section",{staticClass:"modal-card-body"},[t._v(" "+t._s(t.$t("import.message"))+" "),e("b-input",{ref:"importInput",attrs:{"icon-right":" iconfont icon-camera","icon-right-clickable":""},on:{"icon-right-click":t.handleClickImportQRCode},nativeOn:{keyup:function(e){return t.handleImportEnter.apply(null,arguments)}},model:{value:t.importWhat,callback:function(e){t.importWhat=e},expression:"importWhat"}})],1),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-link is-light",attrs:{type:"button"},on:{click:t.handleClickImportInBatch}},[t._v(" "+t._s(t.$t("operations.inBatch"))+" ")]),e("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"-moz-available"}},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.showModalImport=!1}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:t.handleClickImportConfirm}},[t._v(" "+t._s(t.$t("operations.confirm"))+" ")])])])])]),e("b-modal",{attrs:{active:t.showModalImportInBatch,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.showModalImportInBatch=e},close:function(e){t.showModalImport=!1}}},[e("div",{staticClass:"modal-card",staticStyle:{width:"350px"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("operations.import")))])]),e("section",{staticClass:"modal-card-body"},[t._v(" "+t._s(t.$t("import.batchMessage"))+" "),e("b-input",{ref:"importInput",attrs:{type:"textarea","custom-class":"horizon-scroll"},model:{value:t.importWhat,callback:function(e){t.importWhat=e},expression:"importWhat"}})],1),e("footer",{staticClass:"modal-card-foot"},[e("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"-moz-available"}},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:()=>{t.showModalImport=!1,t.showModalImportInBatch=!1}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:t.handleClickImportConfirm}},[t._v(" "+t._s(t.$t("operations.confirm"))+" ")])])])])])],1)},Bt=[],Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"520px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(" "+t._s(t.$tc("configureServer.title",t.readonly?2:1))+" ")])]),e("section",{ref:"section",class:{"modal-card-body":!0}},[e("b-tabs",{staticClass:"block",attrs:{position:"is-centered",type:"is-boxed is-twitter same-width-5"},model:{value:t.tabChoice,callback:function(e){t.tabChoice=e},expression:"tabChoice"}},[e("b-tab-item",{attrs:{label:"V2RAY"}},[e("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},on:{input:t.handleV2rayProtocolSwitch},model:{value:t.v2ray.protocol,callback:function(e){t.$set(t.v2ray,"protocol",e)},expression:"v2ray.protocol"}},[e("option",{attrs:{value:"vmess"}},[t._v("VMESS")]),e("option",{attrs:{value:"vless"}},[t._v("VLESS")])])],1),e("b-field",{attrs:{label:"Name","label-position":"on-border"}},[e("b-input",{ref:"v2ray_name",attrs:{placeholder:t.$t("configureServer.servername"),expanded:""},model:{value:t.v2ray.ps,callback:function(e){t.$set(t.v2ray,"ps",e)},expression:"v2ray.ps"}})],1),e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"v2ray_add",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:t.v2ray.add,callback:function(e){t.$set(t.v2ray,"add",e)},expression:"v2ray.add"}})],1),e("b-field",{attrs:{label:"Port","label-position":"on-border"}},[e("b-input",{ref:"v2ray_port",attrs:{required:"",placeholder:t.$t("configureServer.port"),type:"number",expanded:""},model:{value:t.v2ray.port,callback:function(e){t.$set(t.v2ray,"port",e)},expression:"v2ray.port"}})],1),e("b-field",{attrs:{label:"ID","label-position":"on-border"}},[e("b-input",{ref:"v2ray_id",attrs:{required:"",placeholder:"UserID",expanded:""},model:{value:t.v2ray.id,callback:function(e){t.$set(t.v2ray,"id",e)},expression:"v2ray.id"}})],1),"vmess"===t.v2ray.protocol?e("b-field",{attrs:{label:"AlterID","label-position":"on-border"}},[e("b-input",{ref:"v2ray_aid",attrs:{placeholder:"AlterID",type:"number",min:"0",max:"65535",required:"",expanded:""},model:{value:t.v2ray.aid,callback:function(e){t.$set(t.v2ray,"aid",e)},expression:"v2ray.aid"}})],1):t._e(),"vmess"===t.v2ray.protocol?e("b-field",{attrs:{label:"Security","label-position":"on-border"}},[e("b-select",{attrs:{expanded:"",required:""},model:{value:t.v2ray.scy,callback:function(e){t.$set(t.v2ray,"scy",e)},expression:"v2ray.scy"}},[e("option",{attrs:{value:"auto"}},[t._v("Auto")]),e("option",{attrs:{value:"aes-128-gcm"}},[t._v("aes-128-gcm")]),e("option",{attrs:{value:"chacha20-poly1305"}},[t._v("chacha20-poly1305")]),e("option",{attrs:{value:"none"}},[t._v("none")]),e("option",{attrs:{value:"zero"}},[t._v("zero")])])],1):t._e(),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"dtls"!==t.v2ray.type,expression:"v2ray.type !== 'dtls'"}],attrs:{label:"TLS","label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},on:{input:t.handleNetworkChange},model:{value:t.v2ray.tls,callback:function(e){t.$set(t.v2ray,"tls",e)},expression:"v2ray.tls"}},[e("option",{attrs:{value:"none"}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"tls"}},[t._v("tls")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.v2ray.tls,expression:"v2ray.tls !== 'none'"}],attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" AllowInsecure "),e("b-tooltip",{directives:[{name:"show",rawName:"v-show",value:"vless"===t.v2ray.protocol,expression:"v2ray.protocol === 'vless'"}],attrs:{type:"is-dark",label:t.$t("server.messages.notRecommend",{name:"VLESS"}),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{ref:"v2ray_allow_insecure",attrs:{expanded:"",required:""},model:{value:t.v2ray.allowInsecure,callback:function(e){t.$set(t.v2ray,"allowInsecure",e)},expression:"v2ray.allowInsecure"}},[e("option",{domProps:{value:!1}},[t._v(t._s(t.$t("operations.no")))]),e("option",{domProps:{value:!0}},[t._v(t._s(t.$t("operations.yes")))])])],2),e("b-field",{attrs:{label:"Network","label-position":"on-border"}},[e("b-select",{ref:"v2ray_net",attrs:{expanded:"",required:""},on:{input:t.handleNetworkChange},model:{value:t.v2ray.net,callback:function(e){t.$set(t.v2ray,"net",e)},expression:"v2ray.net"}},[e("option",{attrs:{value:"tcp"}},[t._v("TCP")]),e("option",{attrs:{value:"kcp"}},[t._v("mKCP")]),e("option",{attrs:{value:"ws"}},[t._v("WebSocket")]),e("option",{attrs:{value:"h2"}},[t._v("HTTP/2")]),e("option",{attrs:{value:"grpc"}},[t._v("gRPC")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"tcp"===t.v2ray.net,expression:"v2ray.net === 'tcp'"}],attrs:{label:"Type","label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.v2ray.type,callback:function(e){t.$set(t.v2ray,"type",e)},expression:"v2ray.type"}},[e("option",{attrs:{value:"none"}},[t._v(" "+t._s(t.$t("configureServer.noObfuscation"))+" ")]),e("option",{attrs:{value:"http"}},[t._v(" "+t._s(t.$t("configureServer.httpObfuscation"))+" ")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"kcp"===t.v2ray.net,expression:"v2ray.net === 'kcp'"}],attrs:{label:"Type","label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.v2ray.type,callback:function(e){t.$set(t.v2ray,"type",e)},expression:"v2ray.type"}},[e("option",{attrs:{value:"none"}},[t._v(" "+t._s(t.$t("configureServer.noObfuscation"))+" ")]),e("option",{attrs:{value:"srtp"}},[t._v(" "+t._s(t.$t("configureServer.srtpObfuscation"))+" ")]),e("option",{attrs:{value:"utp"}},[t._v(" "+t._s(t.$t("configureServer.utpObfuscation"))+" ")]),e("option",{attrs:{value:"wechat-video"}},[t._v(" "+t._s(t.$t("configureServer.wechatVideoObfuscation"))+" ")]),e("option",{attrs:{value:"dtls"}},[t._v(" "+t._s(`${t.$t("configureServer.dtlsObfuscation")}(${t.$t("configureServer.forceTLS")})`)+" ")]),e("option",{attrs:{value:"wireguard"}},[t._v(" "+t._s(t.$t("configureServer.wireguardObfuscation"))+" ")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"ws"===t.v2ray.net||"h2"===t.v2ray.net||"tls"===t.v2ray.tls||"tcp"===t.v2ray.net&&"http"===t.v2ray.type,expression:"\n            v2ray.net === 'ws' ||\n            v2ray.net === 'h2' ||\n            v2ray.tls === 'tls' ||\n            (v2ray.net === 'tcp' && v2ray.type === 'http')\n          "}],attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{attrs:{placeholder:t.$t("configureServer.hostObfuscation"),expanded:""},model:{value:t.v2ray.host,callback:function(e){t.$set(t.v2ray,"host",e)},expression:"v2ray.host"}})],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"tls"===t.v2ray.tls,expression:"v2ray.tls === 'tls'"}],attrs:{label:"Alpn","label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"h2,http/1.1",expanded:""},model:{value:t.v2ray.alpn,callback:function(e){t.$set(t.v2ray,"alpn",e)},expression:"v2ray.alpn"}})],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"ws"===t.v2ray.net||"h2"===t.v2ray.net||"tcp"===t.v2ray.net&&"http"===t.v2ray.type,expression:"\n            v2ray.net === 'ws' ||\n            v2ray.net === 'h2' ||\n            (v2ray.net === 'tcp' && v2ray.type === 'http')\n          "}],attrs:{label:"Path","label-position":"on-border"}},[e("b-input",{attrs:{placeholder:t.$t("configureServer.pathObfuscation"),expanded:""},model:{value:t.v2ray.path,callback:function(e){t.$set(t.v2ray,"path",e)},expression:"v2ray.path"}})],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"mkcp"===t.v2ray.net||"kcp"===t.v2ray.net,expression:"v2ray.net === 'mkcp' || v2ray.net === 'kcp'"}],attrs:{label:"Seed","label-position":"on-border"}},[e("b-input",{attrs:{placeholder:t.$t("configureServer.seedObfuscation"),expanded:""},model:{value:t.v2ray.path,callback:function(e){t.$set(t.v2ray,"path",e)},expression:"v2ray.path"}})],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"grpc"===t.v2ray.net,expression:"v2ray.net === 'grpc'"}],attrs:{label:"ServiceName","label-position":"on-border"}},[e("b-input",{ref:"v2ray_service_name",attrs:{type:"text",expanded:""},model:{value:t.v2ray.path,callback:function(e){t.$set(t.v2ray,"path",e)},expression:"v2ray.path"}})],1)],1),e("b-tab-item",{attrs:{label:"SS"}},[e("b-field",{attrs:{label:"Name","label-position":"on-border"}},[e("b-input",{ref:"ss_name",attrs:{placeholder:t.$t("configureServer.servername"),expanded:""},model:{value:t.ss.name,callback:function(e){t.$set(t.ss,"name",e)},expression:"ss.name"}})],1),e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"ss_server",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:t.ss.server,callback:function(e){t.$set(t.ss,"server",e)},expression:"ss.server"}})],1),e("b-field",{attrs:{label:"Port","label-position":"on-border"}},[e("b-input",{ref:"ss_port",attrs:{required:"",placeholder:t.$t("configureServer.port"),type:"number",expanded:""},model:{value:t.ss.port,callback:function(e){t.$set(t.ss,"port",e)},expression:"ss.port"}})],1),e("b-field",{attrs:{label:"Password","label-position":"on-border"}},[e("b-input",{ref:"ss_password",attrs:{required:"",placeholder:t.$t("configureServer.password"),expanded:""},model:{value:t.ss.password,callback:function(e){t.$set(t.ss,"password",e)},expression:"ss.password"}})],1),e("b-field",{attrs:{label:"Method","label-position":"on-border"}},[e("b-select",{ref:"ss_method",attrs:{expanded:"",required:""},model:{value:t.ss.method,callback:function(e){t.$set(t.ss,"method",e)},expression:"ss.method"}},[e("option",{attrs:{value:"aes-128-gcm"}},[t._v("aes-128-gcm")]),e("option",{attrs:{value:"aes-256-gcm"}},[t._v("aes-256-gcm")]),e("option",{attrs:{value:"chacha20-poly1305"}},[t._v("chacha20-poly1305")]),e("option",{attrs:{value:"chacha20-ietf-poly1305"}},[t._v(" chacha20-ietf-poly1305 ")]),e("option",{attrs:{value:"plain"}},[t._v("plain")]),e("option",{attrs:{value:"none"}},[t._v("none")])])],1),e("b-field",{attrs:{label:"Plugin","label-position":"on-border"}},[e("b-select",{ref:"ss_plugin",attrs:{expanded:""},model:{value:t.ss.plugin,callback:function(e){t.$set(t.ss,"plugin",e)},expression:"ss.plugin"}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"simple-obfs"}},[t._v("simple-obfs")]),e("option",{attrs:{value:"v2ray-plugin"}},[t._v("v2ray-plugin")])])],1),"simple-obfs"===t.ss.plugin||"v2ray-plugin"===t.ss.plugin?e("b-field",{staticClass:"with-icon-alert",attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" Impl "),e("b-tooltip",{attrs:{type:"is-dark",label:t.$t("setting.messages.ssPluginImpl"),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-samll",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{ref:"ss_plugin_impl",attrs:{expanded:""},model:{value:t.ss.impl,callback:function(e){t.$set(t.ss,"impl",e)},expression:"ss.impl"}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("setting.options.default")))]),e("option",{attrs:{value:"chained"}},[t._v("chained")]),e("option",{attrs:{value:"transport"}},[t._v("transport")])])],2):t._e(),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"simple-obfs"===t.ss.plugin,expression:"ss.plugin === 'simple-obfs'"}],attrs:{label:"Obfs","label-position":"on-border"}},[e("b-select",{ref:"ss_obfs",attrs:{expanded:""},model:{value:t.ss.obfs,callback:function(e){t.$set(t.ss,"obfs",e)},expression:"ss.obfs"}},[e("option",{attrs:{value:"http"}},[t._v("http")]),e("option",{attrs:{value:"tls"}},[t._v("tls")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"v2ray-plugin"===t.ss.plugin,expression:"ss.plugin === 'v2ray-plugin'"}],attrs:{label:"Mode","label-position":"on-border"}},[e("b-select",{ref:"ss_mode",attrs:{expanded:""},model:{value:t.ss.mode,callback:function(e){t.$set(t.ss,"mode",e)},expression:"ss.mode"}},[e("option",{attrs:{value:"websocket"}},[t._v("websocket")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"v2ray-plugin"===t.ss.plugin,expression:"ss.plugin === 'v2ray-plugin'"}],attrs:{label:"TLS","label-position":"on-border"}},[e("b-select",{ref:"ss_tls",attrs:{expanded:""},model:{value:t.ss.tls,callback:function(e){t.$set(t.ss,"tls",e)},expression:"ss.tls"}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("setting.options.off")))]),e("option",{attrs:{value:"tls"}},[t._v("tls")])])],1),"simple-obfs"===t.ss.plugin&&("http"===t.ss.obfs||"tls"===t.ss.obfs)||"v2ray-plugin"===t.ss.plugin?e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"ss_host",attrs:{placeholder:"(optional)",expanded:""},model:{value:t.ss.host,callback:function(e){t.$set(t.ss,"host",e)},expression:"ss.host"}})],1):t._e(),"simple-obfs"===t.ss.plugin&&"http"===t.ss.obfs||"v2ray-plugin"===t.ss.plugin?e("b-field",{attrs:{label:"Path","label-position":"on-border"}},[e("b-input",{ref:"ss_path",attrs:{placeholder:"/",expanded:""},model:{value:t.ss.path,callback:function(e){t.$set(t.ss,"path",e)},expression:"ss.path"}})],1):t._e()],1),e("b-tab-item",{attrs:{label:"SSR"}},[e("b-field",{attrs:{label:"Name","label-position":"on-border"}},[e("b-input",{ref:"ssr_name",attrs:{placeholder:t.$t("configureServer.servername"),expanded:""},model:{value:t.ssr.name,callback:function(e){t.$set(t.ssr,"name",e)},expression:"ssr.name"}})],1),e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"ssr_server",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:t.ssr.server,callback:function(e){t.$set(t.ssr,"server",e)},expression:"ssr.server"}})],1),e("b-field",{attrs:{label:"Port","label-position":"on-border"}},[e("b-input",{ref:"ssr_port",attrs:{required:"",placeholder:t.$t("configureServer.port"),type:"number",expanded:""},model:{value:t.ssr.port,callback:function(e){t.$set(t.ssr,"port",e)},expression:"ssr.port"}})],1),e("b-field",{attrs:{label:"Password","label-position":"on-border"}},[e("b-input",{ref:"ssr_password",attrs:{required:"",placeholder:t.$t("configureServer.password"),expanded:""},model:{value:t.ssr.password,callback:function(e){t.$set(t.ssr,"password",e)},expression:"ssr.password"}})],1),e("b-field",{attrs:{label:"Method","label-position":"on-border"}},[e("b-select",{ref:"ssr_method",attrs:{expanded:"",required:""},model:{value:t.ssr.method,callback:function(e){t.$set(t.ssr,"method",e)},expression:"ssr.method"}},[e("option",{attrs:{value:"aes-128-cfb"}},[t._v("aes-128-cfb")]),e("option",{attrs:{value:"aes-192-cfb"}},[t._v("aes-192-cfb")]),e("option",{attrs:{value:"aes-256-cfb"}},[t._v("aes-256-cfb")]),e("option",{attrs:{value:"aes-128-ctr"}},[t._v("aes-128-ctr")]),e("option",{attrs:{value:"aes-192-ctr"}},[t._v("aes-192-ctr")]),e("option",{attrs:{value:"aes-256-ctr"}},[t._v("aes-256-ctr")]),e("option",{attrs:{value:"aes-128-ofb"}},[t._v("aes-128-ofb")]),e("option",{attrs:{value:"aes-192-ofb"}},[t._v("aes-192-ofb")]),e("option",{attrs:{value:"aes-256-ofb"}},[t._v("aes-256-ofb")]),e("option",{attrs:{value:"des-cfb"}},[t._v("des-cfb")]),e("option",{attrs:{value:"bf-cfb"}},[t._v("bf-cfb")]),e("option",{attrs:{value:"cast5-cfb"}},[t._v("cast5-cfb")]),e("option",{attrs:{value:"rc4-md5"}},[t._v("rc4-md5")]),e("option",{attrs:{value:"chacha20"}},[t._v("chacha20")]),e("option",{attrs:{value:"chacha20-ietf"}},[t._v("chacha20-ietf")]),e("option",{attrs:{value:"salsa20"}},[t._v("salsa20")]),e("option",{attrs:{value:"camellia-128-cfb"}},[t._v("camellia-128-cfb")]),e("option",{attrs:{value:"camellia-192-cfb"}},[t._v("camellia-192-cfb")]),e("option",{attrs:{value:"camellia-256-cfb"}},[t._v("camellia-256-cfb")]),e("option",{attrs:{value:"idea-cfb"}},[t._v("idea-cfb")]),e("option",{attrs:{value:"rc2-cfb"}},[t._v("rc2-cfb")]),e("option",{attrs:{value:"seed-cfb"}},[t._v("seed-cfb")]),e("option",{attrs:{value:"none"}},[t._v("none")])])],1),e("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[e("b-select",{ref:"ssr_proto",attrs:{expanded:"",required:""},model:{value:t.ssr.proto,callback:function(e){t.$set(t.ssr,"proto",e)},expression:"ssr.proto"}},[e("option",{attrs:{value:"origin"}},[t._v("origin")]),e("option",{attrs:{value:"verify_sha1"}},[t._v("verify_sha1")]),e("option",{attrs:{value:"auth_sha1_v4"}},[t._v("auth_sha1_v4")]),e("option",{attrs:{value:"auth_aes128_md5"}},[t._v("auth_aes128_md5")]),e("option",{attrs:{value:"auth_aes128_sha1"}},[t._v("auth_aes128_sha1")]),e("option",{attrs:{value:"auth_chain_a"}},[t._v("auth_chain_a")]),e("option",{attrs:{value:"auth_chain_b"}},[t._v("auth_chain_b")])])],1),"origin"!==t.ssr.proto?e("b-field",{attrs:{label:"Protocol Param","label-position":"on-border"}},[e("b-input",{ref:"ssr_protoParam",attrs:{placeholder:"(optional)",expanded:""},model:{value:t.ssr.protoParam,callback:function(e){t.$set(t.ssr,"protoParam",e)},expression:"ssr.protoParam"}})],1):t._e(),e("b-field",{attrs:{label:"Obfs","label-position":"on-border"}},[e("b-select",{ref:"ssr_obfs",attrs:{expanded:"",required:""},model:{value:t.ssr.obfs,callback:function(e){t.$set(t.ssr,"obfs",e)},expression:"ssr.obfs"}},[e("option",{attrs:{value:"plain"}},[t._v("plain")]),e("option",{attrs:{value:"http_simple"}},[t._v("http_simple")]),e("option",{attrs:{value:"http_post"}},[t._v("http_post")]),e("option",{attrs:{value:"random_head"}},[t._v("random_head")]),e("option",{attrs:{value:"tls1.2_ticket_auth"}},[t._v("tls1.2_ticket_auth")])])],1),"plain"!==t.ssr.obfs?e("b-field",{attrs:{label:"Obfs Param","label-position":"on-border"}},[e("b-input",{ref:"ssr_obfsParam",attrs:{placeholder:"(optional)",expanded:""},model:{value:t.ssr.obfsParam,callback:function(e){t.$set(t.ssr,"obfsParam",e)},expression:"ssr.obfsParam"}})],1):t._e()],1),e("b-tab-item",{attrs:{label:"Trojan"}},[e("b-field",{attrs:{label:"Name","label-position":"on-border"}},[e("b-input",{ref:"trojan_name",attrs:{placeholder:t.$t("configureServer.servername"),expanded:""},model:{value:t.trojan.name,callback:function(e){t.$set(t.trojan,"name",e)},expression:"trojan.name"}})],1),e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"trojan_server",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:t.trojan.server,callback:function(e){t.$set(t.trojan,"server",e)},expression:"trojan.server"}})],1),e("b-field",{attrs:{label:"Port","label-position":"on-border"}},[e("b-input",{ref:"trojan_port",attrs:{required:"",placeholder:t.$t("configureServer.port"),type:"number",expanded:""},model:{value:t.trojan.port,callback:function(e){t.$set(t.trojan,"port",e)},expression:"trojan.port"}})],1),e("b-field",{attrs:{label:"Password","label-position":"on-border"}},[e("b-input",{ref:"trojan_password",attrs:{required:"",placeholder:t.$t("configureServer.password"),expanded:""},model:{value:t.trojan.password,callback:function(e){t.$set(t.trojan,"password",e)},expression:"trojan.password"}})],1),e("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[e("b-select",{ref:"trojan_method",attrs:{expanded:"",required:""},model:{value:t.trojan.method,callback:function(e){t.$set(t.trojan,"method",e)},expression:"trojan.method"}},[e("option",{attrs:{value:"origin"}},[t._v(t._s(t.$t("configureServer.origin")))]),e("option",{attrs:{value:"shadowsocks"}},[t._v("shadowsocks")])])],1),"shadowsocks"===t.trojan.method?e("b-field",{attrs:{label:"Shadowsocks Cipher","label-position":"on-border"}},[e("b-select",{ref:"trojan_ss_cipher",attrs:{expanded:"",required:""},model:{value:t.trojan.ssCipher,callback:function(e){t.$set(t.trojan,"ssCipher",e)},expression:"trojan.ssCipher"}},[e("option",{attrs:{value:"aes-128-gcm"}},[t._v("aes-128-gcm")]),e("option",{attrs:{value:"aes-256-gcm"}},[t._v("aes-256-gcm")]),e("option",{attrs:{value:"chacha20-poly1305"}},[t._v("chacha20-poly1305")]),e("option",{attrs:{value:"chacha20-ietf-poly1305"}},[t._v(" chacha20-ietf-poly1305 ")])])],1):t._e(),"shadowsocks"===t.trojan.method?e("b-field",{attrs:{label:"Shadowsocks Password","label-position":"on-border"}},[e("b-input",{ref:"trojan_ss_password",attrs:{required:"",placeholder:`shadowsocks${t.$t("configureServer.password")}`,expanded:""},model:{value:t.trojan.ssPassword,callback:function(e){t.$set(t.trojan,"ssPassword",e)},expression:"trojan.ssPassword"}})],1):t._e(),e("b-field",{attrs:{"label-position":"on-border"}},[e("template",{slot:"label"},[t._v(" AllowInsecure "),e("b-tooltip",{directives:[{name:"show",rawName:"v-show",value:"origin"!==t.trojan.method||"none"!==t.trojan.obfs,expression:"trojan.method !== 'origin' || trojan.obfs !== 'none'"}],attrs:{type:"is-dark",label:t.$t("server.messages.notAllowInsecure",{name:"Trojan-Go"}),multilined:"",position:"is-right"}},[e("b-icon",{staticStyle:{position:"relative",top:"2px",right:"3px","font-weight":"normal"},attrs:{size:"is-small",icon:" iconfont icon-help-circle-outline"}})],1)],1),e("b-select",{ref:"trojan_allow_insecure",attrs:{expanded:"",required:""},model:{value:t.trojan.allowInsecure,callback:function(e){t.$set(t.trojan,"allowInsecure",e)},expression:"trojan.allowInsecure"}},[e("option",{domProps:{value:!1}},[t._v(t._s(t.$t("operations.no")))]),e("option",{attrs:{disabled:"origin"!==t.trojan.method||"none"!==t.trojan.obfs},domProps:{value:!0}},[t._v(" "+t._s(t.$t("operations.yes"))+" ")])])],2),e("b-field",{attrs:{label:"SNI(Peer)","label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"SNI(Peer)",expanded:""},model:{value:t.trojan.peer,callback:function(e){t.$set(t.trojan,"peer",e)},expression:"trojan.peer"}})],1),e("b-field",{attrs:{label:"Obfs","label-position":"on-border"}},[e("b-select",{ref:"trojan_obfs",attrs:{expanded:"",required:""},model:{value:t.trojan.obfs,callback:function(e){t.$set(t.trojan,"obfs",e)},expression:"trojan.obfs"}},[e("option",{attrs:{value:"none"}},[t._v(" "+t._s(t.$t("configureServer.noObfuscation"))+" ")]),e("option",{attrs:{value:"websocket"}},[t._v("websocket")])])],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"websocket"===t.trojan.obfs,expression:"trojan.obfs === 'websocket'"}],attrs:{label:"Websocket Host","label-position":"on-border"}},[e("b-input",{attrs:{expanded:""},model:{value:t.trojan.host,callback:function(e){t.$set(t.trojan,"host",e)},expression:"trojan.host"}})],1),e("b-field",{directives:[{name:"show",rawName:"v-show",value:"websocket"===t.trojan.obfs,expression:"trojan.obfs === 'websocket'"}],attrs:{label:"Websocket Path","label-position":"on-border"}},[e("b-input",{attrs:{placeholder:"/",expanded:""},model:{value:t.trojan.path,callback:function(e){t.$set(t.trojan,"path",e)},expression:"trojan.path"}})],1)],1),e("b-tab-item",{attrs:{label:"HTTP"}},[e("b-field",{attrs:{label:"Protocol","label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.http.protocol,callback:function(e){t.$set(t.http,"protocol",e)},expression:"http.protocol"}},[e("option",{attrs:{value:"http"}},[t._v("HTTP")]),e("option",{attrs:{value:"https"}},[t._v("HTTPS")])])],1),e("b-field",{attrs:{label:"Name","label-position":"on-border"}},[e("b-input",{ref:"http_name",attrs:{placeholder:t.$t("configureServer.servername"),expanded:""},model:{value:t.http.name,callback:function(e){t.$set(t.http,"name",e)},expression:"http.name"}})],1),e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"http_host",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:t.http.host,callback:function(e){t.$set(t.http,"host",e)},expression:"http.host"}})],1),e("b-field",{attrs:{label:"Port","label-position":"on-border"}},[e("b-input",{ref:"http_port",attrs:{required:"",placeholder:t.$t("configureServer.port"),type:"number",expanded:""},model:{value:t.http.port,callback:function(e){t.$set(t.http,"port",e)},expression:"http.port"}})],1),e("b-field",{attrs:{label:"Username","label-position":"on-border"}},[e("b-input",{ref:"http_username",attrs:{placeholder:t.$t("configureServer.username"),expanded:""},model:{value:t.http.username,callback:function(e){t.$set(t.http,"username",e)},expression:"http.username"}})],1),e("b-field",{attrs:{label:"Password","label-position":"on-border"}},[e("b-input",{ref:"http_password",attrs:{placeholder:t.$t("configureServer.password"),expanded:""},model:{value:t.http.password,callback:function(e){t.$set(t.http,"password",e)},expression:"http.password"}})],1)],1),e("b-tab-item",{attrs:{label:"SOCKS5"}},[e("b-field",{attrs:{label:"Name","label-position":"on-border"}},[e("b-input",{ref:"socks5_name",attrs:{placeholder:t.$t("configureServer.servername"),expanded:""},model:{value:t.socks5.name,callback:function(e){t.$set(t.socks5,"name",e)},expression:"socks5.name"}})],1),e("b-field",{attrs:{label:"Host","label-position":"on-border"}},[e("b-input",{ref:"socks5_host",attrs:{required:"",placeholder:"IP / HOST",expanded:""},model:{value:t.socks5.host,callback:function(e){t.$set(t.socks5,"host",e)},expression:"socks5.host"}})],1),e("b-field",{attrs:{label:"Port","label-position":"on-border"}},[e("b-input",{ref:"socks5_port",attrs:{required:"",placeholder:t.$t("configureServer.port"),type:"number",expanded:""},model:{value:t.socks5.port,callback:function(e){t.$set(t.socks5,"port",e)},expression:"socks5.port"}})],1),e("b-field",{attrs:{label:"Username","label-position":"on-border"}},[e("b-input",{ref:"socks5_username",attrs:{placeholder:t.$t("configureServer.username"),expanded:""},model:{value:t.socks5.username,callback:function(e){t.$set(t.socks5,"username",e)},expression:"socks5.username"}})],1),e("b-field",{attrs:{label:"Password","label-position":"on-border"}},[e("b-input",{ref:"socks5_password",attrs:{placeholder:t.$t("configureServer.password"),expanded:""},model:{value:t.socks5.password,callback:function(e){t.$set(t.socks5,"password",e)},expression:"socks5.password"}})],1)],1)],1)],1),t.readonly?t._e():e("footer",{staticClass:"modal-card-foot flex-end"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.saveApply"))+" ")])])])},Gt=[],Qt={name:"ModalServer",props:{which:{type:Object,default(){return null}},readonly:{type:Boolean,default:!1}},data:()=>({vlessVersion:0,v2ray:{ps:"",add:"",port:"",id:"",aid:"",net:"tcp",type:"none",host:"",path:"",tls:"none",alpn:"",scy:"auto",v:"",allowInsecure:!1,protocol:"vmess"},ss:{method:"aes-128-gcm",plugin:"",obfs:"http",tls:"",path:"/",mode:"websocket",host:"",password:"",server:"",port:"",name:"",protocol:"ss",impl:""},ssr:{method:"aes-128-cfb",password:"",server:"",port:"",name:"",proto:"origin",protoParam:"",obfs:"plain",obfsParam:"",protocol:"ssr"},trojan:{name:"",server:"",peer:"",host:"",path:"",allowInsecure:!1,port:"",password:"",method:"origin",ssCipher:"aes-128-gcm",ssPassword:"",obfs:"none",protocol:"trojan"},http:{username:"",password:"",host:"",port:"",protocol:"http",name:""},socks5:{username:"",password:"",host:"",port:"",protocol:"socks5",name:""},tabChoice:0}),computed:{filteredDataArray(){return this.presetFlows.filter((t=>t.toString().indexOf(this.v2ray.flow)>=0))}},mounted(){null!==this.which&&this.$axios({url:`${localStorage["backendAddress"]}/api/sharingAddress`,method:"get",params:{touch:this.which}}).then((t=>{v(t,this,(()=>{t.data.data.sharingAddress.toLowerCase().startsWith("vmess://")||t.data.data.sharingAddress.toLowerCase().startsWith("vless://")?(this.v2ray=this.resolveURL(t.data.data.sharingAddress),this.tabChoice=0):t.data.data.sharingAddress.toLowerCase().startsWith("ss://")?(this.ss=this.resolveURL(t.data.data.sharingAddress),this.tabChoice=1):t.data.data.sharingAddress.toLowerCase().startsWith("ssr://")?(this.ssr=this.resolveURL(t.data.data.sharingAddress),this.tabChoice=2):t.data.data.sharingAddress.toLowerCase().startsWith("trojan://")||t.data.data.sharingAddress.toLowerCase().startsWith("trojan-go://")?(this.trojan=this.resolveURL(t.data.data.sharingAddress),this.tabChoice=3):t.data.data.sharingAddress.toLowerCase().startsWith("http://")||t.data.data.sharingAddress.toLowerCase().startsWith("https://")?(this.http=this.resolveURL(t.data.data.sharingAddress),this.tabChoice=4):t.data.data.sharingAddress.toLowerCase().startsWith("socks5://")&&(this.socks5=this.resolveURL(t.data.data.sharingAddress),this.tabChoice=5),this.$nextTick((()=>{this.readonly&&(this.$refs.section.querySelectorAll("input, textarea").forEach((t=>t.readOnly="readOnly")),this.$refs.section.querySelectorAll("select").forEach((t=>{const e=t.querySelector(`option[value="${t.value}"]`).textContent;console.log(t.value,e),t.outerHTML=`<input type="text" class="input" readonly="readonly" value="${e}">`})))}))}))}))},methods:{handleV2rayProtocolSwitch(){},resolveURL(t){if(t.toLowerCase().startsWith("vmess://")){let e=JSON.parse(E.Base64.decode(t.substring(t.indexOf("://")+3)));return e.ps=decodeURIComponent(e.ps),e.tls=e.tls||"none",e.type=e.type||"none",e.scy=e.scy||"auto",e.protocol=e.protocol||"vmess",e}if(t.toLowerCase().startsWith("vless://")){let e=g(t);const s={ps:decodeURIComponent(e.hash),add:e.host,port:e.port,id:decodeURIComponent(e.username),net:e.params.type||"tcp",type:e.params.headerType||"none",host:e.params.sni||e.params.host||"",path:e.params.path||e.params.serviceName||"",alpn:e.params.alpn||"",tls:e.params.security||"none",allowInsecure:e.params.allowInsecure||!1,protocol:"vless"};return""!==s.alpn&&(s.alpn=decodeURIComponent(s.alpn)),"mkcp"!==s.net&&"kcp"!==s.net||(s.path=e.params.seed),console.log(s),s}if(t.toLowerCase().startsWith("ss://")){let s,o=g(t);if(o.password)s=[o.username,o.password];else try{o.username=E.Base64.decode(decodeURIComponent(o.username)),s=o.username.split(":"),s.length>2&&(s[1]=s.slice(1).join(":"),s=s.slice(0,2))}catch(e){}console.log(s),o.hash=decodeURIComponent(o.hash);let a={method:s[0],password:s[1],server:o.host,port:o.port,name:o.hash,obfs:"http",plugin:"",protocol:"ss",impl:""};if(o.params.plugin){o.params.plugin=decodeURIComponent(o.params.plugin);const t=o.params.plugin.split(";");switch(a.plugin=t[0],a.plugin){case"obfs-local":case"simpleobfs":a.plugin="simple-obfs";break;case"v2ray-plugin":a.tls="",a.mode="websocket";break}for(let e=1;e<t.length;e++){const s=t[e].split("=");switch(s[0]){case"obfs":a.obfs=s[1];break;case"host":case"obfs-host":a.host=s[1];break;case"path":case"obfs-path":a.path=s[1];break;case"mode":a.mode=s[1];break;case"tls":a.tls="tls";break;case"impl":a.impl=s[1]}}}return a}if(t.toLowerCase().startsWith("ssr://")){t=E.Base64.decode(t.substr(6));let e=t.split("/?"),s=e[1].split("&"),o={};for(let t of s){let[e,s]=t.split("=",2);s=E.Base64.decode(s),o[e]=s}let a=e[0].split(":");return a.length>6&&(a[a.length-6]=a.slice(0,a.length-5).join(":"),a=a.slice(a.length-6)),a[5]=E.Base64.decode(a[5]),{method:a[3],password:a[5],server:a[0],port:a[1],name:o["remarks"],proto:a[2],protoParam:o["protoparam"],obfs:a[4],obfsParam:o["obfsparam"],protocol:"ssr"}}if(t.toLowerCase().startsWith("trojan://")||t.toLowerCase().startsWith("trojan-go://")){let e=g(t);const s={password:decodeURIComponent(e.username),server:e.host,port:e.port,name:decodeURIComponent(e.hash),peer:e.params.peer||e.params.sni||"",allowInsecure:!0===e.params.allowInsecure||"1"===e.params.allowInsecure,method:"origin",obfs:"none",ssCipher:"aes-128-gcm",protocol:"trojan"};if(t.toLowerCase().startsWith("")){if(console.log(e.params.encryption),e.params.encryption?.startsWith("ss;")){s.method="shadowsocks";const t=e.params.encryption.split(";");s.ssCipher=t[1],s.ssPassword=t[2]}const t={original:"none","":"none",ws:"websocket"};s.obfs=t[e.params.type||""],"ws"===s.obfs&&(s.obfs="websocket"),"websocket"===s.obfs&&(s.host=e.params.host||"",s.path=e.params.path||"/")}return s}if(t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")){let e=g(t);return{username:decodeURIComponent(e.username),password:decodeURIComponent(e.password),host:e.host,port:e.port,protocol:e.protocol,name:decodeURIComponent(e.hash)}}if(t.toLowerCase().startsWith("socks5://")){let e=g(t);return{username:decodeURIComponent(e.username),password:decodeURIComponent(e.password),host:e.host,port:e.port,protocol:e.protocol,name:decodeURIComponent(e.hash)}}return null},generateURL(t){let e,s={},o={};switch(t.protocol){case"vless":return o={type:t.net,security:t.tls,path:t.path,host:t.host,headerType:t.type,sni:t.host,flow:t.flow,allowInsecure:t.allowInsecure},""!==t.alpn&&(o.alpn=t.alpn),"grpc"===t.net&&(o.serviceName=t.path),"mkcp"!==t.net&&"kcp"!==t.net||(o.seed=t.path),y({protocol:"vless",username:t.id,host:t.add,port:t.port,hash:t.ps,params:o});case"vmess":switch(s=Object.assign({},t),s.net){case"kcp":case"tcp":case"quic":break;default:s.type=""}switch(s.net){case"ws":case"h2":case"http":case"quic":case"grpc":case"kcp":case"mkcp":break;default:if("tcp"===s.net&&"http"===s.type)break;s.path=""}return"vless"===s.protocol&&"xtls"===s.tls||delete s.flow,"vmess://"+E.Base64.encode(JSON.stringify(s));case"ss":if(e=`ss://${E.Base64.encode(`${t.method}:${t.password}`)}@${t.server}:${t.port}/`,t.plugin){const s=[t.plugin];"v2ray-plugin"===t.plugin?(t.tls&&s.push("tls"),"websocket"!==t.mode&&s.push("mode="+t.mode),t.host&&s.push("host="+t.host),t.path&&(t.path.startsWith("/")||(t.path="/"+t.path),s.push("path="+t.path)),t.impl&&s.push("impl="+t.impl)):(s.push("obfs="+t.obfs),s.push("obfs-host="+t.host),"http"===t.obfs&&s.push("obfs-path="+t.path),t.impl&&s.push("impl="+t.impl)),e+=`?plugin=${encodeURIComponent(s.join(";"))}`}return e+=t.name.length?`#${encodeURIComponent(t.name)}`:"",e;case"ssr":return`ssr://${E.Base64.encode(`${t.server}:${t.port}:${t.proto}:${t.method}:${t.obfs}:${E.Base64.encodeURI(t.password)}/?remarks=${E.Base64.encodeURI(t.name)}&protoparam=${E.Base64.encodeURI(t.protoParam)}&obfsparam=${E.Base64.encodeURI(t.obfsParam)}`)}`;case"trojan":return o={allowInsecure:t.allowInsecure},""!==t.peer&&(o.sni=t.peer),e="trojan","origin"===t.method&&"none"===t.obfs||(e="trojan-go",o.type="none"===t.obfs?"original":"ws","shadowsocks"===t.method&&(o.encryption=`ss;${t.ssCipher};${t.ssPassword}`),"ws"===o.type&&(o.host=t.host||"",o.path=t.path||"/"),delete o.allowInsecure),y({protocol:e,username:t.password,host:t.server,port:t.port,hash:t.name,params:o});case"http":case"https":return e={protocol:t.protocol+"-proxy",host:t.host,port:t.port,hash:t.name},t.username&&t.password&&Object.assign(e,{username:t.username,password:t.password}),y(e);case"socks5":return e={protocol:"socks5",host:t.host,port:t.port,hash:t.name},t.username&&t.password&&Object.assign(e,{username:t.username,password:t.password}),y(e)}return null},handleNetworkChange(){this.v2ray.type="none","none"===this.v2ray.tls&&"grpc"===this.v2ray.net&&(this.$buefy.toast.open({message:this.$t("setting.messages.grpcShouldWithTls"),type:"is-warning",position:"is-top",queue:!1,duration:5e3}),this.$nextTick((()=>{this.v2ray.tls="tls"})))},async handleClickSubmit(){let t=!0;for(let s in this.$refs){if(!this.$refs.hasOwnProperty(s))continue;if(0===this.tabChoice&&!s.startsWith("v2ray_"))continue;if(1===this.tabChoice&&!s.startsWith("ss_"))continue;if(2===this.tabChoice&&!s.startsWith("ssr_"))continue;if(3===this.tabChoice&&!s.startsWith("trojan_"))continue;if(4===this.tabChoice&&!s.startsWith("http_"))continue;if(5===this.tabChoice&&!s.startsWith("socks5_"))continue;let e=this.$refs[s];e&&(e.$el.offsetParent&&e.hasOwnProperty("checkHtml5Validity")&&"function"===typeof e.checkHtml5Validity&&!e.checkHtml5Validity()&&(console.error("validate failed",e),t=!1))}if(!t)return;let e="";if(0===this.tabChoice){if(!0===this.v2ray.allowInsecure||"true"===this.v2ray.allowInsecure){const{result:t}=await this.$buefy.dialog.confirm({title:this.$t("InSecureConfirm.title"),message:this.$t("InSecureConfirm.message"),confirmText:this.$t("InSecureConfirm.confirm"),cancelText:this.$t("InSecureConfirm.cancel"),type:"is-danger",hasIcon:!0,onConfirm:()=>!0,onCancel:()=>!1});if(!t)return}e=this.generateURL(this.v2ray)}else 1===this.tabChoice?e=this.generateURL(this.ss):2===this.tabChoice?e=this.generateURL(this.ssr):3===this.tabChoice?e=this.generateURL(this.trojan):4===this.tabChoice?e=this.generateURL(this.http):5===this.tabChoice&&(e=this.generateURL(this.socks5));this.$emit("submit",e)}}},Kt=Qt,Yt=(0,R.Z)(Kt,Zt,Gt,!1,null,null,null),Jt=Yt.exports,Xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"400px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("configureSubscription.title")))])]),e("section",{staticClass:"modal-card-body"},[e("b-field",{attrs:{label:"REMARKS"}},[e("b-input",{attrs:{placeholder:t.$t("subscription.remarks")},model:{value:t.which.remarks,callback:function(e){t.$set(t.which,"remarks",e)},expression:"which.remarks"}})],1)],1),e("footer",{staticClass:"modal-card-foot flex-end"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$parent.close()}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.saveApply"))+" ")])])])},te=[],ee={name:"ModalSubscription",props:{which:{type:Object,default(){return null}}},methods:{handleClickSubmit(){this.$emit("submit",this.which)}}},se=ee,oe=(0,R.Z)(se,Xt,te,!1,null,null,null),ae=oe.exports,ne={name:"Node",components:{ModalSubscription:ae,ModalServer:Jt},filters:{unix2datetime(t){t=lt.unix(t);let e=lt();return"zh"===localStorage["_lang"]?e=e.locale("zh-cn"):"en"===localStorage["_lang"]&&(e=e.locale("en")),e.to(t)}},props:{outbound:{type:String,default:"proxy"},observatory:{type:Object,default(){return null}}},data(){return{enterReducedSidebar:!1,showSidebar:!1,importWhat:"",showModalImport:!1,showModalImportInBatch:!1,currentPage:{servers:1,subscriptions:1},tableData:{servers:[],subscriptions:[],connectedServer:[]},checkedRows:[],ready:!1,tab:0,runningState:{running:this.$t("common.checkRunning"),connectedServer:null,outboundToServerName:{}},showModalServer:!1,which:null,modalServerReadOnly:!1,showModalSubscription:!1,connectedServerInTab:{subscriptionServer:Array(100),server:!1},connectedServerInfo:[],overHeight:!1,clipboard:null}},computed:{loadBalanceValid(){return"true"===localStorage["loadBalanceValid"]}},watch:{"runningState.running"(){this.updateConnectView()},outbound(){this.updateConnectView()},tableData(t){for(const e of t.subscriptions)e.status=lt(e.status).tz(lt.tz.guess()).format("YYYY-MM-DD HH:mm:ss")},observatory(t){for(const o of t.body.outboundStatus)this.connectedServerInfo.some((t=>{if(o.which._type===t.which._type&&o.which.id===t.which.id&&o.which.sub===t.which.sub){for(const e in o)"which"!==e&&o.hasOwnProperty(e)&&(t.info[e]=o[e]);return!0}return!1}));let e=99999,s=-1;this.connectedServerInfo.forEach(((t,o)=>{t.selected=!1,t.info.delay&&t.info.delay<e&&(e=t.info.delay,s=o)})),s>=0&&(this.connectedServerInfo[s].selected=!0)}},created(){this.$axios({url:`${localStorage["backendAddress"]}/api/touch`}).then((t=>{this.refreshTableData(t.data.data.touch,t.data.data.running),this.locateTabToConnected(),this.ready=!0}))},beforeDestroy(){this.clipboard.destroy()},mounted(){document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1),this.clipboard=new(q())(".sharingAddressTag"),this.clipboard.on("success",(t=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",queue:!1}),t.clearSelection()})),this.clipboard.on("error",(t=>{this.$buefy.toast.open({message:this.$t("common.fail")+", error:"+t.toLocaleString(),type:"is-warning",position:"is-top",queue:!1})}));const t=this;let e=null;window.addEventListener("scroll",(s=>{clearTimeout(e),setTimeout((()=>{e=null,t.overHeight=s.target.scrollingElement.scrollTop>50}),100)}))},methods:{refreshTableData(t,e){t.servers.forEach((t=>{t.connected=!1})),t.subscriptions.forEach((t=>{t.servers.forEach((t=>{t.connected=!1}))})),this.tableData=t,void 0!==e&&Object.assign(this.runningState,{running:e?this.$t("common.isRunning"):this.$t("common.notRunning"),connectedServer:t.connectedServer})},handleClickConnectedServer(t){const e=this;this.locateTabToConnected(t);let s=-1;s="server"===t._type?1:2+t.sub;let o=0;const a=5,n=500;function i(){if(document.querySelector(`.main-tabs > .tabs > ul > li:nth-child(${1+s})`).classList.contains("is-active"))console.log("ok"),e.$nextTick((()=>{let o=document.querySelectorAll(".main-tabs .b-table");"subscriptionServer"===t._type&&(s=2),o=o[s].querySelectorAll("table > tbody > tr");const a=Array.from(o).find((e=>parseInt(e.querySelector('td[data-label="ID"]')?.textContent)===t.id));if(!a)return void console.warn("node not found");a.scrollIntoView({block:"center",inline:"center"});let n="highlight-row-connected";e.runningState.running!==e.$t("common.isRunning")&&(n="highlight-row-disconnected"),a.classList.add(n),setTimeout((()=>{a.classList.remove(n),setTimeout((()=>{a.classList.add(n),setTimeout((()=>{a.classList.remove(n)}),200)}),50)}),200)}));else{if(o++,o>a)return;setTimeout(i,n)}}i()},handleClickImportInBatch(){this.showModalImportInBatch=!0},handleModalImportShow(){this.$refs.importInput.focus()},handleImportEnter(t){13===t.keyCode&&this.handleClickImportConfirm()},handleFileChange(t){const e=this,s=t.target.files[0];let o=document.querySelector("#QRCodeImport");if(o.outerHTML=o.outerHTML,this.$nextTick((()=>{document.querySelector("#QRCodeImport").addEventListener("change",this.handleFileChange,!1)})),!s.type.match(/image\/.*/))return void this.$buefy.toast.open({message:this.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1});const a=new FileReader;a.onload=function(t){const s=t.target.result,o=new H.h;o.scan(s).then((t=>{console.log(t),e.handleClickImportConfirm(t.data)})).catch((t=>{console.error(t),e.$buefy.toast.open({message:e.$t("import.qrcodeError"),type:"is-warning",position:"is-top",queue:!1})}))},a.readAsDataURL(s)},sortNumberServers(t,e,s){return s?t.servers.length>e.servers.length?1:-1:t.servers.length<e.servers.length?1:-1},sortping(t,e,s){return isNaN(parseInt(t.pingLatency))?1:isNaN(parseInt(e.pingLatency))?-1:s?parseInt(t.pingLatency)>parseInt(e.pingLatency)?1:-1:parseInt(t.pingLatency)<parseInt(e.pingLatency)?1:-1},sortConnections(t,e,s){return t.connected&&!e.connected?-1:!t.connected&&e.connected?1:s?isNaN(parseInt(t.pingLatency))?1:isNaN(parseInt(e.pingLatency))?-1:parseInt(t.pingLatency)>parseInt(e.pingLatency)?1:-1:isNaN(parseInt(t.pingLatency))?-1:isNaN(parseInt(e.pingLatency))||parseInt(t.pingLatency)<parseInt(e.pingLatency)?1:-1},filterConnectedServer(t,e=this.outbound){const s=[];if(t instanceof Array){for(let o of t)o.outbound===e&&s.push(o);return s.length?s:null}return t},updateConnectView(){let t=this.runningState.connectedServer;if(this.runningState.outboundToServerName={},this.runningState.connectedServer?.forEach((t=>{const e=f(this.tableData,t);this.runningState.outboundToServerName[t.outbound]&&"number"!==typeof this.runningState.outboundToServerName[t.outbound]&&(this.runningState.outboundToServerName[t.outbound]=1),"number"===typeof this.runningState.outboundToServerName[t.outbound]?this.runningState.outboundToServerName[t.outbound]++:this.runningState.outboundToServerName[t.outbound]=e.name})),t=this.filterConnectedServer(t),this.tableData.servers.forEach((t=>{t.connected&&(t.connected=!1)})),this.tableData.subscriptions.forEach((t=>{t.servers.forEach((t=>{t.connected&&(t.connected=!1)}))})),t){let e=f(this.tableData,t);if(e instanceof Array)for(const t of e)t.connected=!0;else e.connected=!0,e=[e];this.connectedServerInfo=[];for(const s in e){let o=null;"subscriptionServer"===t[s]._type&&(o=this.tableData.subscriptions[t[s].sub].host.toUpperCase()),this.connectedServerInfo.push({info:{...e[s],subscription_name:o,alive:null,delay:null,outbound_tag:null,last_seen_time:null,last_error_reason:null,last_try_time:null},which:t[s],showContent:!0,selected:!1})}}else this.connectedServerInfo=[];this.connectedServerInfo.sort(((t,e)=>t.info.name>e.info.name)),this.connectedServerInTab.server=!1;for(const e in this.connectedServerInTab.subscriptionServer)this.connectedServerInTab.subscriptionServer[e]=!1;if(t){let e=t;t instanceof Array||(e=[t]);for(const t of e)"server"===t._type?this.connectedServerInTab.server=!0:"subscriptionServer"===t._type&&(this.connectedServerInTab.subscriptionServer[t.sub]=!0)}this.$emit("input",this.runningState)},locateTabToConnected(t){let e=t;if(e||(e=this.runningState.connectedServer),!e)return;if(e=this.filterConnectedServer(e),!e)return;e instanceof Array&&(e=e[0]);let s=e.sub,o=2,a=1;e._type===h.SubscriptionServerType?this.tab=s+o:e._type===h.ServerType&&(this.tab=a)},handleClickImportQRCode(){document.querySelector("#QRCodeImport").click()},handleClickImport(){this.showModalImport=!0},handleClickImportConfirm(t){return"string"!=typeof t&&(t=null),this.$axios({url:`${localStorage["backendAddress"]}/api/import`,method:"post",data:{url:t||this.importWhat}}).then((t=>{"SUCCESS"===t.data.code?(this.refreshTableData(t.data.data.touch,t.data.data.running),this.updateConnectView(),this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",queue:!1}),this.showModalImport=!1,this.showModalImportInBatch=!1,this.importWhat=""):this.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",queue:!1})}))},deleteSelectedServers(){this.$axios({url:`${localStorage["backendAddress"]}/api/touch`,method:"delete",data:{touches:this.checkedRows.map((t=>({id:t.id,_type:t._type})))}}).then((t=>{"SUCCESS"===t.data.code?(this.refreshTableData(t.data.data.touch,t.data.data.running),this.checkedRows=[],this.updateConnectView()):this.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",duration:5e3,queue:!1})}))},handleClickDelete(){this.$buefy.dialog.confirm({title:this.$t("delete.title"),message:this.$t("delete.message"),confirmText:this.$t("operations.delete"),cancelText:this.$t("operations.cancel"),type:"is-danger",hasIcon:!0,icon:" iconfont icon-alert",onConfirm:()=>this.deleteSelectedServers()})},handleClickAboutConnection(t,e){let s;t.connected?this.$axios({url:`${localStorage["backendAddress"]}/api/connection`,method:"delete",data:{id:t.id,_type:t._type,sub:e,outbound:this.outbound}}).then((e=>{"SUCCESS"===e.data.code?(t.connected=!1,Object.assign(this.runningState,{running:e.data.data.running?this.$t("common.isRunning"):this.$t("common.notRunning"),connectedServer:e.data.data.touch.connectedServer}),this.updateConnectView()):this.$buefy.toast.open({message:e.data.message,type:"is-warning",position:"is-top",duration:5e3,queue:!1})})):Ht(this.$axios({url:`${localStorage["backendAddress"]}/api/connection`,method:"post",data:{id:t.id,_type:t._type,sub:e,outbound:this.outbound},cancelToken:new et.CancelToken((function(t){s=t}))}).then((t=>{"SUCCESS"===t.data.code?(Object.assign(this.runningState,{running:t.data.data.running?this.$t("common.isRunning"):this.$t("common.notRunning"),connectedServer:t.data.data.touch.connectedServer}),this.$nextTick((()=>{this.updateConnectView()}))):(this.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",duration:5e3,queue:!1}),this.deleteSelectedServers())})),3e3,s)},handleClickLatency(t){let e=JSON.stringify(this.checkedRows.map((t=>{let e=this.tableData.subscriptions.findIndex((e=>e.servers.some((e=>t===e))));return{id:t.id,_type:t._type,sub:-1===e?null:e}})));this.checkedRows.forEach((t=>t.pingLatency="testing..."));let s=setTimeout((()=>{this.$buefy.toast.open({message:this.$t("latency.message"),type:"is-primary",position:"is-top",duration:5e3,queue:!1})}),12e3);this.$axios({url:`${localStorage["backendAddress"]}/api`+(t?"/pingLatency":"/httpLatency"),params:{whiches:e},timeout:0}).then((t=>{v(t,this,(()=>{t.data.data.whiches.forEach((t=>{let e=f(this.tableData,t);e.pingLatency=t.pingLatency})),this.updateConnectView()}),(()=>{this.$buefy.toast.open({message:t.data.message,type:"is-warning",position:"is-top",queue:!1,duration:5e3}),this.checkedRows.forEach((t=>t.pingLatency=""))}))})).finally((()=>{clearTimeout(s)}))},handleTabsChange(t){this.checkedRows=[]},isCheckedRowsDeletable(){return this.checkedRows.length>0&&this.checkedRows.every((t=>t._type!==h.SubscriptionServerType))},isCheckedRowsPingable(){return this.checkedRows.length>0&&this.checkedRows.some((t=>t._type===h.ServerType||t._type===h.SubscriptionServerType))},handleClickShare(t,e){const s={[h.SubscriptionServerType]:"SERVER",[h.ServerType]:"SERVER",[h.SubscriptionType]:"SUBSCRIPTION"};this.$axios({url:`${localStorage["backendAddress"]}/api/sharingAddress`,method:"get",params:{touch:{id:t.id,_type:t._type,sub:e}}}).then((e=>{v(e,this,(()=>{this.$buefy.modal.open({width:500,component:Z,props:{title:s[t._type],sharingAddress:e.data.data.sharingAddress,shortDesc:t.name||t.host||t.address,type:t._type}})}))}))},handleClickUpdateSubscription(t){this.$axios({url:`${localStorage["backendAddress"]}/api/subscription`,method:"put",data:{id:t.id,_type:t._type}}).then((t=>{v(t,this,(()=>{this.refreshTableData(t.data.data.touch,t.data.data.running),this.updateConnectView(),this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",duration:5e3,queue:!1})}))}))},handleClickCreate(){this.modalServerReadOnly=!1,this.which=null,this.showModalServer=!0},handleClickModifyServer(t){this.modalServerReadOnly=!1,this.which=Object.assign({},t),this.which.servers=[],this.showModalServer=!0},handleClickViewServer(t,e){this.modalServerReadOnly=!0,this.which={...t,sub:e},this.showModalServer=!0},handleModalServerSubmit(t){this.$axios({url:`${localStorage["backendAddress"]}/api/import`,method:"post",data:{url:t,which:this.which},timeout:0}).then((t=>{v(t,this,(()=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",duration:3e3,queue:!1}),this.showModalServer=!1,this.refreshTableData(t.data.data.touch,t.data.data.running),this.updateConnectView()}))}))},handleClickModifySubscription(t){this.which=Object.assign({},t),this.which.servers=[],this.showModalSubscription=!0},handleModalSubscriptionSubmit(t){this.$axios({url:`${localStorage["backendAddress"]}/api/subscription`,method:"patch",data:{subscription:t}}).then((t=>{v(t,this,(()=>{this.$buefy.toast.open({message:this.$t("common.success"),type:"is-primary",position:"is-top",duration:3e3,queue:!1}),this.showModalSubscription=!1,this.refreshTableData(t.data.data.touch,t.data.data.running),this.updateConnectView()}))}))}}},ie=ne,re=(0,R.Z)(ie,zt,Bt,!1,null,"c7449e42",null),le=re.exports,ce=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{"max-width":"450px",margin:"auto"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(" "+t._s(t.outbound)+" - "+t._s(t.$t("common.outboundSetting"))+" ")])]),e("section",{staticClass:"modal-card-body"},[e("b-field",{attrs:{label:"ProbeURL","label-position":"on-border"}},[e("b-input",{ref:"probe_url",attrs:{required:"",expanded:""},model:{value:t.setting.probeURL,callback:function(e){t.$set(t.setting,"probeURL",e)},expression:"setting.probeURL"}})],1),e("b-field",{attrs:{label:"ProbeInterval","label-position":"on-border"}},[e("b-input",{ref:"probe_interval",attrs:{required:"",expanded:""},model:{value:t.setting.probeInterval,callback:function(e){t.$set(t.setting,"probeInterval",e)},expression:"setting.probeInterval"}})],1),e("b-field",{attrs:{label:"Type","label-position":"on-border"}},[e("b-select",{attrs:{expanded:""},model:{value:t.setting.type,callback:function(e){t.$set(t.setting,"type",e)},expression:"setting.type"}},[e("option",{attrs:{value:"leastping"}},[t._v(" "+t._s(t.$t("setting.options.leastPing"))+" ")])])],1)],1),e("footer",{staticClass:"modal-card-foot flex-end"},[e("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.handleClickDelete}},[t._v(" "+t._s(t.$t("operations.delete"))+" ")]),e("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"-moz-available"}},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("operations.cancel"))+" ")]),e("button",{staticClass:"button is-primary",on:{click:t.handleClickSubmit}},[t._v(" "+t._s(t.$t("operations.confirm"))+" ")])])])])},de=[],ue={name:"ModalOutboundSetting",i18n:P,props:{outbound:{type:String,required:!0}},data:()=>({setting:{probeURL:"",probeInterval:"",type:""},backendReady:!1}),created(){this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,params:{outbound:this.outbound}}).then((t=>{v(t,this,(()=>{Object.assign(this.setting,t.data.data.setting)}))}))},methods:{handleClickDelete(){const t=this;this.$buefy.dialog.confirm({title:t.$t("delete.title"),message:t.$t("outbound.deleteMessage",{outboundName:t.outbound}),confirmText:t.$t("operations.delete"),cancelText:t.$t("operations.cancel"),type:"is-danger",hasIcon:!0,icon:" iconfont icon-alert",onConfirm:()=>{t.$emit("delete"),t.$parent.close()}})},handleClickSubmit(){let t=!0;for(let e in this.$refs){if(!this.$refs.hasOwnProperty(e))continue;let s=this.$refs[e];s&&(s.$el.offsetParent&&s.hasOwnProperty("checkHtml5Validity")&&"function"===typeof s.checkHtml5Validity&&!s.checkHtml5Validity()&&(console.error("validate failed",s),t=!1))}if(!t)return;this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,method:"put",data:{outbound:this.outbound,setting:this.setting}}).then((t=>{v(t,this,(()=>{this.$buefy.toast.open({message:t.data.code,type:"is-primary",position:"is-top",queue:!1}),this.$parent.close()})),"SUCCESS"!==t.data.code&&t.data.message.indexOf("invalid config")>=0&&(this.$parent.$parent.runningState.running=this.$t("common.notRunning"))}))}}},pe=ue,he=(0,R.Z)(pe,ce,de,!1,null,null,null),me=he.exports,be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card",staticStyle:{width:"65rem"}},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v(" "+t._s(t.$tc("log.logModalTitle"))+" ")])]),e("section",{ref:"section",class:{"modal-card-body":!0}},[e("b-field",{attrs:{label:t.$tc("log.refreshInterval")}},[e("b-select",{on:{input:t.changeInterval},model:{value:t.intervalTime,callback:function(e){t.intervalTime=e},expression:"intervalTime"}},t._l(t.intervalCandidate,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(`${s} ${t.$tc("log.seconds")}`)+" ")])})),0)],1),e("b-field",{staticStyle:{"margin-bottom":"2rem"},attrs:{label:"Logs"}},[e("RecycleScroller",{ref:"logScroller",staticClass:"log-scroller",attrs:{items:t.items,"item-size":t.itemSize,"grid-items":1,buffer:1e3},scopedSlots:t._u([{key:"default",fn:function({item:t}){return[e("hightlight-log",{staticClass:"text",attrs:{text:t.text}})]}}])})],1),e("b-field",[e("b-switch",{on:{input:t.changeScoll},model:{value:t.autoScoll,callback:function(e){t.autoScoll=e},expression:"autoScoll"}},[t._v(" "+t._s(t.$tc("log.autoScoll"))+" ")])],1)],1)])},fe=[],ve=s(837),ge=(s(3249),s(9034));ve.Z.registerLanguage("accesslog",ge.Z);var ye,we,Se={name:"HightlightLog",props:{text:{type:String,default:""}},render(t){return t("div",{class:"log language-accesslog",domProps:{innerHTML:ve.Z.highlight(this.text,{language:"accesslog",ignoreIllegals:!0}).value}})}},ke=Se,_e=(0,R.Z)(ke,ye,we,!1,null,"7c02a99b",null),$e=_e.exports,xe={components:{HightlightLog:$e},data(){return{items:[],endOfLine:!0,currentSkip:0,intervalId:0,intervalTime:5,intervalCandidate:[2,5,10,15],itemSize:28,autoScoll:!0}},created(){this.autoScoll=!("false"===localStorage.getItem("log.autoScoll")),this.$axios({url:`${localStorage["backendAddress"]}/api/logger`}).then(this.updateLog)},mounted(){this.intervalId=setInterval((()=>{this.$axios({url:`${localStorage["backendAddress"]}/api/logger`,params:{skip:this.currentSkip}}).then(this.updateLog)}),1e3*this.intervalTime)},destroyed(){clearInterval(this.intervalId)},methods:{updateLog(t){if(t.data.length&&0!==t.data.length){const e=this.items.length,s=t.data.split("\n").map(((t,s)=>({text:t,id:e+s})));this.endOfLine?this.items=this.items.concat(s):(this.items[this.items.length-1].text+=s[0].text,this.items=this.items.concat(s.slice(1))),this.endOfLine=s[s.length-1].text.endsWith("\n"),this.currentSkip+=new Blob([t.data]).size,this.autoScoll&&this.$refs.logScroller.scrollToItem(this.items.length-1)}},changeInterval(t){this.intervalTime=t,clearInterval(this.intervalId),this.intervalId=setInterval((()=>{this.$axios({url:`${localStorage["backendAddress"]}/api/logger`,params:{skip:this.currentSkip}}).then(this.updateLog)}),1e3*this.intervalTime)},changeScoll(t){localStorage.setItem("log.autoScoll",t)}}},Ce=xe,Ae=(0,R.Z)(Ce,be,fe,!1,null,"b936132c",null),Pe=Ae.exports,Te={components:{ModalCustomAddress:Y,node:le},data(){return{ws:null,observatory:null,showSidebar:!0,statusMap:{[this.$t("common.checkRunning")]:"is-light",[this.$t("common.notRunning")]:"is-danger",[this.$t("common.isRunning")]:"is-success"},coverStatusText:"",runningState:{running:this.$t("common.checkRunning"),connectedServer:null,outboundToServerName:{}},showCustomPorts:!1,langs:[{flag:"zh",alt:"简体中文"},{flag:"en",alt:"English"}],outboundName:"proxy",outbounds:["proxy"],outboundDropdownHover:{},updateOutboundDropdown:!0}},computed:{username(){let t=localStorage["token"];if(!t)return this.$t("common.notLogin");let e=JSON.parse(E.Base64.decode(t.split(".")[1]));return e["uname"]},isMobile(){return window.screen.width<800}},mounted(){console.log("app created");let t=localStorage.getItem("backendAddress");if(t){let e=g(t);document.title=`v2rayA - ${e.host}:${e.port}`}this.$axios({url:`${localStorage["backendAddress"]}/api/version`}).then((t=>{if("SUCCESS"===t.data.code){let e={message:this.$t(t.data.data.dockerMode?"welcome.docker":"welcome.default",{version:t.data.data.version}),type:"is-dark",position:"is-top",duration:3e3,queue:!1};t.data.data.foundNew&&(e.duration=5e3,e.message+=". "+this.$t("welcome.newVersion",{version:t.data.data.remoteVersion}),e.type="is-success"),this.$buefy.toast.open(e),localStorage["docker"]=t.data.data.dockerMode,localStorage["version"]=t.data.data.version,!1===t.data.data.serviceValid?this.$buefy.toast.open({message:this.$t("version.v2rayInvalid"),type:"is-danger",position:"is-top",queue:!1,duration:1e4}):t.data.data.v5||this.$buefy.toast.open({message:this.$t("version.v2rayNotV5"),type:"is-danger",position:"is-top",queue:!1,duration:1e4}),localStorage["lite"]=t.data.data.lite,localStorage["loadBalanceValid"]=t.data.data.loadBalanceValid}})),this.$axios({url:`${localStorage["backendAddress"]}/api/outbounds`}).then((t=>{"SUCCESS"===t.data.code&&(this.outbounds=t.data.data.outbounds)})),this.connectWsMessage()},beforeDestroy(){this.ws&&this.ws.close()},methods:{connectWsMessage(){const t=this;let e=`${localStorage["backendAddress"]}/api`;e.trim()&&!e.startsWith("/")||(e=location.protocol+"//"+location.host+e);let s="ws",o=g(e);"https"===o.protocol&&(s="wss"),e=`${s}://${o.host}:${o.port}/api/message?Authorization=${encodeURIComponent(localStorage["token"])}`,this.ws&&this.ws.close();const a=new WebSocket(e);a.onopen=()=>{},a.onmessage=e=>{e.data&&t.handleMessage(JSON.parse(e.data))},a.onclose=()=>{a.onmessage=null,t.ws=null,setTimeout((()=>{null===t.ws&&t.connectWsMessage()}),3e3)},this.ws=a},handleMessage(t){"observatory"===t.type&&t.body.outboundName===this.outboundName&&(this.observatory=t)},handleOutboundDropdownActiveChange(t){t&&(this.updateOutboundDropdown=!1,this.updateOutboundDropdown=!0)},outboundNameDecorator(t){return this.runningState.outboundToServerName[t]?"number"===typeof this.runningState.outboundToServerName[t]?`${t} - ${this.$t("common.loadBalance")} (${this.runningState.outboundToServerName[t]})`:`${t} - ${this.runningState.outboundToServerName[t]}`:t},handleAddOutbound(){this.$buefy.dialog.prompt({message:this.$t("outbound.addMessage"),inputAttrs:{maxlength:10},trapFocus:!0,onConfirm:t=>{let e;Ht(this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,method:"post",data:{outbound:t},cancelToken:new et.CancelToken((function(t){e=t}))}).then((t=>{"SUCCESS"===t.data.code?(this.$buefy.toast.open({message:this.$t("common.success"),type:"is-success",duration:2e3,position:"is-top",queue:!1}),this.outbounds=t.data.data.outbounds):this.$buefy.toast.open({message:t.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})})),3e3,e)}})},handleDeleteOutbound(t){let e;Ht(this.$axios({url:`${localStorage["backendAddress"]}/api/outbound`,method:"delete",data:{outbound:t},cancelToken:new et.CancelToken((function(t){e=t}))}).then((e=>{"SUCCESS"===e.data.code?(this.$buefy.toast.open({message:this.$t("common.success"),type:"is-success",duration:2e3,position:"is-top",queue:!1}),this.outbounds=e.data.data.outbounds,this.outboundName===t&&(this.outboundName="proxy"),t in this.runningState.outboundToServerName&&(this.runningState.connectedServer=this.runningState.connectedServer.filter((e=>e.outbound!==t)))):this.$buefy.toast.open({message:e.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})})),3e3,e)},handleClickOutboundSetting(t,e){t.stopPropagation();const s=this;this.$buefy.modal.open({parent:this,component:me,hasModalCard:!0,canCancel:!0,props:{outbound:e},events:{delete(){s.handleDeleteOutbound(e)}}})},handleClickLang(t){localStorage["_lang"]=t,location.reload()},handleOnOutboundMouseEnter(t){this.outboundDropdownHover={[t]:!0}},handleOnOutboundMouseLeave(){this.outboundDropdownHover={}},handleOnStatusMouseEnter(){this.runningState.running===this.$t("common.isRunning")?this.coverStatusText=this.$t("v2ray.stop"):this.runningState.running===this.$t("common.notRunning")&&(this.coverStatusText=this.$t("v2ray.start"))},handleOnStatusMouseLeave(){this.coverStatusText=""},handleClickSetting(){const t=this;this.$buefy.modal.open({parent:this,component:Ft,hasModalCard:!0,canCancel:!0,events:{clickPorts(){t.showCustomPorts=!0}}})},handleClickAbout(){this.$buefy.modal.open({width:640,content:`\n<div class="modal-card" style="margin:auto">\n                    <header class="modal-card-head">\n                        <p class="modal-card-title">mzz2017 / v2rayA</p>\n                    </header>\n                    <section class="modal-card-body lazy">\n                        ${this.$t("about")}\n                    </section>\n                    <footer class="modal-card-foot">\n                        <a class="is-link" href="https://github.com/v2rayA/v2rayA" target="_blank">\n                          <img class="leave-right" src="https://img.shields.io/github/stars/mzz2017/v2rayA.svg?style=social" alt="stars">\n                          <img class="leave-right" src="https://img.shields.io/github/forks/mzz2017/v2rayA.svg?style=social" alt="forks">\n                          <img class="leave-right" src="https://img.shields.io/github/watchers/mzz2017/v2rayA.svg?style=social" alt="watchers">\n                        </a>\n                    </footer>\n                </div>\n`})},handleClickStatus(){if(this.runningState.running===this.$t("common.notRunning")){let t;Ht(this.$axios({url:`${localStorage["backendAddress"]}/api/v2ray`,method:"post",cancelToken:new et.CancelToken((function(e){t=e}))}).then((t=>{"SUCCESS"===t.data.code?Object.assign(this.runningState,{running:this.$t("common.isRunning"),connectedServer:t.data.data.touch.connectedServer}):this.$buefy.toast.open({message:t.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})})),3e3,t)}else this.runningState.running===this.$t("common.isRunning")&&this.$axios({url:`${localStorage["backendAddress"]}/api/v2ray`,method:"delete"}).then((t=>{"SUCCESS"===t.data.code?Object.assign(this.runningState,{running:this.$t("common.notRunning"),connectedServer:t.data.data.touch.connectedServer}):this.$buefy.toast.open({message:t.data.message,type:"is-warning",duration:5e3,position:"is-top",queue:!1})}))},handleClickLogout(){localStorage.removeItem("token"),this.$remount()},handleClickLogs(){this.$buefy.modal.open({parent:this,component:Pe,hasModalCard:!0,canCancel:!0})}}},Ie=Te,Re=(0,R.Z)(Ie,at,nt,!1,null,"5f50b6ef",null),Me=Re.exports;let Le=null;o.ZP.prototype.$remount=()=>{function t(e){if(e)if("function"!=typeof e.close){if("$children"in e)for(let s in e.$children)t(e.$children[s])}else e.close()}t(Le),Le=new o.ZP({i18n:P,store:ot,render:t=>t(Me)}).$mount("#app")},o.ZP.prototype.$remount();var Oe=s(4110),De=s.n(Oe),Ue=s(9387),Ne=s.n(Ue),Ve=s(178),We=s.n(Ve);s(3852),s(5054);ct().extend(De()),ct().extend(We()),ct().extend(Ne()),o.ZP.prototype.$dayjs=ct();var He=s(4801);o.ZP.use(He.ZP);s(4685);o.ZP.config.productionTip=!1},5904:function(){console.log("backendPort");let t=localStorage.getItem("backendAddress");null==t&&localStorage.setItem("backendAddress","")},5640:function(t,e,s){var o={"./flag_en.svg":867,"./flag_zh.svg":6022};function a(t){var e=n(t);return s(e)}function n(t){if(!s.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=n,t.exports=a,a.id=5640},867:function(t,e,s){"use strict";t.exports=s.p+"img/flag_en.a4c6b245.svg"},6022:function(t,e,s){"use strict";t.exports=s.p+"img/flag_zh.2f2bda24.svg"},39:function(t,e,s){"use strict";t.exports=s.p+"img/switch-menu.740f7d73.svg"},1823:function(t,e,s){"use strict";t.exports=s.p+"img/logo2.ee4eeb96.png"}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,n){if(!o){var i=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],n=t[d][2];for(var r=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(r=!1,n<i&&(i=n));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p="static/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,n,i=o[0],r=o[1],l=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(e&&e(o);c<i.length;c++)n=i[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},o=self["webpackChunkv2raya"]=self["webpackChunkv2raya"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(6021)}));o=s.O(o)})();